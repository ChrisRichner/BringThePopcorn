{"version":3,"sources":["loader.ts"],"names":["KodiPassion","KodiPassion.UI","KodiPassion.UI.DataLoaderControl","KodiPassion.UI.DataLoaderControl.constructor","KodiPassion.UI.DataLoaderControl.processed","KodiPassion.UI.DataLoaderControl.ready"],"mappings":"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","file":"KodiPassion/controls/loader/loader.js","sourcesContent":["module KodiPassion.UI {\r\n    export class DataLoaderControl {\r\n        public static url = \"/controls/loader/loader.html\";\r\n        element: HTMLElement;\r\n        container: HTMLElement;\r\n        content: HTMLElement;\r\n\r\n        processed(element, options) {\r\n        }\r\n\r\n        ready(element, options) {\r\n            var page = this;\r\n            WinJSContrib.UI.Application.navigator.closeAllPages();\r\n            Kodi.API.Websocket.init(Kodi.API.currentSettings);\r\n            WinJS.Navigation.history.backstack = [];\r\n            var p = WinJS.Promise.wrap();\r\n\r\n            if (options && options.transitionIn) {\r\n                p = WinJSContrib.UI.Animation.fadeIn(element);\r\n            }\r\n\r\n            p.then(function () {\r\n                return WinJSContrib.UI.Animation.enterGrow(page.content, { easing: WinJSContrib.UI.Animation.Easings.easeOutBack }).then(function () {\r\n                    return WinJS.Promise.join({\r\n                        mintime: WinJS.Promise.timeout(1000),\r\n                        data: Kodi.Data.loadRootData(true)\r\n                    })\r\n                })\r\n            }).then(function (data) {\r\n                document.body.classList.remove(\"unconnected\");\r\n                Kodi.NowPlaying.init();\r\n\r\n                return WinJS.Navigation.navigate(\"/pages/home/home.html\")\r\n            }, function (err) {\r\n                document.body.classList.add(\"unconnected\");\r\n                return WinJS.Navigation.navigate(\"/pages/startup/startup.html\");\r\n            }).then(function () {\r\n                page.container.classList.add('exit');\r\n                //return WinJSContrib.UI.afterTransition(page.container);\r\n                return WinJS.Promise.timeout(700);\r\n            }).then(function () {\r\n                $(page.element).remove();\r\n                (<any>page).dispose();\r\n            });\r\n        }\r\n    }\r\n\r\n    export var DataLoader = <any>WinJS.UI.Pages.define(DataLoaderControl.url, DataLoaderControl);\r\n\r\n    DataLoader.showLoader = function (transitionIn, startupArgs) {\r\n        var e = <HTMLElement>document.createElement(\"DIV\");\r\n        e.className = \"page-loader-wrapper\";\r\n        if (transitionIn)\r\n            e.style.opacity = '0';\r\n\r\n        document.body.appendChild(e);\r\n        var loader = new KodiPassion.UI.DataLoader(e, { transitionIn: transitionIn, startupArgs: startupArgs });\r\n    }\r\n}\r\n"],"sourceRoot":" "}