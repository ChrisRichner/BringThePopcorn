{"version":3,"sources":["nowplayingbar.ts"],"names":["KodiPassion","KodiPassion.UI","KodiPassion.UI.NowPlayingBarControl","KodiPassion.UI.NowPlayingBarControl.constructor","KodiPassion.UI.NowPlayingBarControl.processed","KodiPassion.UI.NowPlayingBarControl.toggleView","KodiPassion.UI.NowPlayingBarControl.maximize","KodiPassion.UI.NowPlayingBarControl.minimize"],"mappings":"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","file":"KodiPassion/controls/nowplayingbar/nowplayingbar.js","sourcesContent":["interface JQueryStatic {\r\n    Velocity: any;\r\n}\r\n\r\nmodule KodiPassion.UI{\r\n    export class NowPlayingBarControl {\r\n        public static url = \"/controls/nowplayingbar/nowplayingbar.html\";\r\n        element: HTMLElement;\r\n        container: HTMLElement;\r\n        playingElt: HTMLElement;\r\n        contentElt: HTMLElement;\r\n        rangeSeek: HTMLInputElement;\r\n\r\n        processed(element, options) {\r\n            this.container = <HTMLElement>document.getElementById(\"contentwrapper\");\r\n            this.playingElt = <HTMLElement>document.getElementById(\"nowplaying\");\r\n            this.contentElt = <HTMLElement>document.getElementById(\"nowplayingcontent\");\r\n\r\n            WinJS.Navigation.addEventListener(\"beforenavigate\", () => {\r\n                this.minimize(true);\r\n            });\r\n\r\n            this.rangeSeek.onchange = () => {\r\n                var progressval = parseInt(this.rangeSeek.value);\r\n                console.log(\"seek to \" + progressval);\r\n                Kodi.API.Player.seek(Kodi.NowPlaying.current.playerid, progressval).then(function (r) {\r\n                    Kodi.NowPlaying.current.progress = progressval;\r\n                }, function (err) {\r\n                    var e = err;\r\n                });\r\n            }\r\n\r\n            KodiPassion.mapKodiApi(element);\r\n            return WinJS.Binding.processAll(this.element, Kodi.NowPlaying.current);\r\n        }\r\n\r\n        toggleView() {\r\n            var ctrl = this;\r\n\r\n            if (document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                this.minimize();\r\n            } else {\r\n                this.maximize();\r\n            }\r\n        }\r\n\r\n        maximize() {\r\n            var ctrl = this;\r\n            if (!document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                var target = ctrl.container.clientHeight - ctrl.element.clientHeight;\r\n                ctrl.playingElt.style.height = 'auto';\r\n                $.Velocity.hook(ctrl.playingElt, \"top\", target + \"px\");\r\n                WinJSContrib.UI.Application.navigator.pageControl.foWrapper.blurTo(20, 120);\r\n                \r\n                $.Velocity(ctrl.playingElt, { top: '0px' }, { duration: 200, easing: 'easeOutQuart' }).then(function () {\r\n                    document.body.classList.add(\"nowplaying-expanded\");\r\n                    Kodi.NowPlaying.current.expanded = true;\r\n                });\r\n            }\r\n        }\r\n\r\n        minimize(instantly?:boolean) {\r\n            var ctrl = this;\r\n            if (document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                if (instantly) {\r\n                    ctrl.playingElt.style.top = '';\r\n                    ctrl.playingElt.style.height = '';\r\n                    document.body.classList.remove(\"nowplaying-expanded\");\r\n                    return;\r\n                }\r\n                var target = ctrl.container.clientHeight - ctrl.element.clientHeight;\r\n                $.Velocity.hook(ctrl.playingElt, \"top\", \"0\");\r\n                WinJSContrib.UI.Application.navigator.pageControl.foWrapper.blurTo(0, 90);\r\n                $.Velocity(ctrl.playingElt, { top: target + 'px' }, { duration: 90, easing: 'easeOutQuart' }).then(function () {\r\n                    ctrl.playingElt.style.height = '';\r\n                    ctrl.playingElt.style.top = '';\r\n                    document.body.classList.remove(\"nowplaying-expanded\");\r\n                    Kodi.NowPlaying.current.expanded = false;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    export var NowPlayingSummary = WinJS.UI.Pages.define(NowPlayingBarControl.url, NowPlayingBarControl);\r\n}\r\n"],"sourceRoot":" "}