{"version":3,"sources":["remote.ts"],"names":["KodiPassion","KodiPassion.UI","KodiPassion.UI.RemoteControllerControl","KodiPassion.UI.RemoteControllerControl.constructor","KodiPassion.UI.RemoteControllerControl.processed","KodiPassion.UI.RemoteControllerControl.loadProfiles","KodiPassion.UI.RemoteControllerControl.showProfiles","KodiPassion.UI.RemoteControllerControl.showPowerOptions","KodiPassion.UI.RemoteControllerControl.shutdown","KodiPassion.UI.RemoteControllerControl.restart","KodiPassion.UI.RemoteControllerControl.loadLanguages","KodiPassion.UI.RemoteControllerControl.loadSubtitles"],"mappings":"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","file":"KodiPassion/controls/remote/remote.js","sourcesContent":["module KodiPassion.UI {\r\n\r\n    export class RemoteControllerControl {\r\n        public static url = \"/controls/remote/remote.html\";\r\n        static logger = WinJSContrib.Logs.getLogger(\"KDP.Remote\");\r\n\r\n        btnProfiles: HTMLElement;\r\n        profilesItems: HTMLElement;\r\n        language: HTMLSelectElement;\r\n        subtitle: HTMLSelectElement;\r\n        rangeVolume: HTMLInputElement;\r\n        rangeSeek: HTMLInputElement;\r\n        eventTracker: WinJSContrib.UI.EventTracker;\r\n        shutdownFlyout: WinJS.UI.Flyout;\r\n        profilesFlyout: WinJS.UI.Flyout;\r\n\r\n        processed(element, options) {\r\n            KodiPassion.mapKodiApi(element);\r\n            this.loadLanguages();\r\n            this.loadSubtitles();\r\n            this.rangeVolume.onchange = () => {\r\n                var volumeval = parseInt(this.rangeVolume.value);\r\n                Kodi.API.Input.volume(volumeval);\r\n            }\r\n\r\n            this.eventTracker.addBinding(Kodi.NowPlaying.current, \"expanded\", () => {\r\n                if (Kodi.NowPlaying.current.expanded) {\r\n                    this.loadProfiles();\r\n                }\r\n            });\r\n\r\n            this.rangeSeek.onchange = () => {\r\n                var progressval = parseInt(this.rangeSeek.value);\r\n                console.log(\"seek to \" + progressval);\r\n                Kodi.API.Player.seek(Kodi.NowPlaying.current.playerid, progressval).then(function (r) {\r\n                    Kodi.NowPlaying.current.progress = progressval;\r\n                }, function (err) {\r\n                    var e = err;\r\n                });\r\n            }\r\n\r\n            return WinJS.Binding.processAll(element, Kodi.NowPlaying.current);\r\n        }\r\n\r\n        loadProfiles() {\r\n            WinJS.Promise.join({\r\n                current: Kodi.API.Profiles.getCurrentProfile(),\r\n                list: Kodi.API.Profiles.getProfiles()\r\n            }).then((profiles) => {\r\n                this.profilesItems.innerHTML = \"\";\r\n                if (profiles && profiles.list) {\r\n                    if (profiles.list.profiles.length == 1) {\r\n                        this.btnProfiles.style.display = \"none\";\r\n                        return;\r\n                    } else {\r\n                        this.btnProfiles.style.display = \"\";\r\n                        profiles.list.profiles.forEach((p) => {\r\n                            var b = document.createElement(\"BUTTON\");\r\n                            b.innerText = p.label;\r\n                            if (profiles.current && p.label == profiles.current.label) {\r\n                                b.classList.add(\"selected\");\r\n                            }\r\n\r\n                            this.profilesItems.appendChild(b);\r\n                            WinJSContrib.UI.tap(b, () => {\r\n                                this.profilesFlyout.hide();\r\n                                return Kodi.API.Profiles.loadProfile(p.label).then(() => {\r\n                                    $('.selected', this.profilesItems).removeClass(\"selected\");\r\n                                    b.classList.add(\"selected\");\r\n                                });\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                }, (err) => {\r\n                    this.btnProfiles.style.display = \"none\";\r\n            });\r\n        }\r\n\r\n        showProfiles(arg) {\r\n            this.profilesFlyout.show(<HTMLElement>arg.elt, \"bottom\", \"right\");\r\n        }\r\n\r\n        showPowerOptions(arg) {\r\n            this.shutdownFlyout.show(<HTMLElement>arg.elt, \"bottom\", \"right\");\r\n        }\r\n\r\n        shutdown() {\r\n            this.shutdownFlyout.hide();\r\n            WinJSContrib.Alerts.messageBox({ content: \"This will turn off your media server. After a few seconds, Kodi Passion will not be able to reach your media server any more. \\r\\n\\r\\nDo you want to proceed ?\", title: 'Shutdown media server ?', commands: [{ label: 'Yes' }, { label: 'No', isDefault: true }] }).done(function (c) {\r\n                if (c.label == 'Yes')\r\n                    Kodi.API.System.shutdown().done(function () {\r\n                        WinJS.Navigation.navigate(\"/pages/startup/startup.html\");\r\n                    });\r\n            });\r\n        }\r\n\r\n        restart() {\r\n            this.shutdownFlyout.hide();\r\n            WinJSContrib.Alerts.messageBox({ content: \"This will restart your media server.\\r\\n\\r\\nDo you want to proceed ?\", title: 'Shutdown media server ?', commands: [{ label: 'Yes' }, { label: 'No', isDefault: true }] }).done(function (c) {\r\n                if (c.label == 'Yes')\r\n                    Kodi.API.System.reboot().done(function () {\r\n                        WinJS.Navigation.navigate(\"/pages/startup/startup.html\");\r\n                    });\r\n            });\r\n        }\r\n\r\n        loadLanguages() {\r\n            this.eventTracker.addBinding(Kodi.NowPlaying.current, \"hasLanguages\", () => {\r\n                this.language.innerHTML = \"\";\r\n                if (Kodi.NowPlaying.current.audiostreams) {\r\n                    Kodi.NowPlaying.current.audiostreams.forEach((audiostream) => {\r\n                        var selected = Kodi.NowPlaying.current.currentaudiostream.name == audiostream.name;\r\n                        var o = <HTMLOptionElement>document.createElement(\"OPTION\");\r\n                        o.selected = selected;\r\n                        o.value = audiostream.index;\r\n                        o.innerText = audiostream.name;\r\n                        this.language.appendChild(o);\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n            this.language.onchange = () => {\r\n                var lng = <any>this.language.value;\r\n                if (lng) {\r\n                    lng = parseInt(lng);\r\n                    Kodi.API.Player.setAudioStream(Kodi.NowPlaying.current.playerid, lng).done(() => {\r\n                        Kodi.NowPlaying.check().done((props: any) => {\r\n                            RemoteControllerControl.logger.info('subtitles changed to ' + props.currentaudiostream.name);\r\n                            this.language.value = props.currentaudiostream.index;\r\n                            //$('.languagelabel', page.element).html(toStaticHTML(props.currentaudiostream.name));\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        loadSubtitles() {\r\n            this.eventTracker.addBinding(Kodi.NowPlaying.current, \"id\", () => {\r\n                this.subtitle.innerHTML = \"\";\r\n                if (Kodi.NowPlaying.current.subtitles) {\r\n                    var o = <HTMLOptionElement>document.createElement(\"OPTION\");\r\n                    o.value = \"off\";\r\n                    o.innerText = \"off\";\r\n                    o.selected = !Kodi.NowPlaying.current.subtitleenabled;\r\n                    this.subtitle.appendChild(o);\r\n\r\n                    Kodi.NowPlaying.current.subtitles.forEach((subtitle) => {\r\n                        var selected = Kodi.NowPlaying.current.currentsubtitle.name == subtitle.name;\r\n                        var o = <HTMLOptionElement>document.createElement(\"OPTION\");\r\n                        o.selected = selected;\r\n                        o.value = subtitle.index;\r\n                        o.innerText = subtitle.name;\r\n                        this.subtitle.appendChild(o);\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n            this.subtitle.onchange = () => {\r\n                var subtitle = <any>this.subtitle.value;\r\n                if (subtitle) {\r\n                    if (subtitle != 'off')\r\n                        subtitle = parseInt(subtitle);\r\n\r\n                    Kodi.API.Player.setSubtitle(Kodi.NowPlaying.current.playerid, subtitle).done(() => {\r\n                        if (subtitle != 'off' && !Kodi.NowPlaying.current.subtitleenabled) {\r\n                            Kodi.API.Player.setSubtitle(Kodi.NowPlaying.current.playerid, 'on').done(() => {\r\n                                Kodi.NowPlaying.check().done((props: any) => {\r\n                                    RemoteControllerControl.logger.info('subtitles changed to ' + props.currentsubtitle.name);\r\n                                    this.subtitle.value = Kodi.NowPlaying.current.currentsubtitle.index;\r\n                                });\r\n                            });\r\n                        } else {\r\n                            Kodi.NowPlaying.check().done((props: any) => {\r\n                                if (!props.subtitleenabled) {\r\n                                    RemoteControllerControl.logger.info('subtitles changed to off');\r\n                                    this.subtitle.value = 'off';\r\n                                } else {\r\n                                    RemoteControllerControl.logger.info('subtitles changed to ' + props.currentsubtitle.name);\r\n                                    this.subtitle.value = Kodi.NowPlaying.current.currentsubtitle.index;\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    export var RemoteController = WinJS.UI.Pages.define(RemoteControllerControl.url, RemoteControllerControl);\r\n}\r\n"],"sourceRoot":" "}