{"version":3,"sources":["nowplayingbar.ts"],"names":["BtPo","BtPo.UI","BtPo.UI.NowPlayingBarControl","BtPo.UI.NowPlayingBarControl.constructor","BtPo.UI.NowPlayingBarControl.processed","BtPo.UI.NowPlayingBarControl.toggleView","BtPo.UI.NowPlayingBarControl.maximize","BtPo.UI.NowPlayingBarControl.minimize"],"mappings":"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","file":"BringThePopcorn/controls/nowplayingbar/nowplayingbar.js","sourcesContent":["interface JQueryStatic {\r\n    Velocity: any;\r\n}\r\n\r\nmodule BtPo.UI{\r\n    export class NowPlayingBarControl {\r\n        public static url = \"/controls/nowplayingbar/nowplayingbar.html\";\r\n        element: HTMLElement;\r\n        container: HTMLElement;\r\n        playingElt: HTMLElement;\r\n        contentElt: HTMLElement;\r\n        rangeSeek: HTMLInputElement;\r\n\r\n        processed(element, options) {\r\n            this.container = <HTMLElement>document.getElementById(\"contentwrapper\");\r\n            this.playingElt = <HTMLElement>document.getElementById(\"nowplaying\");\r\n            this.contentElt = <HTMLElement>document.getElementById(\"nowplayingcontent\");\r\n\r\n            WinJS.Navigation.addEventListener(\"beforenavigate\", () => {\r\n                this.minimize(true);\r\n            });\r\n\r\n            this.rangeSeek.onchange = () => {\r\n                var progressval = parseInt(this.rangeSeek.value);\r\n                console.log(\"seek to \" + progressval);\r\n                Kodi.API.Player.seek(Kodi.NowPlaying.current.playerid, progressval).then(function (r) {\r\n                    Kodi.NowPlaying.current.progress = progressval;\r\n                }, function (err) {\r\n                    var e = err;\r\n                });\r\n            }\r\n\r\n            BtPo.mapKodiApi(element);\r\n            return WinJS.Binding.processAll(this.element, Kodi.NowPlaying.current);\r\n        }\r\n\r\n        toggleView() {\r\n            var ctrl = this;\r\n\r\n            if (document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                this.minimize();\r\n            } else {\r\n                this.maximize();\r\n            }\r\n        }\r\n\r\n        maximize() {\r\n            var ctrl = this;\r\n            if (!document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                //var target = ctrl.container.clientHeight - ctrl.element.clientHeight;\r\n                //ctrl.playingElt.style.height = 'auto';\r\n                //$.Velocity.hook(ctrl.playingElt, \"top\", target + \"px\");\r\n                WinJSContrib.UI.Application.navigator.pageControl.foWrapper.blurTo(20, 120);\r\n                \r\n                document.body.classList.add(\"nowplaying-expanded\");\r\n                Kodi.NowPlaying.current.expanded = true;\r\n            }\r\n        }\r\n\r\n        minimize(instantly?:boolean) {\r\n            var ctrl = this;\r\n            if (document.body.classList.contains(\"nowplaying-expanded\")) {\r\n                //if (instantly) {\r\n                //    ctrl.playingElt.style.transform = '';\r\n                //    document.body.classList.remove(\"nowplaying-expanded\");\r\n                //    return;\r\n                //}\r\n               // var target = ctrl.container.clientHeight - ctrl.element.clientHeight;\r\n                //$.Velocity.hook(ctrl.playingElt, \"top\", \"0\");\r\n                var currentPage = WinJSContrib.UI.Application.navigator.pageControl;\r\n                if (currentPage && currentPage.foWrapper) {\r\n                    currentPage.foWrapper.blurTo(0, 90);\r\n                }\r\n                document.body.classList.remove(\"nowplaying-expanded\");\r\n                Kodi.NowPlaying.current.expanded = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    export var NowPlayingSummary = WinJS.UI.Pages.define(NowPlayingBarControl.url, NowPlayingBarControl);\r\n}\r\n"],"sourceRoot":" "}