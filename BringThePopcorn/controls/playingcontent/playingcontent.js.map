{"version":3,"sources":["playingcontent.ts"],"names":["BtPo","BtPo.UI","BtPo.UI.PlayingContentControl","BtPo.UI.PlayingContentControl.constructor","BtPo.UI.PlayingContentControl.manageSmallScreen","BtPo.UI.PlayingContentControl.manageSmallScreenMenu","BtPo.UI.PlayingContentControl.setCurrentItem","BtPo.UI.PlayingContentControl.showEmpty","BtPo.UI.PlayingContentControl.showMovie","BtPo.UI.PlayingContentControl.showEpisode","BtPo.UI.PlayingContentControl.showReactPlayList","BtPo.UI.PlayingContentControl.showPlayList","BtPo.UI.PlayingContentControl.closeCurrent","BtPo.UI.PlayingContentControl.updateLayout","BtPo.UI.PlayingContentControl.dispose"],"mappings":"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","file":"BringThePopcorn/controls/playingcontent/playingcontent.js","sourcesContent":["module BtPo.UI {\r\n    //export declare var ReactPlayListControl: any;\r\n\r\n    class PlayingContentControl {\r\n        element: HTMLElement;\r\n        currentContent: HTMLElement;\r\n        eventTracker: WinJSContrib.UI.EventTracker;\r\n        currentPlayerId: number;\r\n        currentPlaylistId: number;\r\n        currentType: string;\r\n\r\n        constructor(element, options) {\r\n            this.element = element || document.createElement('DIV');\r\n            this.eventTracker = new WinJSContrib.UI.EventTracker();\r\n            options = options || {};\r\n            this.element.winControl = this;\r\n            this.element.classList.add('playingcontent');\r\n            this.element.classList.add('win-disposable');\r\n            this.element.classList.add('mcn-layout-ctrl');\r\n            WinJS.UI.setOptions(this, options);\r\n\r\n            this.eventTracker.addBinding(Kodi.NowPlaying.current, \"id\", () => {\r\n                this.setCurrentItem();\r\n            });\r\n\r\n            this.eventTracker.addEvent(window, \"resize\", () => {\r\n                this.updateLayout();\r\n            });\r\n            this.manageSmallScreen();\r\n            this.showEmpty();\r\n        }\r\n\r\n        manageSmallScreen() {\r\n            var controls = document.querySelectorAll(\"#nowplayingcontent .menubar .menu\");\r\n            for (var i = 0, l = controls.length; i < l; i++) {\r\n                this.manageSmallScreenMenu(<HTMLElement>controls[i]);\r\n            }\r\n        }\r\n\r\n        manageSmallScreenMenu(menu: HTMLElement) {\r\n            var targetid = menu.getAttribute(\"target\");\r\n            if (targetid) {\r\n                \r\n                WinJSContrib.UI.tap(menu, function () {\r\n                    var target = <HTMLElement>document.getElementById(targetid);\r\n                    if (target) {\r\n                        var currentSelection = $(\"#nowplayingcontent .panel.selected\");\r\n                        if (!target.classList.contains(\"selected\") || currentSelection.length > 1) {\r\n                            $(\"#nowplayingcontent .menubar .menu.selected\").removeClass(\"selected\");\r\n\r\n                            menu.classList.add(\"selected\");\r\n\r\n                            if (currentSelection.length) {\r\n                                dynamics.animate(currentSelection.get(0), { translateX: currentSelection.outerWidth() + 50 }, {\r\n                                    type: dynamics.spring,\r\n                                    duration: 350,\r\n                                    frequency: 1,\r\n                                    friction: 200,\r\n                                    complete: function () {\r\n                                        currentSelection.removeClass(\"selected\");\r\n                                        currentSelection.get(0).style.transform = \"\";\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            dynamics.animate(target, { translateX: 0 }, {\r\n                                type: dynamics.spring,\r\n                                duration: 500,\r\n                                frequency: 100,\r\n                                friction: 210,\r\n                                complete: function () {\r\n                                    target.classList.add(\"selected\");\r\n                                    target.style.transform = \"\";\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        setCurrentItem() {\r\n            var id = Kodi.NowPlaying.current.id;\r\n            //this.closeCurrent().then(() => {\r\n            //    this.showReactPlayList([{ id: \"1\", label: \"item1\" }, { id: \"2\", label: \"item2\" }, { id: \"3\", label: \"item3\" }, { id: \"4\", label: \"item4\" }]);\r\n            //});\r\n            //return;\r\n\r\n            if (Kodi.NowPlaying.current.playlistid == null || Kodi.NowPlaying.current.playlistid == undefined) {\r\n                return this.showEmpty();\r\n            }\r\n\r\n            if (Kodi.NowPlaying.current.playerid != this.currentPlayerId || Kodi.NowPlaying.current.playlistid != this.currentPlaylistId || Kodi.NowPlaying.current.type != this.currentType) {\r\n                this.currentPlaylistId = Kodi.NowPlaying.current.playlistid;\r\n                this.currentPlayerId = Kodi.NowPlaying.current.playerid;\r\n                this.currentType = Kodi.NowPlaying.current.type;\r\n\r\n                this.closeCurrent().then(() => {\r\n                    if (Kodi.NowPlaying.current.id != null && Kodi.NowPlaying.current.id != undefined) {\r\n                        if (Kodi.NowPlaying.current.playlistid != null && Kodi.NowPlaying.current.playlistid != undefined) {\r\n                            return Kodi.API.PlayList.getItems(Kodi.NowPlaying.current.playlistid).then((playlist) => {\r\n                                if (Kodi.NowPlaying.current.type === \"song\") {\r\n                                    return this.showReactPlayList(playlist.items);\r\n                                }\r\n                                else if (playlist.items && playlist.items.length > 1) {\r\n                                    return this.showPlayList(playlist.items);\r\n                                } else if (Kodi.NowPlaying.current.type === \"movie\") {\r\n                                    return this.showMovie();\r\n                                } else if (Kodi.NowPlaying.current.type === \"episode\") {\r\n                                    return this.showEpisode();\r\n                                }\r\n                                return this.showEmpty();\r\n\r\n                            });\r\n                        }\r\n                    }\r\n                    this.showEmpty();\r\n\r\n                });\r\n            }\r\n        }\r\n\r\n        showEmpty() {\r\n            var p = WinJS.Promise.wrap();\r\n            this.currentPlaylistId = null;\r\n            this.currentPlayerId = null;\r\n            this.currentType = null;\r\n\r\n            if (this.currentContent && !this.currentContent.classList.contains(\"emptyplaying\")) {\r\n                p = this.closeCurrent();\r\n            }\r\n\r\n            p.then(() => {\r\n                if (!this.currentContent || !this.currentContent.classList.contains(\"emptyplaying\")) {\r\n\r\n\r\n                    this.currentContent = document.createElement(\"DIV\");\r\n\r\n                    this.currentContent.classList.add(\"emptyplaying\");\r\n                    this.currentContent.innerHTML = '<div class=\"content\"><img src=\"/images/logos/PopcornRounded.svg\"  draggable=\"false\"/><div class=\"message\">nothing is currently playing</div></div>';\r\n                    this.element.appendChild(this.currentContent);\r\n                }\r\n            });\r\n        }\r\n\r\n        showMovie() {\r\n            Kodi.Data.loadRootData().then((data) => {\r\n                var movie = data.movies.movies.filter((m) => {\r\n                    return m.movieid == Kodi.NowPlaying.current.id\r\n                })[0];\r\n                if (movie) {\r\n                    this.currentContent = document.createElement(\"DIV\");\r\n                    this.element.appendChild(this.currentContent);\r\n\r\n                    var page = new BtPo.UI.Pages.MovieDetail(this.currentContent, { movie: movie });\r\n                }\r\n            });\r\n        }\r\n\r\n        showEpisode() {\r\n        }\r\n\r\n        showReactPlayList(items) {\r\n            var elt = document.createElement(\"DIV\");\r\n            this.element.appendChild(elt);\r\n            var playlistctrl = new BtPo.UI.ReactPlayListControl(elt);\r\n            this.currentContent = playlistctrl.element\r\n            playlistctrl.items = items;\r\n        }\r\n\r\n        showPlayList(items) {\r\n            var playlistctrl = new BtPo.UI.PlayListControl();\r\n            this.currentContent = playlistctrl.element\r\n            this.element.appendChild(this.currentContent);\r\n            playlistctrl.items = items;\r\n        }\r\n\r\n        closeCurrent() {\r\n            if (this.currentContent) {\r\n                $(this.currentContent).remove();\r\n                var control = this.currentContent.winControl;\r\n                if (control) {\r\n                    if (control.dispose) {\r\n                        control.dispose();\r\n                    }\r\n                }\r\n                this.currentContent = null;\r\n            }\r\n\r\n            return WinJS.Promise.wrap();\r\n        }\r\n\r\n        updateLayout() {\r\n            if (this.currentContent) {\r\n                var control = this.currentContent.winControl;\r\n                if (control) {\r\n                    if (control.updateLayout) {\r\n                        control.updateLayout();\r\n                        var layoutcontrols = this.currentContent.querySelectorAll(\".mcn-layout-ctrl\");\r\n                        for (var i = 0, l = layoutcontrols.length; i < l; i++) {\r\n                            var ctrl = <HTMLElement>layoutcontrols[i];\r\n                            if (ctrl.winControl && ctrl.winControl.updateLayout) {\r\n                                ctrl.winControl.updateLayout();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        dispose() {\r\n            this.eventTracker.dispose();\r\n        }\r\n    }\r\n\r\n    export var PlayingContent = WinJS.Class.mix(WinJS.Utilities.markSupportedForProcessing(PlayingContentControl), WinJS.Utilities.eventMixin,\r\n        WinJS.Utilities.createEventProperties(\"myevent\"));\r\n}"],"sourceRoot":" "}