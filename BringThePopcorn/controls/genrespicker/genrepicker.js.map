{"version":3,"sources":["genrepicker.ts"],"names":["BtPo","BtPo.UI","BtPo.UI.GenrePickerControl","BtPo.UI.GenrePickerControl.constructor","BtPo.UI.GenrePickerControl.render","BtPo.UI.GenrePickerControl.pickGenre","BtPo.UI.GenrePickerControl.renderGenres","BtPo.UI.GenrePickerControl.dispose","BtPo.UI.GenrePickerControl.hide"],"mappings":"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cA,CAACA,KAAKA,CAACA,CAACA;oBAC/BA,CAACA,CAACA,CAACA;oBACHA,KAAKA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBACdA,SAASA,CAACA,WAAWA,CAACA,CAACA,CAACA,CAACA;oBAEzBA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,UAACA,KAAKA;wBACtBA,IAAIA,CAACA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA,CAACA;wBACtCA,CAACA,CAACA,SAASA,GAAGA,OAAOA,CAACA;wBACtBA,CAACA,CAACA,KAAKA,CAACA,OAAOA,GAAGA,GAAGA,CAACA;wBACtBA,CAACA,CAACA,SAASA,GAAGA,KAAKA,CAACA,KAAKA,CAACA;wBAC1BA,YAAYA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EAAEA;4BACnBA,KAAIA,CAACA,cAAcA,CAACA,KAAKA,CAACA,CAACA;wBAC/BA,CAACA,CAACA,CAACA;wBACHA,KAAKA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;wBACdA,SAASA,CAACA,WAAWA,CAACA,CAACA,CAACA,CAACA;oBAC7BA,CAACA,CAACA,CAACA;oBACHA,IAAIA,CAACA,cAAcA,CAACA,WAAWA,CAACA,SAASA,CAACA,CAACA;oBAC3CA,KAAKA,CAACA,EAAEA,CAACA,SAASA,CAACA,SAASA,CAACA,KAAKA,CAACA,CAACA;gBACxCA,CAACA;YACLA,CAACA;YAEDJ,oCAAOA,GAAPA;gBACIK,KAAKA,CAACA,SAASA,CAACA,cAAcA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA;gBAC7CA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,CAACA;gBACpBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,CAACA,CAACA;oBACpBA,IAAIA,CAACA,YAAYA,CAACA,OAAOA,EAAEA,CAACA;gBAChCA,CAACA;YACLA,CAACA;YAEDL,iCAAIA,GAAJA;gBAAAM,iBAKCA;gBAJGA,MAAMA,CAACA,YAAYA,CAACA,EAAEA,CAACA,SAASA,CAACA,OAAOA,CAACA,IAAIA,CAACA,OAAOA,EAAEA,EAAEA,QAAQA,EAAGA,GAAGA,EAAEA,CAACA,CAACA,IAAIA,CAACA;oBAC5EA,CAACA,CAACA,KAAIA,CAACA,OAAOA,CAACA,CAACA,MAAMA,EAAEA,CAACA;oBACzBA,KAAIA,CAACA,OAAOA,EAAEA,CAACA;gBACnBA,CAACA,CAACA,CAACA;YACPA,CAACA;YACLN,yBAACA;QAADA,CAlGAD,AAkGCC,IAAAD;QAlGYA,qBAAkBA,qBAkG9BA,CAAAA;QAEUA,cAAWA,GAAGA,KAAKA,CAACA,KAAKA,CAACA,GAAGA,CAACA,kBAAkBA,EAAEA,KAAKA,CAACA,SAASA,CAACA,UAAUA,EACnFA,KAAKA,CAACA,SAASA,CAACA,qBAAqBA,CAACA,SAASA,CAACA,CAACA,CAACA;QAEtDA,cAAWA,CAACA,IAAIA,GAAGA,UAAUA,MAAMA,EAAEA,aAAaA;YAC9C,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;YACrC,IAAI,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;YAC5D,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;YACjC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;YAClE,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;YAC3E,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;gBAC5D,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBAC1E,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;oBACpB,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACrC,CAAC,CAAC,CAAC,IAAI,CAAC;oBACJ,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACP,CAAC,CAAAA;IACLA,CAACA,EAxHWD,EAAEA,GAAFA,OAAEA,KAAFA,OAAEA,QAwHbA;AAADA,CAACA,EAxHM,IAAI,KAAJ,IAAI,QAwHV","file":"BringThePopcorn/controls/genrespicker/genrepicker.js","sourcesContent":["module BtPo.UI {\r\n    export class GenrePickerControl {\r\n        element: HTMLElement;\r\n        eventTracker: WinJSContrib.UI.EventTracker;\r\n        itemsContainer: HTMLElement;\r\n        btnclose: HTMLElement;\r\n        genres: Kodi.API.Genre[];\r\n        selected: Kodi.API.Genre;\r\n        __pickComplete: any;\r\n        __pickError: any;\r\n\r\n        constructor(element?: HTMLElement, options?:any) {\r\n            this.element = element || document.createElement('DIV');\r\n            options = options || {};\r\n            this.element.winControl = this;\r\n            this.element.classList.add(\"genrepickerctrl\");\r\n            this.element.classList.add('win-disposable');\r\n            this.render();\r\n            this.eventTracker = new WinJSContrib.UI.EventTracker();\r\n            var nav = <any>WinJS.Navigation;\r\n            this.eventTracker.addEvent(nav, \"beforenavigate\", (arg) => {\r\n                this.__pickComplete();\r\n            });\r\n\r\n            WinJS.UI.setOptions(this, options);\r\n        }\r\n\r\n        render() {\r\n            if (!this.element)\r\n                return;\r\n\r\n            this.element.innerHTML = '<div class=\"btnclose\"><i class=\"btpo-close\"></i></div><div class=\"genre-items\"></div>';\r\n            this.itemsContainer = <HTMLElement>this.element.querySelector(\".genre-items\");\r\n            this.btnclose = <HTMLElement>this.element.querySelector(\".btnclose\");\r\n            WinJSContrib.UI.tap(this.btnclose, () => {\r\n                this.__pickComplete();\r\n            });\r\n        }\r\n\r\n        pickGenre(genres, selected) {\r\n            var p = new WinJS.Promise((complete, error) => {\r\n                this.__pickComplete = complete;\r\n                this.__pickError = error;\r\n            });\r\n            this.genres = genres;\r\n            this.selected = selected;\r\n            this.renderGenres();\r\n            return p;\r\n        }\r\n\r\n        renderGenres() {            \r\n            if (!this.itemsContainer)\r\n                return;\r\n\r\n            this.itemsContainer.innerHTML = \"\";\r\n            if (this.genres) {\r\n                var container = document.createDocumentFragment();\r\n                var items = [];\r\n\r\n                var e = document.createElement(\"DIV\");\r\n                e.className = \"genre genre-all\";\r\n                e.style.opacity = \"0\";\r\n                e.innerText = \"all\";\r\n                WinJSContrib.UI.tap(e, () => {\r\n                    this.__pickComplete(\"all\");\r\n                });\r\n                items.push(e);\r\n                container.appendChild(e);\r\n\r\n                this.genres.forEach((genre) => {\r\n                    var e = document.createElement(\"DIV\");\r\n                    e.className = \"genre\";\r\n                    e.style.opacity = \"0\";\r\n                    e.innerText = genre.label;\r\n                    WinJSContrib.UI.tap(e, () => {\r\n                        this.__pickComplete(genre);\r\n                    });\r\n                    items.push(e);\r\n                    container.appendChild(e);\r\n                });\r\n                this.itemsContainer.appendChild(container);\r\n                WinJS.UI.Animation.enterPage(items);\r\n            }\r\n        }\r\n\r\n        dispose() {\r\n            WinJS.Utilities.disposeSubTree(this.element);\r\n            this.element = null;\r\n            if (this.eventTracker) {\r\n                this.eventTracker.dispose();\r\n            }\r\n        }\r\n\r\n        hide() {\r\n            return WinJSContrib.UI.Animation.fadeOut(this.element, { duration : 100 }).then(() => {\r\n                $(this.element).remove();\r\n                this.dispose();\r\n            });\r\n        }\r\n    }\r\n\r\n    export var GenrePicker = WinJS.Class.mix(GenrePickerControl, WinJS.Utilities.eventMixin,\r\n        WinJS.Utilities.createEventProperties(\"myevent\"));\r\n\r\n    GenrePicker.pick = function (genres, selectedgenre) {\r\n        var ctrl = new BtPo.UI.GenrePicker();\r\n        var container = document.getElementById(\"pageshostwrapper\");\r\n        ctrl.element.style.opacity = '0';\r\n        container.appendChild(ctrl.element);\r\n        WinJSContrib.UI.Animation.fadeIn(ctrl.element, { duration: 200 });\r\n        WinJSContrib.UI.Application.navigator.pageControl.foWrapper.blurTo(20, 90);\r\n        return ctrl.pickGenre(genres, selectedgenre).then(function (data) {\r\n            WinJSContrib.UI.Application.navigator.pageControl.foWrapper.blurTo(0, 90);\r\n            return ctrl.hide().then(function () {\r\n                return WinJS.Promise.timeout(50);\r\n            }).then(function () {\r\n                return data;\r\n            });\r\n        });\r\n    }\r\n}"],"sourceRoot":" "}