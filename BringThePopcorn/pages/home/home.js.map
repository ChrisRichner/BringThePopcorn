{"version":3,"sources":["home.ts"],"names":["BtPo","BtPo.UI","BtPo.UI.Pages","BtPo.UI.Pages.HomePage","BtPo.UI.Pages.HomePage.constructor","BtPo.UI.Pages.HomePage.processed","BtPo.UI.Pages.HomePage.flipMovies","BtPo.UI.Pages.HomePage.flipTvshows","BtPo.UI.Pages.HomePage.loadMovies","BtPo.UI.Pages.HomePage.loadTvshows","BtPo.UI.Pages.HomePage.loadAlbums","BtPo.UI.Pages.HomePage.getSortFunction","BtPo.UI.Pages.HomePage.scanVideos","BtPo.UI.Pages.HomePage.cleanVideos","BtPo.UI.Pages.HomePage.moviesGenres","BtPo.UI.Pages.HomePage.tvshowsGenres","BtPo.UI.Pages.HomePage.albumsGenres","BtPo.UI.Pages.HomePage.unload"],"mappings":"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","file":"BringThePopcorn/pages/home/home.js","sourcesContent":["module BtPo.UI.Pages {\r\n                \r\n    export class HomePage {\r\n        public static url = \"/pages/home/home.html\";\r\n        element: HTMLElement;\r\n        eventTracker: WinJSContrib.UI.EventTracker;\r\n        flipviewtemplate: WinJS.Binding.Template;        \r\n        mainsplitview: WinJS.UI.FlipView<any>;\r\n        tvshowsflipview: WinJS.UI.FlipView<any>;\r\n        allowAutoFlip: boolean = true;\r\n        data: Kodi.Data.IMediaLibrary;\r\n        moviesbloc: HTMLElement;\r\n        tvshowsbloc: HTMLElement;\r\n        musicbloc: HTMLElement;\r\n        albumscontainer: HTMLElement;\r\n        \r\n        processed(element, options) {\r\n            var page = this;\r\n            //Kodi.API.introspect().then(function (api) {\r\n            //    Windows.Storage.ApplicationData.current.localFolder.createFileAsync(\"kodiapi.json\", Windows.Storage.CreationCollisionOption.replaceExisting).then(function (file) {\r\n            //        console.log(\"kodi api details at \" + file.path);\r\n            //        return Windows.Storage.FileIO.writeTextAsync(file, JSON.stringify(api));\r\n            //    });\r\n            //});        \r\n            var registerpointerdown = page.eventTracker.addEvent(page.element, \"pointerdown\", () => {\r\n                this.allowAutoFlip = false;\r\n                registerpointerdown();\r\n            }, true);\r\n\r\n            Kodi.Data.loadRootData().then((data) => {\r\n                page.data = data;\r\n                this.loadMovies(data);\r\n                this.loadTvshows(data);\r\n                this.loadAlbums(data);\r\n            });\r\n        }\r\n\r\n        flipMovies() {\r\n            if (this.allowAutoFlip) {\r\n                this.mainsplitview.itemDataSource.getCount().then((nbitems) => {\r\n                    if (this.mainsplitview.currentPage < nbitems-1) {\r\n                        this.mainsplitview.currentPage = this.mainsplitview.currentPage + 1;\r\n                    } else {\r\n                        this.mainsplitview.currentPage = 0;\r\n                    }\r\n                });\r\n                setTimeout(() => {\r\n                    this.flipMovies();\r\n                }, 7000);\r\n            }\r\n        }\r\n\r\n        flipTvshows() {\r\n            if (this.allowAutoFlip) {\r\n                this.tvshowsflipview.itemDataSource.getCount().then((nbitems) => {\r\n                    if (this.tvshowsflipview.currentPage < nbitems-1) {\r\n                        this.tvshowsflipview.currentPage = this.tvshowsflipview.currentPage + 1;\r\n                    } else {\r\n                        this.tvshowsflipview.currentPage = 0;\r\n                    }\r\n                });\r\n                setTimeout(() => {\r\n                    this.flipTvshows();\r\n                }, 7000);\r\n            }\r\n        }\r\n\r\n        loadMovies(data: Kodi.Data.IMediaLibrary) {\r\n            if (data.movies && data.movies.movies) {\r\n                this.flipviewtemplate = new WinJS.Binding.Template(null, { href: '/templates/moviesplitview.html', extractChild: true });\r\n                this.mainsplitview.itemTemplate = (itemPromise) => {\r\n                    return itemPromise.then((item) => {\r\n                        return this.flipviewtemplate.render(item.data).then((rendered) => {\r\n                            WinJSContrib.UI.tap(rendered, (elt) => {\r\n                                if (!this.element.classList.contains(\"inactive\")) {\r\n                                    WinJS.Navigation.navigate(\"/pages/movies/detail/moviesdetail.html\", { movie: item.data, navigateStacked: true });\r\n                                }\r\n                            }, { disableAnimation: true })\r\n                            return rendered;\r\n                        });\r\n                    })\r\n                }\r\n                var movies = {};\r\n                if (data.recentMovies && data.recentMovies.movies) {\r\n                    data.recentMovies.movies.forEach((e) => {\r\n                        if (!e.lastplayed) {\r\n                            movies[e.movieid] = true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                var movieslist = data.movies.movies.slice(0, data.movies.movies.length);\r\n                movieslist = movieslist.sort(this.getSortFunction(movies, \"movieid\"));\r\n\r\n                this.mainsplitview.itemDataSource = new WinJS.Binding.List(movieslist).dataSource;\r\n\r\n                setTimeout(() => {\r\n                    this.flipMovies();\r\n                }, 4000);\r\n            } else {\r\n                this.moviesbloc.style.display = \"none\";\r\n            }\r\n        }\r\n\r\n        loadTvshows(data: Kodi.Data.IMediaLibrary) {\r\n            if (data.tvshows && data.tvshows.tvshows) {\r\n                this.tvshowsflipview.itemTemplate = (itemPromise) => {\r\n                    return itemPromise.then((item) => {\r\n                        return this.flipviewtemplate.render(item.data).then((rendered) => {\r\n                            WinJSContrib.UI.tap(rendered, (elt) => {\r\n                                if (!this.element.classList.contains(\"inactive\")) {\r\n                                    WinJS.Navigation.navigate(\"/pages/tvshows/seriedetail/tvshowsseriedetail.html\", { tvshow: item.data, navigateStacked: true });\r\n                                }\r\n                            }, { disableAnimation: true })\r\n                            return rendered;\r\n                        });\r\n                    })\r\n                }\r\n\r\n                var tvshows = {};\r\n                data.tvshowRecentEpisodes.episodes.forEach((e) => {\r\n                    if (!e.lastplayed && !tvshows[e.tvshowid]) {\r\n                        tvshows[e.tvshowid] = true;\r\n                    }\r\n                });\r\n                \r\n                var tvshowslist = data.tvshows.tvshows.slice(0, data.tvshows.tvshows.length);\r\n                tvshowslist = tvshowslist.sort(this.getSortFunction(tvshows, \"tvshowid\"));\r\n\r\n                this.tvshowsflipview.itemDataSource = new WinJS.Binding.List(tvshowslist).dataSource;\r\n                setTimeout(() => {\r\n                    this.flipTvshows();\r\n                }, 5000);\r\n            } else {\r\n                this.tvshowsbloc.style.display = \"none\";\r\n            }\r\n        }\r\n\r\n        loadAlbums(data: Kodi.Data.IMediaLibrary) {\r\n            if (data.music && data.music.albums) {\r\n\r\n                var container = document.createDocumentFragment();\r\n                var p = [];\r\n                data.recentMusic.albums.slice(0, 12).forEach((a) => {\r\n                    p.push(BtPo.Templates.album.render(a).then((rendered) => {\r\n                        container.appendChild(rendered);\r\n                        WinJSContrib.UI.tap(rendered, function () {\r\n                            WinJS.Navigation.navigate(\"/pages/albums/detail/albumsdetail.html\", { album: a, navigateStacked: true });\r\n                        });\r\n                    }));\r\n                });\r\n\r\n                WinJS.Promise.join(p).then(() => {\r\n                    this.albumscontainer.appendChild(container);\r\n                });\r\n            } else {\r\n                this.musicbloc.style.display = \"none\";\r\n            }\r\n        }\r\n\r\n        getSortFunction(catalog, fieldname) {\r\n            var calcpoints = function (item) {\r\n                var p = item.rating;\r\n\r\n                if (catalog[item[fieldname]])\r\n                    p += 10000;\r\n\r\n                if (!item.lastplayed)\r\n                    p += 5000;\r\n\r\n                return p;\r\n            }\r\n\r\n            return function (a, b) {\r\n                var aPoints = calcpoints(a);\r\n                var bPoints = calcpoints(b);\r\n                if (aPoints > bPoints)\r\n                    return -1;\r\n                if (aPoints < bPoints)\r\n                    return 1;\r\n\r\n                if (a.lastplayed < b.lastplayed) {\r\n                    return -1\r\n                } else if (a.lastplayed > b.lastplayed) {\r\n                    return 1;\r\n                }\r\n\r\n                if (a.playcount < b.playcount) {\r\n                    return -1\r\n                } else if (a.playcount > b.playcount) {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        scanVideos() {\r\n            Kodi.API.Videos.Movies.scan();\r\n        }\r\n\r\n        cleanVideos() {\r\n            Kodi.API.Videos.Movies.clean();\r\n        }\r\n\r\n        moviesGenres() {\r\n            if (this.data && this.data.movieGenres && this.data.movieGenres.genres) {\r\n                BtPo.UI.GenrePicker.pick(this.data.movieGenres.genres).then(function (genre) {\r\n                    if (genre) {\r\n                        if (genre === \"all\") {\r\n                            WinJS.Navigation.navigate(\"/pages/movies/list/movieslist.html\");\r\n                        } else {\r\n                            WinJS.Navigation.navigate(\"/pages/movies/list/movieslist.html\", { genre: genre.label });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        tvshowsGenres() {\r\n            if (this.data && this.data.tvshowGenres && this.data.tvshowGenres.genres) {\r\n                BtPo.UI.GenrePicker.pick(this.data.tvshowGenres.genres).then(function (genre) {\r\n                    if (genre) {\r\n                        if (genre === \"all\") {\r\n                            WinJS.Navigation.navigate(\"/pages/tvshows/list/tvshowslist.html\");\r\n                        } else {\r\n                            WinJS.Navigation.navigate(\"/pages/tvshows/list/tvshowslist.html\", { genre: genre.label });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        albumsGenres() {\r\n            if (this.data && this.data.tvshowGenres && this.data.tvshowGenres.genres) {\r\n                BtPo.UI.GenrePicker.pick(this.data.musicGenres.genres).then(function (genre) {\r\n                    if (genre) {\r\n                        if (genre === \"all\") {\r\n                            WinJS.Navigation.navigate(\"/pages/albums/list/albumslist.html\");\r\n                        } else {\r\n                            WinJS.Navigation.navigate(\"/pages/albums/list/albumslist.html\", { genre: genre.label });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        unload() {\r\n            this.allowAutoFlip = false;\r\n        }\r\n    }\r\n\r\n    WinJS.UI.Pages.define(HomePage.url, HomePage);\r\n}\r\n"],"sourceRoot":" "}