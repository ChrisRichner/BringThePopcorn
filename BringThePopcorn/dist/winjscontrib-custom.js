var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},WinJSContrib.UI.WebComponents=WinJSContrib.UI.WebComponents||{},function(e){"use strict";function n(e){var t=null,i=e.nodeName,r=[];if("#text"!==e.nodeName){if(e.attributes){var i=e.getAttribute("is");i&&(t=s[i.toUpperCase()])}if(t||"DIV"===e.nodeName||"SPAN"===e.nodeName||(t=s[e.nodeName]),t&&!e.mcnComponent&&r.push(o(e,t)),e.msParentSelectorScope&&e.winControl&&e.winControl.pageLifeCycle&&e.winControl.pageLifeCycle.observer)return;for(var a=0,p=e.childNodes.length;p>a;a++)r.push(n(e.childNodes[a]))}return WinJS.Promise.join(r)}function t(e){var t=null;return WinJSContrib.UI.WebComponents.polyfill&&(t=new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes.length)for(var t=0,o=e.addedNodes.length;o>t;t++)n(e.addedNodes[t])})}),t.observe(e,{childList:!0,subtree:!0})),t}function o(e,n){e.winControl;e.mcnComponent=!0;var t=WinJSContrib.Utils.getScopeControl(e),o=WinJS.Promise.wrap(),r=function(){i(n.ctor,e)};t&&t.pageLifeCycle?o=t.pageLifeCycle.steps.render.attach(r):r();var a=e.setAttribute;return e.setAttribute=function(n,t){if(e.winControl){a.call(this,n,t);var o=e.winControl.constructor.mcnWebComponent;if(o){var i=o[n.toUpperCase()];if(i){var r={control:e.winControl,name:i.property,data:{}};o.applyAttribute(n,this,r)}}}},o}function i(e,n){n.mcnComponent=!0;var t=e.mcnWebComponent,o={};n.dataset.winOptions&&(o=a(n)),t&&t.optionsCallback&&(o=t.optionsCallback(n,o,scope));var i=new e(n,o);n.winControl=i,t&&t.applyAll(n)}function r(e,n,t){if("function"!=typeof t&&(t=t||{},n.mcnWebComponent={name:e,map:t.map||{},optionsCallback:t.optionsCallback,applyAll:function(e){var n={};for(var t in this.map){var o={control:e.winControl,name:this.map[t].property,data:n};this.applyAttribute(t,e,null,o)}},applyAttribute:function(e,n,t,o){var i=this.map[e.toUpperCase()];if(i){var r=t||n.getAttribute(i.attribute),a=n.winControl;if(r&&a)if(i.type&&"property"!==i.type)"event"===i.type&&WinJSContrib.Utils.resolveValue(n,r,o);else{if(i.resolve)return void WinJSContrib.Utils.applyValue(n,r,a,i.property,o);WinJSContrib.Utils.writeProperty(a,i.property,r)}}}},t.properties&&t.properties.forEach(function(e){e&&(n.mcnWebComponent.map[e.toUpperCase()]={attribute:e,property:e,resolve:!0,type:"property"})}),t.events&&t.events.forEach(function(e){e&&(n.mcnWebComponent.map[e.toUpperCase()]={attribute:e,property:e,resolve:!0,type:"event"})}),t.controls))for(var o in t.controls){var i=t.controls[o],r=i.mcnWebComponent;for(var a in r.map){var s=o+"."+a,p=r.map[a];n.mcnWebComponent.map[s.toUpperCase()]={attribute:o+"."+p.attribute,property:o+"."+p.property,resolve:p.resolve}}}}function a(e){return WinJS.UI.optionsParser(e.dataset.winOptions,window,{select:WinJS.Utilities.markSupportedForProcessing(function(n){var t=WinJSContrib.Utils.getScopeControl(e);return t?t.element.querySelector(n):document.querySelector(n)})})}var s={};WinJSContrib.UI.WebComponents.registered=s,WinJSContrib.UI.WebComponents.polyfill=!1,!e.document.registerElement&&e.MutationObserver&&(WinJSContrib.UI.WebComponents.polyfill=!0),WinJSContrib.UI.WebComponents.processAll=function(e){},WinJSContrib.UI.WebComponents.polyfill&&(WinJSContrib.UI.WebComponents.processAll=n),WinJSContrib.UI.WebComponents.watch=t,WinJSContrib.UI.WebComponents.register=function(n,t,o,a){var p=s[n.toUpperCase()];if(p&&!a)throw"component "+n+" already exists";if(r(n,t,o),WinJSContrib.UI.WebComponents.polyfill)e.document.createElement(n),s[n.toUpperCase()]={ctor:t};else if(e.document.registerElement){var l=Object.create(HTMLElement.prototype);l.createdCallback=function(){},l.attachedCallback=function(){var e=this,n=WinJSContrib.Utils.getScopeControl(e),o=function(){i(t,e)};n&&n.pageLifeCycle?n.pageLifeCycle.steps.render.attach(o):o()},l.attributeChangedCallback=function(e,n,t){var o=this;if(o.winControl){var i=o.winControl.constructor.mcnWebComponent;if(i){var r=i.map[e.toUpperCase()];r&&i.applyAttribute(e,o,t,{control:o.winControl,name:r.property,data:{}})}}},e.document.registerElement(n,{prototype:l})}},WinJS.Binding&&WinJS.Binding.Template&&WinJSContrib.UI.WebComponents.register("win-template",WinJS.Binding.Template,{properties:["extractChild"]}),WinJS.UI&&WinJS.UI.AppBar&&WinJSContrib.UI.WebComponents.register("win-appbar",WinJS.UI.AppBar,{properties:["closedDisplayMode","disabled","hidden","layout","placement","sticky","commands","onafterhide","onaftershow","onbeforehide","onbeforeshow"],events:["afterhide","aftershow","beforehide","beforeshow"]}),WinJS.UI&&WinJS.UI.AutoSuggestBox&&WinJSContrib.UI.WebComponents.register("win-autosuggestbox",WinJS.UI.AutoSuggestBox,{properties:["chooseSuggestionOnEnter","disabled","onquerychanged","onquerysubmitted","onresultsuggestionchosen","onsuggestionsrequested","placeholderText","queryText","searchHistoryContext","searchHistoryDisabled"],events:["querychanged","querysubmitted","resultsuggestionchosen","suggestionsrequested"]}),WinJS.UI&&WinJS.UI.BackButton&&WinJSContrib.UI.WebComponents.register("win-backbutton",WinJS.UI.BackButton),WinJS.UI&&WinJS.UI.ContentDialog&&WinJSContrib.UI.WebComponents.register("win-contentdialog",WinJS.UI.ContentDialog,{properties:["hidden","primaryCommandDisabled","primaryCommandText","secondaryCommandDisabled","secondaryCommandText","title","onafterhide","onaftershow","onbeforehide","onbeforeshow"],events:["afterhide","aftershow","beforehide","beforeshow"]}),WinJS.UI&&WinJS.UI.DatePicker&&WinJSContrib.UI.WebComponents.register("win-datepicker",WinJS.UI.DatePicker,{properties:["calendar","datePattern","disabled","maxYear","minYear","monthPattern","yearPattern","onchange","current"],events:["change"]}),WinJS.UI&&WinJS.UI.FlipView&&WinJSContrib.UI.WebComponents.register("win-flipview",WinJS.UI.FlipView,{properties:["currentPage","orientation","itemTemplate","itemDataSource","itemSpacing","ondatasourcecountchanged","onpagevisibilitychanged","onpageselected","onpagecompleted"],events:["datasourcecountchanged","pagevisibilitychanged","pageselected","pagecompleted"]}),WinJS.UI&&WinJS.UI.Flyout&&WinJSContrib.UI.WebComponents.register("win-flyout",WinJS.UI.Flyout,{properties:["alignment","anchor","disabled","hidden","placement","onafterhide","onaftershow","onbeforehide","onbeforeshow"],events:["afterhide","aftershow","beforehide","beforeshow"]}),WinJS.UI&&WinJS.UI.Hub&&WinJSContrib.UI.WebComponents.register("win-hub",WinJS.UI.Hub,{properties:["headerTemplate","indexOfFirstVisible","indexOfLastVisible","loadingState","oncontentanimating","onheaderinvoked","onloadingstatechanged","orientation","scrollPosition","sectionOnScreen","sections","zoomableView"],events:["contentanimating","headerinvoked","loadingstatechanged"]}),WinJS.UI&&WinJS.UI.HubSection&&WinJSContrib.UI.WebComponents.register("win-hubsection",WinJS.UI.HubSection,{properties:["contentElement","header","isHeaderStatic"]}),WinJS.UI&&WinJS.UI.ItemContainer&&WinJSContrib.UI.WebComponents.register("win-itemcontainer",WinJS.UI.ItemContainer,{properties:["draggable","oninvoked","onselectionchanged","onselectionchanging","selected","selectionDisabled","swipeBehavior","swipeOrientation","tapBehavior"],events:["invoked","selectionchanged","selectionchanging"]}),WinJS.UI&&WinJS.UI.ListView&&WinJSContrib.UI.WebComponents.register("win-listview",WinJS.UI.ListView,{properties:["itemTemplate","itemDataSource","itemsDraggable","itemsReorderable","oniteminvoked","groupHeaderTemplate","groupDataSource","swipeBehavior","selectBehavior","tapBehavior","header","footer"],events:["iteminvoked"]}),WinJS.UI&&WinJS.UI.Menu&&WinJSContrib.UI.WebComponents.register("win-menu",WinJS.UI.Menu,{properties:["alignment","anchor","commands","disabled","hidden","placement","onafterhide","onaftershow","onbeforehide","onbeforeshow"],events:["afterhide","aftershow","beforehide","beforeshow"]}),WinJS.UI&&WinJS.UI.Pivot&&WinJSContrib.UI.WebComponents.register("win-pivot",WinJS.UI.Pivot,{properties:["items","locked","onitemanimationend","onitemanimationstart","onselectionchanged","selectedIndex","selectedItem","title"],events:["itemanimationend","itemanimationstart","selectionchanged"]}),WinJS.UI&&WinJS.UI.PivotItem&&WinJSContrib.UI.WebComponents.register("win-pivotitem",WinJS.UI.PivotItem,{properties:["contentElement","header"]}),WinJS.UI&&WinJS.UI.Rating&&WinJSContrib.UI.WebComponents.register("win-rating",WinJS.UI.Rating,{properties:["averageRating","disabled","enableClear","maxRating","oncancel","onchange","onpreviewchange","tooltipStrings","userRating"],events:["cancel","change","previewchange"]}),WinJS.UI&&WinJS.UI.Repeater&&WinJSContrib.UI.WebComponents.register("win-repeater",WinJS.UI.Repeater,{properties:["data","length","onitemchanged","onitemchanging","oniteminserted","oniteminserting","onitemmoved","onitemmoving","onitemremoved","onitemremoving","onitemsloaded","onitemsreloaded","onitemsreloading","template"],events:["itemchanged","itemchanging","iteminserted","iteminserting","itemmoved","itemmoving","itemremoved","itemremoving","itemsloaded","itemsreloaded","itemsreloading"]}),WinJS.UI&&WinJS.UI.SearchBox&&WinJSContrib.UI.WebComponents.register("win-searchbox",WinJS.UI.SearchBox,{properties:["chooseSuggestionOnEnter","disabled","focusOnKeyboardInput","onquerychanged","onquerysubmitted","onresultsuggestionchosen","onsuggestionsrequested","placeholderText","queryText","searchHistoryContext","searchHistoryDisabled"],events:["querychanged","querysubmitted","resultsuggestionchosen","suggestionsrequested"]}),WinJS.UI&&WinJS.UI.SemanticZoom&&WinJSContrib.UI.WebComponents.register("win-semanticzoom",WinJS.UI.SemanticZoom,{properties:["enableButton","locked","onzoomchanged","zoomedInItem","zoomedOut","zoomedOutItem","zoomFactor"],events:["zoomchanged"]}),WinJS.UI&&WinJS.UI.SplitView&&WinJSContrib.UI.WebComponents.register("win-splitview",WinJS.UI.SplitView,{properties:["contentElement","hiddenDisplayMode","paneElement","paneHidden","panePlacement","shownDisplayMode","onafterhide","onaftershow","onbeforehide","onbeforeshow"],events:["afterhide","aftershow","beforehide","beforeshow"]}),WinJS.UI&&WinJS.UI.TimePicker&&WinJSContrib.UI.WebComponents.register("win-timepicker",WinJS.UI.TimePicker,{properties:["onchange","clock","current","disabled","hourPattern","minuteIncrement","minutePattern","periodPattern"],events:["onchange"]}),WinJS.UI&&WinJS.UI.ToggleSwitch&&WinJSContrib.UI.WebComponents.register("win-toggleswitch",WinJS.UI.ToggleSwitch,{properties:["onchange","checked","disabled","labelOff","labelOn","title"],events:["onchange"]}),WinJS.UI&&WinJS.UI.ToolBar&&WinJSContrib.UI.WebComponents.register("win-toolbar",WinJS.UI.ToolBar),WinJS.UI&&WinJS.UI.Tooltip&&WinJSContrib.UI.WebComponents.register("win-tooltip",WinJS.UI.Tooltip,{properties:["contentElement","extraClass","infotip","innerHTML","onbeforeclose","onbeforeopen","onclosed","onopened","placement"],events:["beforeclose","beforeopen","closed","opened"]}),WinJS.UI&&WinJS.UI.ViewBox&&WinJSContrib.UI.WebComponents.register("win-viewbox",WinJS.UI.ViewBox)}(this);
var WinJSContrib;!function(t){var n;!function(n){function e(t){if(t.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.protocol&&t.detail.uri){var n={action:void 0},e={},i=t.detail.uri.query;return"?"==i[0]&&(i=i.substr(1)),i&&i.split("&").forEach(function(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}),n.protocol={action:t.detail.uri.host,args:e},n}}function i(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var e=n.getNetworkConnectivityLevel();return e===t.constrainedInternetAccess||e===t.internetAccess}return!1}function o(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var e=n.getNetworkConnectivityLevel();return e===t.internetAccess}return!1}function a(n){var e=function(e){n(t.WinRT.hasInternetAccess())},i=Windows.Networking.Connectivity.NetworkInformation;return i.addEventListener("networkstatuschanged",e),function(){i.removeEventListener("networkstatuschanged",e)}}n.readProtocol=e,n.isConnected=i,n.hasInternetAccess=o,n.onInternetStatusChanged=a}(n=t.WinRT||(t.WinRT={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(t){var n;!function(n){function e(t){var n=window;if(t){if(n.Windows){var e=new Windows.UI.Popups.MessageDialog(t.content);return t.title&&(e.title=t.title),t.commands&&t.commands.forEach&&t.commands.forEach(function(t,n){var i=new Windows.UI.Popups.UICommand;t.id&&(i.id=t.id),i.label=t.label,t.callback&&(i.invoked=t.callback),e.commands.append(i),t.isDefault&&(e.defaultCommandIndex=n)}),e.showAsync()}return new WinJS.Promise(function(e,i){var o="";t.title&&(o=t.title);var a=[];t.commands&&t.commands.forEach?t.commands.forEach(function(t,n){a.push(t.label)}):a=["Ok"],n.navigator&&n.navigator.notification&&n.navigator.notification.confirm?n.navigator.notification.confirm(t.content,function(n){if(t.commands&&t.commands[n-1]&&t.commands[n-1].callback){var i=t.commands[n-1].callback();i&&i.then?i.then(function(){e(!0)}):e(!0)}else e(0!=n?!0:!1)},o,a):e(window.confirm(o)?!0:!1)})}return WinJS.Promise.wrapError("you must specify commands as an array of objects with properties text and callback such as {text: '', callback: function(c){}}")}function i(n,e){return t.Alerts.messageBox({title:n,content:e})}function o(n,e,i,o){return new WinJS.Promise(function(a,r){t.Alerts.messageBox({title:n,content:e,commands:[{label:i,callback:function(t){a(!0)},isDefault:!0},{label:o,callback:function(t){a(!1)}}]})})}function a(t){if(!Windows)throw"No notification plugin found";var n=Windows.UI.Notifications,e=t.template||(t.picture?n.ToastTemplateType.toastImageAndText01:n.ToastTemplateType.toastText01),i=n.ToastNotificationManager.getTemplateContent(e),o=i.getElementsByTagName("text"),a=i.getElementsByTagName("image");if(t.launch){var r=i.getElementsByTagName("toast");r[0].setAttribute("launch",JSON.stringify(t.launch))}o[0].appendChild(i.createTextNode(t.text)),t.text2&&o.length>1&&o[1].appendChild(i.createTextNode(t.text2)),t.text3&&o.length>1&&o[2].appendChild(i.createTextNode(t.text3)),t.picture&&a[0].setAttribute("src",t.picture);var c=new n.ToastNotification(i),s=n.ToastNotificationManager.createToastNotifier();s.show(c)}function r(n,e){t.Alerts.toastNotification({text:n,picture:e})}n.messageBox=e,n.message=i,n.confirm=o,n.toastNotification=a,n.toast=r}(n=t.Alerts||(t.Alerts={}))}(WinJSContrib||(WinJSContrib={}));
var WinJSContrib=WinJSContrib||{};WinJSContrib.UPnP=WinJSContrib.UPnP||{},function(e){function t(e,t){return e.indexOf(t)==e.length-t.length}function n(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var i=e.attributes.item(r);t["@attributes"][i.nodeName]=i.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes()){for(var s=0,o=0;o<e.childNodes.length;o++){var a=e.childNodes.item(o),u=a.nodeName;if("undefined"==typeof t[u]){var p=n(a),c=u.indexOf(":");if(c>0)var l=u.substr(c+1,u.length-c-1);l&&!t[l]?t[l]=p:t[u]=p,s++}else{if("undefined"==typeof t[u].push){var y=t[u];t[u]=[],t[u].push(y)}t[u].push(n(a)),s++}}t["#text"]&&"string"==typeof t["#text"]&&(t["#text"]=t["#text"].trim()),1==s&&t["#text"]&&"string"==typeof t["#text"]&&(t=t["#text"])}for(var h in t["@attributes"])t[h]||(t[h]=t["@attributes"][h]);return t}function r(e){return(new DOMParser).parseFromString(e,"text/xml")}function i(e){for(var t="",n=!0,r=32;r>0;){r-=4;var i=e>>r&15;n&&0==i||(n=!1,t+=S[i])}return""==t?"0":t}function s(e,t,n){for(var r=e,i=e.length;t>i;i++)r=n+r;return r}function o(e){return e=e.toString(16),1==e.length&&(e="0"+e),e="%"+e,unescape(e)}function a(e){e=e.toUpperCase().replace(new RegExp("s/[^0-9A-Z]//g"));for(var t="",n="",r=0;r<e.length;r++)n+=e.charAt(r),2==n.length&&(t+=o(parseInt(n,16)),n="");return t}function u(e){for(var t="",n=0;n<e.length;n++)t+=s(i(255&e.charCodeAt(n)),2,"0");return t}function p(e){return e.replace(/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/,function(e,t,n,r,i){var s=0>+i,o=n.length+ +i,e=(s?n:r).length,i=(i=Math.abs(i))>=e?i-e+s:0,a=new Array(i+1).join("0"),u=n+r;return(t||"")+(s?u=a+u:u+=a).substr(0,o+=s?a.length:0)+(o<u.length?"."+u.substr(o):"")})}WinJSContrib.UPnP.deviceTypes={ContentDirectory1:"urn:schemas-upnp-org:service:ContentDirectory:1",ContentDirectory2:"urn:schemas-upnp-org:service:ContentDirectory:2",ContentDirectory3:"urn:schemas-upnp-org:service:ContentDirectory:3",ContentDirectory4:"urn:schemas-upnp-org:service:ContentDirectory:4",MediaRenderer1:"urn:schemas-upnp-org:device:MediaRenderer:1",MediaRenderer2:"urn:schemas-upnp-org:device:MediaRenderer:2",MediaRenderer3:"urn:schemas-upnp-org:device:MediaRenderer:3",MediaRenderer4:"urn:schemas-upnp-org:device:MediaRenderer:4",MediaServer1:"urn:schemas-upnp-org:device:MediaServer:1",MediaServer2:"urn:schemas-upnp-org:device:MediaServer:2",MediaServer3:"urn:schemas-upnp-org:device:MediaServer:3",MediaServer4:"urn:schemas-upnp-org:device:MediaServer:4",AVTransport1:"urn:schemas-upnp-org:service:AVTransport:1",AVTransport2:"urn:schemas-upnp-org:service:AVTransport:2",ConnectionManager1:"urn:schemas-upnp-org:service:ConnectionManager:1",ConnectionManager2:"urn:schemas-upnp-org:service:ConnectionManager:2",ConnectionManager3:"urn:schemas-upnp-org:service:ConnectionManager:3"},WinJSContrib.UPnP.devicesDiscovery=function(e,t,r){function i(e){var t=u.filter(function(t){return e==t.deviceDescriptionUrl});return t.length>0}function s(e){return new WinJS.Promise(function(s,a){function p(e){try{l&&l.close()}catch(t){}s(u)}function c(e){try{l&&l.close()}catch(t){}a(e)}var l=new Windows.Networking.Sockets.DatagramSocket;l.onmessagereceived=function(e){var r=e.getDataReader(),s=r.unconsumedBufferLength,o=r.readString(s),a=!1;if(o){var p=o.split("\n");p.forEach(function(e){if(!a&&0==e.toLowerCase().indexOf("location:")){var r=e.substr(9,e.length-9);a=!0,i(r)||WinJS.xhr({url:r}).then(function(e){var s=n(e.responseXML),o=s.root.device;o.deviceDescriptionUrl=r,o.rootUrl=r.substr(0,r.indexOf("/",8)),i(r)||u.push(new WinJSContrib.UPnP.UPnPDevice(o)),t&&t(o,r)},function(e){console.error("calling device failed"),console.error(e)})}})}},l.getOutputStreamAsync(o,"1900").then(function(t){var n="M-SEARCH * HTTP/1.1\r\nHOST: 239.255.255.250:1900\r\nST:"+(e||"upnp:rootdevice")+'\r\nMAN:"ssdp:discover"\r\nMX:3\r\n\r\n',r=new Windows.Storage.Streams.DataWriter(t);return r.unicodeEncoding=Windows.Storage.Streams.UnicodeEncoding.Utf8,r.writeString(n),r.storeAsync()}).then(function(){return WinJS.Promise.timeout(r||2e4)}).then(p,c)}).then(function(e){p.hasError=!1},function(e){p.hasError=!0,p.error=e})}var o;try{o=new Windows.Networking.HostName("239.255.255.250")}catch(a){return void error({message:"Invalid host name."})}var u=new WinJS.Binding.List,p={devices:u,hasError:null,promise:null},c=[];if(e&&"string"!=typeof e){if(e&&"string"!=typeof e&&e.length)for(var l=0;l<e.length;l++)c.push(s(e[l]))}else c.push(s(e));return p.promise=WinJS.Promise.join(c),p},WinJSContrib.UPnP.getContentType=function(e,n){var r=e.toLowerCase();return"mp3"==n||t(r,".mp3")?"audio/mp3":"mp4"==n||t(r,".mp4")?"video/mp4":"avi"==n||t(r,".avi")?"video/avi":"mkv"==n||t(r,".mkv")?"video/x-matroska":void 0},WinJSContrib.UPnP.UPnPDevice=function(e){for(var t in e)this[t]=e[t]},WinJSContrib.UPnP.UPnPDevice.prototype.getService=function(e){var t=this,n=null;return"string"==typeof e&&(e=[e]),t.serviceList&&t.serviceList.service&&(n=t.serviceList.service.filter(function(t){return e.indexOf(t.serviceType)>=0})[0],!n&&t.deviceList&&t.deviceList.device.forEach(function(t){var r=t.serviceList.service.filter(function(t){return e.indexOf(t.serviceType)>=0})[0];r&&(n=r)})),n&&(n.rootUrl=t.rootUrl,n.url=t.rootUrl+n.controlURL),n},WinJSContrib.UPnP.UPnPDevice.prototype.getAVTransport=function(){var e=this.getService([WinJSContrib.UPnP.deviceTypes.AVTransport1,WinJSContrib.UPnP.deviceTypes.AVTransport2]);return e?new WinJSContrib.UPnP.UPnPAVTransport(e):void 0},WinJSContrib.UPnP.UPnPDevice.prototype.getContentDirectory=function(){var e=this.getService([WinJSContrib.UPnP.deviceTypes.ContentDirectory1,WinJSContrib.UPnP.deviceTypes.ContentDirectory2,WinJSContrib.UPnP.deviceTypes.ContentDirectory3,WinJSContrib.UPnP.deviceTypes.ContentDirectory4]);return e?new WinJSContrib.UPnP.UPnPContentDirectory(e):void 0},WinJSContrib.UPnP.UPnPDevice.prototype.getConnectionManager=function(){var e=this.getService([WinJSContrib.UPnP.deviceTypes.ConnectionManager1,WinJSContrib.UPnP.deviceTypes.ConnectionManager2,WinJSContrib.UPnP.deviceTypes.ConnectionManager3]);return e?new WinJSContrib.UPnP.UPnPConnectionManager(e):void 0},WinJSContrib.UPnP.UPnPService=function(e,t){this.options=t||{debug:!1},this.svc=e,this.action=function(){},this.svcType=this.svc.serviceType,this.svcUrl=this.svc.url;var n=this;this.action=function(e,t,r){return new WinJS.Promise(function(i,s){r||"[object Function]"!=Object.prototype.toString.call(t)||(r=t,t={}),r&&"[object Function]"===Object.prototype.toString.call(r)||(r=function(e,t){});var o=n.createRequest(n.svcType,e,t);n.sendRequest(n.svcType,e,n.svcUrl,o,function(o,a){return null!==o?(r.apply(n,[o,null]),void s(o)):void n.handleResponse(e,a.responseXML||"",t,function(e,t){r.apply(n,[e,t]),null!==e?s(e):i(t)})})})}},WinJSContrib.UPnP.UPnPService.prototype.constructor=WinJSContrib.UPnP.UPnPService,WinJSContrib.UPnP.UPnPService.prototype.requestTemplate='<?xml version="1.0" encoding="utf-8"?>\n<s:Envelope s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">\n	<s:Body>\n		<u:{ACTION_NAME} xmlns:u="{ACTION_TYPE}">\n{ACTION_VARS}		</u:{ACTION_NAME}>\n	</s:Body>\n</s:Envelope>\n',WinJSContrib.UPnP.UPnPService.prototype.types={i1:function(e,t,n){var r=new Int8Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},i2:function(e,t,n){var r=new Int16Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},i4:function(e,t,n){var r=new Int32Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},ui1:function(e,t,n){var r=new Uint8Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},ui2:function(e,t,n){var r=new Uint16Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},ui4:function(e,t,n){var r=new Uint32Array(1);return r[0]=e,WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t)},"int":function(e,t,n){return void 0===e||null===e||isNaN(e)?e=0:"number"!=typeof e&&(e=e===!0?1:parseInt(e+"",10)),n||(e=p(e+"")),isNaN(e)&&(e=0),WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t)},r4:function(e,t,n){var r=new Float32Array(1);return r[0]=e,n?WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t):r[0]?p(r[0]+""):"0"},r8:function(e,t,n){var r=new Float64Array(1);return r[0]=e,n?WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r[0],t):r[0]?p(r[0]+""):"0"},number:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.r8(e,t,n)},fixed_14_4:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types["float"](e,t,n)},"float":function(e,t,n){var r=parseFloat(e);return n?WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(r,t):r?p(r+""):"0"},"char":function(e,t,n){return e=void 0===e||null===e||""===e||e+""=="NaN"||e instanceof RegExp?"":e===!1||e===!0||"true"==e||"yes"==e||"false"==e||"no"==e?e===!0||"true"==e||"yes"==e?"1":"0":e.toString(),e.length>0?(e=WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t),e.charAt(0)):e},string:function(e,t,n){return(void 0===e||null===e||""===e||e+""=="NaN"||e instanceof RegExp)&&(e=""),e+="",e=WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t)},xmlObj:function(e,t,i){(void 0===e||null===e||""===e||e+""=="NaN"||e instanceof RegExp)&&(e=""),e+="",e=WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t);try{for(var s=e.indexOf("&");s>0;){var o=e.indexOf(";",s);(0>o||o-s>5)&&(e=e.substr(0,s)+"&amp;"+e.substr(s+1,e.length-(s+1))),s=e.indexOf("&",s+1)}var a=r(e);return n(a)}catch(u){return console.error(u),e}},date:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.dateTime(e,t,n)},dateTime:function(e,t,n){return n?"[object String]"==Object.prototype.toString.call(e)?(e=new Date(b(e)),isNaN(e)&&(e="")):"[object Date]"==Object.prototype.toString.call(e)&&(e=e):"[object String]"==Object.prototype.toString.call(e)?e+="":"[object Date]"==Object.prototype.toString.call(e)&&(e="Invalid Date"==e.toString()?"":e.toISOString()),e=WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t)},dateTime_tz:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.dateTime(e,t,n)},time:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.dateTime(e,t,n)},time_tz:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.dateTime(e,t,n)},"boolean":function(e,t,n){return e="false"==e||"f"==e||"no"==e||"n"==e||e instanceof RegExp||0>=e||!e?n?!1:"0":n?!0:"1"},bin_base64:function(e,t,n){return(void 0===e||null===e||""===e||e+""=="NaN"||e instanceof RegExp)&&(e=""),(e===!0||e===!1)&&(e=e===!0?"1":"0"),e=n?g(e+""):P(e+""),WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t)},bin_hex:function(e,t,n){return(void 0===e||null===e||""===e||e+""=="NaN"||e instanceof RegExp)&&(e=""),(e===!0||e===!1)&&(e=e===!0?"1":"0"),e=n?a(e+""):u(e+""),WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(e,t)},uri:function(e,t,n){return n&&(e=decodeURI(e+"")),WinJSContrib.UPnP.UPnPService.prototype.types.string(e,t)},uuid:function(e,t,n){return WinJSContrib.UPnP.UPnPService.prototype.types.string(e,t)}};for(var c in WinJSContrib.UPnP.UPnPService.prototype.types)WinJSContrib.UPnP.UPnPService.prototype.types[c]._name=c,WinJSContrib.UPnP.UPnPService.prototype.types[c].toString=function(){return this._name};WinJSContrib.UPnP.UPnPService.prototype.createRequest=function(e,t,n){n=this.formatParameters(n),this.debugLog("Creating UPnP XML Control Message for ["+t+"] with parameters:"),this.debugLog(JSON?JSON.stringify(n):null);var r=this.requestTemplate.replace(/\{ACTION_TYPE\}/g,U(C(e)));r=r.replace(/\{ACTION_NAME\}/g,U(C(t)));var i=n.request,s="";if(i)for(var o in i){if(void 0!==i[o].type&&null!==i[o].type){var a=this.types[i[o].type];a&&(i[o].value=a(i[o].value,i[o].allowedValueList,!1))}(null===i[o].value||void 0===i[o].value)&&(i[o].value=""),s+="			<"+o+">"+U(C(i[o].value+""))+"</"+o+">\n"}return r=r.replace(/\{ACTION_VARS\}/g,s),this.debugLog("[REQUEST] (SOAPAction: "+e+"#"+t+") "+r),r},WinJSContrib.UPnP.UPnPService.prototype.sendRequest=function(e,t,n,i,s){var o='"'+e.replace(/[\"\#]/g,"")+"#"+t.replace(/[\"\#]/g,"")+'"',a=new Windows.Web.Http.HttpClient,u=new Windows.Foundation.Uri(n),p=new Windows.Web.Http.HttpRequestMessage(Windows.Web.Http.HttpMethod.post,u);return p.headers.append("SOAPACTION",o),p.content=new Windows.Web.Http.HttpStringContent(i,Windows.Storage.Streams.UnicodeEncoding.utf8,"text/xml"),a.sendRequestAsync(p).then(function(e){e.content.readAsStringAsync().then(function(e){var t=r(e),n={status:200,responseText:e,responseXML:t};s.apply(this,[null,n])})},function(e){s.apply(void 0,[new l("XmlHttpRequest failed"),null])}),this},WinJSContrib.UPnP.UPnPService.prototype.handleResponse=function(e,t,n,r){n=this.formatParameters(n);var i=n.response,s={},o=t.getElementsByTagName?t.getElementsByTagName(e+"Response"):null;if((null===o||o.length<=0)&&(o=t.getElementsByTagName?t.getElementsByTagName("u:"+e+"Response"):null),null!==o&&o.length>0){var a=o[0].childNodes;if(a&&a.length>0)for(var u=0,p=a.length;p>u;u++){var c=a[u].nodeName,l=a[u].firstChild?C(m(a[u].firstChild.nodeValue+"")):null;if(i[c]&&void 0!==i[c].type&&null!==i[c].type){var y=this.types[i[c].type];y&&(l=y(l,i[c].allowedValueList||null,!0))}s[c]=void 0!==l&&null!==l?l:""}}return r.apply(void 0,[null,{data:s}]),this},WinJSContrib.UPnP.UPnPService.prototype.formatParameter=function(e){var t={};return void 0!==e.type||void 0!==e.value||void 0!==e.allowedValueList?(t=e,void 0!==e.allowedValueList&&"array"!=typeof e.allowedValueList&&(e.allowedValueList=[])):t={value:e},void 0!==t.type&&null!==t.type&&(this.types[t.type+""]||delete t.type),t},WinJSContrib.UPnP.UPnPService.prototype.formatParameters=function(e){(void 0===e||null===e)&&(e={}),e.request||(e.request={}),e.response||(e.response={});for(var t in e)if("request"===t||"response"===t)for(var n in e[t])e[t][n]=this.formatParameter(e[t][n]);else e.request[t]=this.formatParameter(e[t]),delete e[t];return e},WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues=function(e,t){if(e&&t&&"[object Array]"==Object.prototype.toString.call(t)){for(var n=!1,r=0,i=t.length;i>r;r++)if(e==t[r]){n=!0;break}if(!n)return""}return e},WinJSContrib.UPnP.UPnPService.prototype.debugLog=function(e,t){this.options&&this.options.debug&&console[t||"log"]("Plug.UPnP: "+e)};var l=function(e){return{description:e}},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e.charAt(n)]=n;return t}(y),v=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[y.charAt(n>>>18),y.charAt(n>>>12&63),t>=2?"=":y.charAt(n>>>6&63),t>=1?"=":y.charAt(63&n)];return r.join("")},d=function(e){var t=e.length,n=t%4,r=(t>0?h[e.charAt(0)]<<18:0)|(t>1?h[e.charAt(1)]<<12:0)|(t>2?h[e.charAt(2)]<<6:0)|(t>3?h[e.charAt(3)]:0),i=[String.fromCharCode(r>>>16),String.fromCharCode(r>>>8&255),String.fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},P=e.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,v)},g=e.atob||function(e){return e.replace(/[\s\S]{1,4}/g,d)},f="0123456789abcdef",S=function(e){for(var t={},n=0,r=e.length;r>n;n++)t[n]=e.charAt(n);return t}(f),C=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},U=function(e){return e.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},m=function(e){return e.replace(/\&quot;/g,'"').replace(/\&\#39;/g,"'").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/\&amp;/g,"&")},b=function(e){var t,n,r=0,i=[1,4,5,6,7,10,11];if("string"!=typeof e&&(e+=""),n=/^((\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:[T\s]?(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{4}))?)?$/.exec(e)){n=n.slice(1,n.length);for(var s,o=0;s=i[o];++o)n[s]=+n[s]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"!==n[8]&&void 0!==n[9]&&(r=60*(n[10]/100-n[10]/100%1)+n[10]%100,"+"===n[9]&&(r=0-r)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+r,n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t},I={"urn:schemas-upnp-org:service:ContentDirectory:1":!0,"urn:schemas-upnp-org:service:ContentDirectory:2":!0,"urn:schemas-upnp-org:service:ContentDirectory:3":!0,"urn:schemas-upnp-org:service:ContentDirectory:4":!0};WinJSContrib.UPnP.UPnPContentDirectory=function(e,t){return WinJSContrib.UPnP.UPnPService.apply(this,[e,t]),this.upnpType=e.serviceType,I[this.upnpType]?(this.getSystemUpdateId=function(e){return this.action("GetSystemUpdateID",{request:{},response:{Id:{type:this.types.ui4}}},e)},this.getSearchCapabilities=function(e){return this.action("GetSearchCapabilities",{request:{},response:{SearchCaps:{type:this.types.string}}},e)},this.getSortCapabilities=function(e){return this.action("GetSortCapabilities",{request:{},response:{SortCaps:{type:this.types.string}}},e)},this.browse=function(e,t,n,r,i,s,o){return this.action("Browse",{request:{ObjectID:{value:e||"0",type:this.types.string},BrowseFlag:{value:t||"BrowseDirectChildren",type:this.types.string},Filter:{value:n||"*",type:this.types.string},StartingIndex:{value:r||"0",type:this.types.ui4},RequestedCount:{value:i||"0",type:this.types.ui4},SortCriteria:{value:s,type:this.types.string}},response:{Result:{type:this.types.xmlObj},NumberReturned:{type:this.types.ui4},TotalMatches:{type:this.types.ui4},UpdateID:{type:this.types.ui4}}},o)},this.search=function(e,t,n,r,i,s,o){return this.action("Search",{request:{ObjectID:{value:e||"0",type:this.types.string},BrowseFlag:{value:t||"BrowseDirectChildren",type:this.types.string},Filter:{value:n||"*",type:this.types.string},StartingIndex:{value:r||"0",type:this.types.ui4},RequestedCount:{value:i||"0",type:this.types.ui4},SortCriteria:{value:s,type:this.types.string}},response:{Result:{type:this.types.xmlObj},NumberReturned:{type:this.types.ui4},TotalMatches:{type:this.types.ui4},UpdateID:{type:this.types.ui4}}},o)},"urn:schemas-upnp-org:service:ContentDirectory:2"===this.upnpType,"urn:schemas-upnp-org:service:ContentDirectory:3"===this.upnpType,void("urn:schemas-upnp-org:service:ContentDirectory:4"===this.upnpType)):void console.error("Provided service is not a UPnP Media Server Service")},WinJSContrib.UPnP.UPnPContentDirectory.prototype=Object.create(WinJSContrib.UPnP.UPnPService.prototype);var T={"urn:schemas-upnp-org:service:ConnectionManager:1":!0,"urn:schemas-upnp-org:service:ConnectionManager:2":!0,"urn:schemas-upnp-org:service:ConnectionManager:3":!0};WinJSContrib.UPnP.UPnPConnectionManager=function(e,t){return WinJSContrib.UPnP.UPnPService.apply(this,[e,t]),this.upnpType=e.serviceType,T[this.upnpType]?(this.getCurrentConnectionIDs=function(e){return this.action("GetCurrentConnectionIDs",{request:{},response:{ConnectionIDs:{type:this.types.string}}},e)},this.getCurrentConnectionInfo=function(e,t){return this.action("GetCurrentConnectionInfo",{request:{ConnectionID:{value:e,type:this.types.ui4}},response:{RcsID:{type:this.types.i4},AVTransportID:{type:this.types.i4},ProtocolInfo:{type:this.types.string},PeerConnectionManager:{type:this.types.string},PeerConnectionID:{type:this.types.i4},Direction:{type:this.types.string},Status:{type:this.types.string}}},t)},this.getProtocolInfo=function(e){return this.action("GetProtocolInfo",{request:{},response:{Source:{type:this.types.string},Sink:{type:this.types.string}}},e)},void("urn:schemas-upnp-org:service:ConnectionManager:2"===this.upnpType)):void console.error("Provided service is not a UPnP Service")},WinJSContrib.UPnP.UPnPConnectionManager.prototype=Object.create(WinJSContrib.UPnP.UPnPService.prototype);var V={"urn:schemas-upnp-org:service:AVTransport:1":!0,"urn:schemas-upnp-org:service:AVTransport:2":!0};WinJSContrib.UPnP.UPnPAVTransport=function(e,t){return WinJSContrib.UPnP.UPnPService.apply(this,[e,t]),this.upnpType=e.serviceType,V[this.upnpType]?(this.getDeviceCapabilities=function(e,t){return this.action("GetDeviceCapabilities",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{PlayMedia:{type:this.types.string},RecMedia:{type:this.types.string},RecQualityModes:{type:this.types.string}}},t)},this.getMediaInfo=function(e,t){return this.action("GetMediaInfo",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{NrTracks:{type:this.types.ui4},MediaDuration:{type:this.types.string},CurrentURI:{type:this.types.string},CurrentURIMetaData:{type:this.types.string},NextURI:{type:this.types.string},NextURIMetaData:{type:this.types.string},PlayMedium:{type:this.types.string},RecordMedium:{type:this.types.string},WriteStatus:{type:this.types.string}}},t)},this.getPositionInfo=function(e,t){return this.action("GetPositionInfo",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{Track:{type:this.types.ui4},TrackDuration:{type:this.types.string},TrackMetaData:{type:this.types.xmlObj},TrackURI:{type:this.types.string},RelTime:{type:this.types.string},AbsTime:{type:this.types.string},RelCount:{type:this.types.i4},AbsCount:{type:this.types.i4}}},t)},this.getTransportInfo=function(e,t){return this.action("GetTransportInfo",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{CurrentTransportState:{type:this.types.string},CurrentTransportStatus:{type:this.types.string},CurrentSpeed:{type:this.types.string}}},t)},this.getTransportSettings=function(e,t){return this.action("GetTransportSettings",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{PlayMode:{type:this.types.ui4},RecQualityMode:{type:this.types.string}}},t)},this.setAVTransportURI=function(e,t,n,r){return this.action("SetAVTransportURI",{request:{InstanceID:{value:e,type:this.types.ui4},CurrentURI:{value:t,type:this.types.string},CurrentURIMetaData:{value:n,type:this.types.string}},response:{}},r)},this.play=function(e,t,n){return this.action("Play",{request:{InstanceID:{value:e,type:this.types.ui4},Speed:{value:t||"1",type:this.types.string}},response:{}},n)},this.pause=function(e,t){return this.action("Pause",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{}},t)},this.stop=function(e,t){return this.action("Stop",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{}},t)},this.next=function(e,t){return this.action("Next",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{}},t)},this.previous=function(e,t){return this.action("Previous",{request:{InstanceID:{value:e,type:this.types.ui4}},response:{}},t)},this.seek=function(e,t,n,r){return this.action("Seek",{request:{InstanceID:{value:e,type:this.types.ui4},Unit:{value:t,type:this.types.string},Target:{value:n,type:this.types.string}},response:{}},r)},void("urn:schemas-upnp-org:service:AVTransport:2"===this.upnpType)):void console.error("Provided service is not a UPnP Media Renderer Service")},WinJSContrib.UPnP.UPnPAVTransport.prototype=Object.create(WinJSContrib.UPnP.UPnPService.prototype);var D={"urn:schemas-upnp-org:service:RenderingControl:1":!0,"urn:schemas-upnp-org:service:RenderingControl:2":!0,"urn:schemas-upnp-org:service:RenderingControl:3":!0};WinJSContrib.UPnP.UPnPRenderingControl=function(e,t){return WinJSContrib.UPnP.UPnPService.apply(this,[e,t]),this.upnpType=e.serviceType,D[this.upnpType]?(this.listPresets=function(e,t){return this.action("ListPresets",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentPresetNameList:{type:this.types.string}}},t)},this.selectPreset=function(e,t,n){return this.action("SelectPreset",{request:{InstanceId:{value:e,type:this.types.ui4},PresetName:{value:t||"FactoryDefaults",type:this.types.string}}},n)},this.getBrightness=function(e,t){return this.action("GetBrightness",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentBrightness:{type:this.types.ui2}}},t)},this.setBrightness=function(e,t,n){return this.action("SetBrightness",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredBrightness:{value:t,type:this.types.ui2}}},n)},this.getContrast=function(e,t){return this.action("GetContrast",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentContrast:{type:this.types.ui2}}},t)},this.setContrast=function(e,t,n){return this.action("SetContrast",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredContrast:{value:t,type:this.types.ui2}}},n)},this.getSharpness=function(e,t){return this.action("GetSharpness",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentSharpness:{type:this.types.ui2}}},t)},this.setSharpness=function(e,t,n){return this.action("SetSharpness",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredSharpness:{value:t,type:this.types.ui2}}},n)},this.getRedVideoGain=function(e,t){return this.action("GetRedVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentRedVideoGain:{type:this.types.ui2}}},t)},this.setRedVideoGain=function(e,t,n){return this.action("SetRedVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredRedVideoGain:{value:t,type:this.types.ui2}}},n)},this.getGreenVideoGain=function(e,t){return this.action("GetGreenVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentGreenVideoGain:{type:this.types.ui2}}},t)},this.setGreenVideoGain=function(e,t,n){return this.action("SetGreenVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredGreenVideoGain:{value:t,type:this.types.ui2}}},n)},this.getBlueVideoGain=function(e,t){return this.action("GetBlueVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentBlueVideoGain:{type:this.types.ui2}}},t)},this.setBlueVideoGain=function(e,t,n){return this.action("SetBlueVideoGain",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredBlueVideoGain:{value:t,type:this.types.ui2}}},n)},this.getRedVideoBlackLevel=function(e,t){return this.action("GetRedVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentRedVideoBlackLevel:{type:this.types.ui2}}},t)},this.setRedVideoBlackLevel=function(e,t,n){return this.action("SetRedVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredRedVideoBlackLevel:{value:t,type:this.types.ui2}}},n)},this.getGreenVideoBlackLevel=function(e,t){return this.action("GetGreenVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentGreenVideoBlackLevel:{type:this.types.ui2}}},t)},this.setGreenVideoBlackLevel=function(e,t,n){return this.action("SetGreenVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredGreenVideoBlackLevel:{value:t,type:this.types.ui2}}},n)},this.getBlueVideoBlackLevel=function(e,t){return this.action("GetBlueVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentBlueVideoBlackLevel:{type:this.types.ui2}}},t)},this.setBlueVideoBlackLevel=function(e,t,n){return this.action("SetBlueVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredBlueVideoBlackLevel:{value:t,type:this.types.ui2}}},n)},this.getBlueVideoBlackLevel=function(e,t){return this.action("GetBlueVideoBlackLevel",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentBlueVideoBlackLevel:{type:this.types.ui2}}},t)},this.getColorTemperature=function(e,t){return this.action("GetColorTemperature",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentColorTemperature:{type:this.types.ui2}}},t)},this.setColorTemperature=function(e,t,n){return this.action("SetColorTemperature",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredColorTemperature:{value:t,type:this.types.ui2}}},n)},this.getHorizontalKeystone=function(e,t){return this.action("GetHorizontalKeystone",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentHorizontalKeystone:{type:this.types.i2}}},t)},this.setHorizontalKeystone=function(e,t,n){return this.action("SetHorizontalKeystone",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredHorizontalKeystone:{value:t,type:this.types.i2}}},n)},this.getVerticalKeystone=function(e,t){return this.action("GetVerticalKeystone",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentVerticalKeystone:{type:this.types.i2}}},t)},this.setVerticalKeystone=function(e,t,n){return this.action("SetVerticalKeystone",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredVerticalKeystone:{value:t,type:this.types.i2}}},n)},this.getMute=function(e,t,n){return this.action("GetMute",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string}},response:{CurrentMute:{type:this.types["boolean"]}}},n)},this.setMute=function(e,t,n,r){return this.action("SetMute",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string},DesiredMute:{value:n,type:this.types["boolean"]}}},r)},this.getVolume=function(e,t,n){return this.action("GetVolume",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string}},response:{CurrentVolume:{type:this.types.ui2}}},n)},this.setVolume=function(e,t,n,r){return this.action("SetVolume",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string},DesiredVolume:{value:n,type:this.types.ui2}}},r)},this.getVolumeDB=function(e,t,n){return this.action("GetVolumeDB",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string}},response:{CurrentVolume:{type:this.types.i2}}},n)},this.setVolumeDB=function(e,t,n,r){return this.action("SetVolumeDB",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string},DesiredVolume:{value:n,type:this.types.i2}}},r)},this.getVolumeDBRange=function(e,t,n){return this.action("GetVolumeDBRange",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string}},response:{MinValue:{type:this.types.i2},MaxValue:{type:this.types.i2}}},n)},this.getLoudness=function(e,t,n){return this.action("GetLoudness",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string}},response:{CurrentLoudness:{type:this.types["boolean"]}}},n)},this.setLoudness=function(e,t,n,r){return this.action("SetLoudness",{request:{InstanceId:{value:e,type:this.types.ui4},Channel:{value:t||"Master",type:this.types.string},DesiredLoudness:{value:n,type:this.types["boolean"]}}},r)},("urn:schemas-upnp-org:service:RenderingControl:2"===this.upnpType||"urn:schemas-upnp-org:service:RenderingControl:3"===this.upnpType)&&(this.getStateVariables=function(e,t,n){return this.action("GetStateVariables",{request:{InstanceId:{value:e,type:this.types.ui4},StateVariableList:{value:t,type:this.types.string}},response:{StateVariableValuePairs:{type:this.types.string}}},n)},this.setStateVariables=function(e,t,n,r,i,s){return this.action("SetStateVariables",{request:{InstanceId:{value:e,type:this.types.ui4},RenderingControlUDN:{value:t,type:this.types.string},ServiceType:{value:n,type:this.types.string},ServiceId:{value:r,type:this.types.string},StateVariableValuePairs:{value:i,type:this.types.string}},response:{StateVariableList:{type:this.types.string}}},s)}),void("urn:schemas-upnp-org:service:RenderingControl:3"===this.upnpType&&(this.getAllowedTransforms=function(e,t){return this.action("GetAllowedTransforms",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentAllowedTransformSettings:{type:this.types.string}}},t)},this.getTransforms=function(e,t){return this.action("GetTransforms",{request:{InstanceId:{value:e,type:this.types.ui4}},response:{CurrentTransformValues:{type:this.types.string}}},t)},this.setTransforms=function(e,t,n){return this.action("SetTransforms",{request:{InstanceId:{value:e,type:this.types.ui4},DesiredTransformValues:{value:t,type:this.types.string}}},n)},this.getAllAvailableTransforms=function(e,t){return this.action("GetAllAvailableTransforms",{response:{AllAllowedTransformSettings:{
type:this.types.string}}},t)},this.getAllowedDefaultTransforms=function(e,t){return this.action("GetAllowedDefaultTransforms",{response:{AllowedDefaultTransformSettings:{type:this.types.string}}},t)},this.getDefaultTransforms=function(e,t){return this.action("GetDefaultTransforms",{response:{CurrentDefaultTransformSettings:{type:this.types.string}}},t)},this.setDefaultTransforms=function(e,t,n){return this.action("SetDefaultTransforms",{request:{DesiredDefaultTransformSettings:{value:t,type:this.types.string}}},n)}))):void console.error("Provided service is not a UPnP Media Renderer Service")},WinJSContrib.UPnP.UPnPRenderingControl.prototype=Object.create(WinJSContrib.UPnP.UPnPService.prototype)}(window);
var WinJSContrib;!function(i){"use strict";!function(n){function t(i,n){"img"==i.nodeName.toLowerCase()?i.src=n:i.style.backgroundImage='url("'+n+'")',i.classList.add("imageLoaded")}i.Bindings.pictureUnavailable="/images/unavailable.png",i.Bindings.bindingArguments=function(i,n){var t;if(WinJS.UI._optionsParser){var e=i.getAttribute("data-win-bind-args");e&&(t=WinJS.UI.optionsParser(e,window))}else t=i.dataset.winBindArgs;return t?n?t[n]:t:void 0};var e=i.Bindings.bindingArguments;i.Bindings.removeHTML=WinJS.Binding.initializer(function(n,t,e,s){var a=i.Utils.readProperty(n,t),r=document.createElement("DIV");r.innerHTML=a,WinJS.Binding.oneTime({value:r.innerText},["value"],e,[s])}),i.Bindings.removeHTMLAndEllipsisize=WinJS.Binding.initializer(function(n,t,s,a){var r=i.Utils.readProperty(n,t),d=document.createElement("DIV");d.innerHTML=r;var l=d.innerText,o=e(s,"ellipsisize");o&&(l=toStaticHTML(i.Utils.ellipsisizeString(d.innerText,o,!0))),WinJS.Binding.oneTime({value:l},["value"],s,[a])}),i.Bindings.staticHTML=WinJS.Binding.initializer(function(n,t,e,s){var a=i.Utils.readProperty(n,t);e[s]=toStaticHTML(a)}),i.Bindings.dataAttr=WinJS.Binding.initializer(function(n,t,e,s){var a=i.Utils.readProperty(n,t);e.setAttribute("data-"+s,a)}),i.Bindings.addClass=WinJS.Binding.initializer(function(n,t,s,a){function r(a,r){var d=i.Utils.readProperty(n,t),l=e(s,"format");l?(s.classList.remove(l.format(r)),s.classList.add(l.format(d))):(s.classList.remove(r),s.classList.add(d))}var d={};return d[t]=r,WinJS.Binding.bind(n,d)}),i.Bindings.asClass=WinJS.Binding.initializer(function(n,t,e,s){function a(a,r){var d=i.Utils.readProperty(n,t);e.classList.remove(s+"-"+r),e.classList.add(s+"-"+d)}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.showClassIf=WinJS.Binding.initializer(function(n,t,s,a){function r(a,r){var d=i.Utils.readProperty(n,t),l=e(s,"className");s.classList.remove(l),d&&s.classList.add(l)}var d={};return d[t]=r,WinJS.Binding.bind(n,d)}),i.Bindings.toBgImage=WinJS.Binding.initializer(function(n,t,e,s){function a(){var s=i.Utils.readProperty(n,t);return s&&s.length?void(e.style.backgroundImage='url("'+s+'")'):void(e.style.backgroundImage="")}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.ToRealDate=WinJS.Binding.initializer(function(i,n,t,e){var s=new Date(1e3*i.date);t.innerHTML=s.toLocaleDateString()}),i.Bindings.picture=WinJS.Binding.initializer(function(e,s,a,r){function d(){var r=i.Utils.readProperty(e,s);r&&r.length||(r=n.pictureUnavailable),a.classList.remove("imageLoaded"),setTimeout(function(){i.UI.loadImage(r).done(function(){t(a,r)},function(){t(a,n.pictureUnavailable),WinJS.Utilities.addClass(a,"imageLoaded")})},200)}var l={};return l[s]=d,WinJS.Binding.bind(e,l)}),i.Bindings.toSmartBgImage=i.Bindings.picture,i.Bindings.showIf=WinJS.Binding.initializer(function(n,t,e,s){function a(){var a=i.Utils.readProperty(n,t);a?(e.classList.remove("mcn-hide"),e.classList.add("mcn-show"),"opacity"===s[0]||"opacity"===s[1]?e.style.opacity="":"visibility"===s[0]||"visibility"===s[1]?e.style.visibility="":e.style.display=""):(e.classList.remove("mcn-show"),e.classList.add("mcn-hide"),"opacity"===s[0]||"opacity"===s[1]?e.style.opacity="0":"visibility"===s[0]||"visibility"===s[1]?e.style.visibility="hidden":e.style.display="none")}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.hideIfNot=i.Bindings.showIf,i.Bindings.hideIfNotDefined=i.Bindings.showIf,i.Bindings.hideIf=WinJS.Binding.initializer(function(n,t,e,s){function a(){var a=i.Utils.readProperty(n,t);a?(e.classList.remove("mcn-show"),e.classList.add("mcn-hide"),"opacity"===s[0]||"opacity"===s[1]?e.style.opacity="0":"visibility"===s[0]||"visibility"===s[1]?e.style.visibility="hidden":e.style.display="none"):(e.classList.remove("mcn-hide"),e.classList.add("mcn-show"),"opacity"===s[0]||"opacity"===s[1]?e.style.opacity="":"visibility"===s[0]||"visibility"===s[1]?e.style.visibility="":e.style.display="")}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.showIfNot=i.Bindings.hideIf,i.Bindings.showIfNotDefined=i.Bindings.hideIf,i.Bindings.enableIf=WinJS.Binding.initializer(function(n,t,e,s){function a(){var s=i.Utils.readProperty(n,t);s?e.disabled=!1:e.disabled=!0}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.disableIfNot=i.Bindings.enableIf,i.Bindings.disableIf=WinJS.Binding.initializer(function(n,t,e,s){function a(){var s=i.Utils.readProperty(n,t);s?e.disabled=!0:e.disabled=!1}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.enableIfNot=i.Bindings.disableIf,i.Bindings.toWidth=WinJS.Binding.initializer(function(n,t,e,s){function a(){var s=i.Utils.readProperty(n,t);s?e.style.width=s+"%":e.style.width=""}var r={};return r[t]=a,WinJS.Binding.bind(n,r)}),i.Bindings.ellipsisize=WinJS.Binding.initializer(function(n,t,s,a){var r=i.Utils.readProperty(n,t),d=e(s,"ellipsisize");s[a]=toStaticHTML(i.Utils.ellipsisizeString(r,d,!0))}),i.Bindings.toEllipsisized=i.Bindings.ellipsisize,i.Bindings.emptyIfNull=WinJS.Binding.initializer(function(n,t,e,s){var a=i.Utils.readProperty(n,t);"undefined"==typeof a||null===a?e[s]="":e[s]=a}),i.Bindings.twoWayOnChange=WinJS.Binding.initializer(function(n,t,e,s){function a(){var a=i.Utils.readProperty(n,t);i.Utils.writeProperty(e,s,a||"")}function r(){var a=i.Utils.getProperty(e,s);i.Utils.writeProperty(n,t,a.propValue)}e.addEventListener("change",r,!1),e.winControl||(e.classList.add("win-disposable"),e.winControl={dispose:function(){e.removeEventListener("change",r)}});var d={};return d[t]=a,WinJS.Binding.bind(n,d)}),n.cleanUpBindingList=function(i){var n=[];return i.forEach(function(i){var t=WinJS.Binding.unwrap(i);n.push(t)}),n}}(i.Bindings||(i.Bindings={}));i.Bindings}(WinJSContrib||(WinJSContrib={}));
var WinJSContrib;WinJSContrib.Utils=WinJSContrib.Utils||{},WinJSContrib.Bindings=WinJSContrib.Bindings||{},function(){"use strict";function n(n,i,t){if(""!=i&&""!=n&&""!=t&&!(isNaN(n)||isNaN(t)||isNaN(i))){var r=new Date,e=new Date(t,n-1,i),o=864e5,a=Math.floor((r.getTime()-e.getTime())/o);return a}}WinJSContrib.Bindings.formatDate=WinJS.Utilities.markSupportedForProcessing(function(n,i,t,r){function e(){var r=WinJSContrib.Utils.readProperty(n,i);if(r){var e=WinJSContrib.Bindings.bindingArguments(t,"formatDate")||"L";t.innerText=moment(r).format(e)}else t.innerText=""}var o={};return o[i]=e,WinJS.Binding.bind(n,o)}),WinJSContrib.Bindings.calendar=WinJS.Utilities.markSupportedForProcessing(function(n,i,t,r){function e(){var r=WinJSContrib.Utils.readProperty(n,i);r?t.innerText=moment(r).calendar():t.innerText=""}var o={};return o[i]=e,WinJS.Binding.bind(n,o)}),WinJSContrib.Bindings.daysSinceDate=WinJS.Utilities.markSupportedForProcessing(function(i,t,r,e){function o(){var e=WinJSContrib.Utils.readProperty(i,t);if(e){e=new Date(e);var o=e.getMonth()+1,a=e.getDate(),s=e.getFullYear(),d=n(o,a,s);r.innerText=d}else r.innerText=""}var a={};return a[t]=o,WinJS.Binding.bind(i,a)}),WinJSContrib.Bindings.humanizeDate=WinJS.Utilities.markSupportedForProcessing(function(n,i,t,r){function e(){var r=WinJSContrib.Utils.readProperty(n,i);if(r){var e=WinJSContrib.Bindings.bindingArguments(t,"humanizeFormat"),o=WinJSContrib.Bindings.bindingArguments(t,"addSuffix");t.innerText=moment.duration(r,e).humanize(o)}else t.innerText=""}var o={};return o[i]=e,WinJS.Binding.bind(n,o)})}();
var WinJSContrib=WinJSContrib||{};!function(){function Messenger(e,n){var r=this;r.isWorker=void 0===e.document,r._pendings={},r._receiver=e,r._sender=n||e,r._bindedProcessEvent=r._processEvent.bind(r),r._receiver&&r._receiver.addEventListener("message",r._bindedProcessEvent)}WinJSContrib.Messenger=WinJS.Class.mix(Messenger,WinJS.Utilities.eventMixin),WinJSContrib.Messenger.SmartWorkerPath="/scripts/winjscontrib/winjscontrib.messenger.worker.js",WinJSContrib.Messenger.SmartWorker=function(e){if(window.Worker){var n=new window.Worker(e||WinJSContrib.Messenger.SmartWorkerPath);return new WinJSContrib.Messenger(n,n)}return new WinJSContrib.Messenger(null,null)},WinJSContrib.Messenger.prototype._send=function(e){this.isWorker?this._sender.postMessage(JSON.stringify(e)):this._sender.postMessage(JSON.stringify(e),"*")},WinJSContrib.Messenger.prototype.importScripts=function(e){return this._receiver?this.start("_doImportScripts",e):WinJS.Promise.wrap()},WinJSContrib.Messenger.prototype._doImportScripts=function(e){return new WinJS.Promise(function(n){if("string"==typeof e)importScripts(e);else if(e.length)for(var r=0;r<e.length;r++)importScripts(e[r]);n()})},WinJSContrib.Messenger.prototype.execute=function(e){var n=this,r=[];if(arguments.length>1)for(var i=1;i<arguments.length;i++)r.push(arguments[i]);if(n._receiver){var t="var messengerFunction="+e;return this.start("_runFunction",{f:t,args:r})}return WinJS.Promise.timeout(0).then(function(){return e.apply(null,r)})},WinJSContrib.Messenger.prototype._runFunction=function(functionArgs){var messenger=this;return new WinJS.Promise(function(c,e){try{eval(functionArgs.f);var res=messengerFunction.apply(null,functionArgs.args);c(res)}catch(exception){e(exception)}})},WinJSContrib.Messenger.prototype.map=function(e,n){var r=this;n.forEach(function(n){r[n]=function(){var r=e[n];return r.apply(e,arguments)}})},WinJSContrib.Messenger.prototype.start=function(e,n,r){var i=this;if(!i._receiver)return WinJS.Promise.wrapError("worker not supported");var t={id:WinJSContrib.Utils.guid(),complete:null,error:null,progress:null,promise:null},s={name:e,id:t.id,type:"run",data:n,asArgs:r,sender:"WinJSContrib.WinJSContrib.Messenger"};t.promise=new WinJS.Promise(function(e,n,r){t.complete=e,t.error=n,t.progress=r},function(){console.warn("message canceled"),s.type="cancel",i._send(s)}),i._pendings[t.id]=t;var o=function(){delete i._pendings[t.id]};return t.promise.done(o,o),i._send(s),t.promise},WinJSContrib.Messenger.prototype._processEvent=function(e){var n=this,r="string"==typeof e.data?JSON.parse(e.data):e.data,i=r.name,t=r.data,s=r.asArgs;if(r.id){var o=n._pendings[r.id];if(o&&o[r.type])return void o[r.type](t);if("cancel"===r.type){var a=n._pendings[r.id];a&&(a.promise.cancel(),delete n._pendings[r.id])}else{if("run"===r.type&&i&&n[i]){try{var d=null;d=s?WinJS.Promise.as(n[i].apply(n[i],t)):WinJS.Promise.as(n[i](t)),n._pendings[r.id]={promise:d,details:r},d.then(function(e){n._send({name:i,id:r.id,type:"complete",sender:"WinJSContrib.WinJSContrib.Messenger",data:e})},function(e){n._send({name:i,id:r.id,type:"error",sender:"WinJSContrib.WinJSContrib.Messenger",data:e})},function(e){n._send({name:i,id:r.id,type:"progress",sender:"WinJSContrib.WinJSContrib.Messenger",data:e})}).then(function(){delete n._pendings[r.id]})}catch(p){delete n._pendings[r.id],n._send({name:i,id:r.id,type:"error",sender:"WinJSContrib.WinJSContrib.Messenger",data:{description:p.description,message:p.message,stack:p.stack}})}return}n._send({name:i,id:r.id,type:"error",sender:"WinJSContrib.WinJSContrib.Messenger",data:{message:"callback function not found"}})}}else{if(i&&n[i])return void n[i](t);n.dispatchEvent(i,t)}},WinJSContrib.Messenger.prototype.dispose=function(){var e=this;e._receiver&&(e._receiver.terminate&&e._receiver.terminate(),e._receiver.removeEventListener("message",e._bindedProcessEvent))}}();
var __global=this,WinJSContrib;!function(n){var t;!function(t){function r(n){return encodeURIComponent(n)+".json"}function e(n,t,e){return n.getItemAsync(r(t)).then(function(n){return n},function(){}).then(function(n){return n?n.deleteAsync().then(function(){e&&e.debug("item deleted "+n.path)},function(t){e&&e.error("cannot delete item "+n.path)}):WinJS.Promise.wrap([])})}function i(n,t){return Windows.Storage.FileIO.readBufferAsync(n).then(function(n){if(!t)return n;if(n.length){var r=new Windows.Security.Cryptography.DataProtection.DataProtectionProvider;return r.unprotectAsync(n)}return null}).then(function(n){var t=null;if(null!==n&&void 0!==n){var r=Windows.Security.Cryptography.CryptographicBuffer.convertBinaryToString(Windows.Security.Cryptography.BinaryStringEncoding.utf8,n);if(r)try{t=JSON.parse(r)}catch(e){}}return t})}function o(n,t,e,a,s,u){return u=u||c,new WinJS.Promise(function(c,h){s=s||0,a=a||Windows.Storage.CreationCollisionOption.openIfExists;var l=r(t);n.getFileAsync(l).then(function(n){return i(n,e)}).then(function(e){u.verbose("read "+n.path+"\\"+r(t)),c(e)},function(i){return-2147024894==i.number?(u.debug("read empty "+n.path+"\\"+r(t)),void c()):(u.warn("error reading "+n.path+"\\"+r(t)),void(2>s?setImmediate(function(){u.info("retry reading "+n.path+"\\"+r(t)),o(n,t,e,a,s+1,u).then(c,h)}):h({message:"fatal error reading "+n.path+"\\"+r(t),exception:i})))})})}function a(n,t,e,i,o,s,u){return u=u||c,new WinJS.Promise(function(c,h){function l(l){u.warn("error writing "+n.path+"\\"+r(t)),2>s?setImmediate(function(){u.info("retry writing "+n.path+"\\"+r(t)),a(n,t,e,i,o,s+1,u).then(c,h)}):h({message:"fatal error writing "+n.path+"\\"+r(t)+"\r\n",exception:l})}s=s||0,o=o||Windows.Storage.CreationCollisionOption.replaceExisting;var f=Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(JSON.stringify(e),Windows.Security.Cryptography.BinaryStringEncoding.utf8);if(i)var p=new Windows.Security.Cryptography.DataProtection.DataProtectionProvider("Local=user");var d=n.createFileAsync(r(t),o),g=i?p.protectAsync(f):WinJS.Promise.wrap(f);WinJS.Promise.join([d,g]).then(function(n){var t=n[0],r=n[1];Windows.Storage.FileIO.writeBufferAsync(t,r).then(function(){u.verbose("file written "+t.path),c(t)},l)},l)})}t.current=n.DataContainer.current||null;var c=n.Logs.getLogger("WinJSContrib.DataContainer.WinRT"),s=function(){function t(n,t,r){var e=this;if(e.key=n,e.options=t||{},e.parent=r,e.folderPromise,e.useDataCache=e.options.useDataCache||!1,e.dataCache={},e.childs={},!__global.Windows)throw"WinRT is required !";n?r&&(e.folderPromise=r.folderPromise.then(function(t){return e.options.logger&&e.options.logger.debug("open folder "+n),t.createFolderAsync(n,Windows.Storage.CreationCollisionOption.openIfExists)}).then(function(n){return e.folder=n,n})):(e.folder=Windows.Storage.ApplicationData.current.localFolder,e.folderPromise=WinJS.Promise.wrap(e.folder))}return t.makeCurrent=function(r,e){n.DataContainer.current=new t(r,e)},t.prototype.read=function(n){var t=this;if(t.useDataCache){var r=t.dataCache[n];if(r){var e=JSON.parse(JSON.stringify(r));return WinJS.Promise.wrap(e)}}return t.folderPromise.then(function(r){return o(r,n,t.options.encrypted,Windows.Storage.CreationCollisionOption.openIfExists,0,t.options.logger).then(function(r){return t.useDataCache&&(t.dataCache[n]=r),r})})},t.prototype.save=function(n,t){var r=this;return r.useDataCache&&(r.dataCache[n]=t),r.folderPromise.then(function(e){return a(e,n,t,r.options.encrypted,Windows.Storage.CreationCollisionOption.replaceExisting,0,r.options.logger)})},t.prototype.remove=function(n){var t=this;return t.folderPromise.then(function(r){return e(r,n,t.options.logger)})},t.prototype.listKeys=function(){var n=this;return n.folderPromise.then(function(n){return n.getFilesAsync().then(function(t){return t.map(function(t){var r=t.path.substr(n.path.length+1),e=r.indexOf(".json");return e>0&&(r=r.substr(0,e)),r})})})},t.prototype.list=function(){var n=this;return n.folderPromise.then(function(n){return n.getFilesAsync()})},t.prototype.child=function(n){if(this.childs[n])return this.childs[n];var r=new t(n,this.options,this);return this.childs[n]=r,r},t.prototype.childWithTransaction=function(n,t){var r=this;return this.child(n+"-tmp").folderPromise.then(function(t){return t.deleteAsync().then(function(){return r.child(n+"-tmp")})}).then(function(e){return t(e).then(function(t){return e.folderPromise.then(function(t){return t.renameAsync(n,Windows.Storage.NameCollisionOption.replaceExisting).then(function(){return r.childs[n]=null,r.childs[n+"-tmp"]=null,r.child(n)})})})})},t.prototype.deleteContainer=function(){var n=this;return n.folderPromise.then(function(n){return n.deleteAsync()})},t.prototype.clearAllCache=function(){var n=this;n.clearCache(),n.clearDataCache()},t.prototype.clearCache=function(){var n=this;n.childs={};for(var t in n.childs)n.childs.hasOwnProperty(t)&&n.childs[t].clearCache()},t.prototype.clearDataCache=function(){var n=this;n.dataCache={};for(var t in n.childs)n.childs.hasOwnProperty(t)&&n.childs[t].clearDataCache()},t}();t.WinRTFilesContainer=s}(t=n.DataContainer||(n.DataContainer={}))}(WinJSContrib||(WinJSContrib={}));
function HSL(n,t,i){var e={h:n,s:t,l:i,addH:function(n){this.h=this.h+n},addS:function(n){this.s=this.s+n},addL:function(n){this.l=this.l+n},toString:function(){return"hsl("+this.h+","+this.s+"%, "+this.l+"%)"},clone:function(n,t,i){var e=new HSL(this.h,this.s,this.l);return e.addH(n),e.addS(t),e.addL(i),e}};return e}var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},WinJSContrib.Utils=WinJSContrib.Utils||{},function(n){n.fn.winControl=function(){return this[0].winControl}}(jQuery),function(n){n.fn.tap=function(n,t){return this.each(function(){WinJSContrib.UI.tap(this,n,t)})},n.fn.untap=function(n){return this.each(function(){WinJSContrib.UI.untap(this)})},jQuery.fn.hatchShow=function(){n(".hsjs").css("visibility","hidden").css("font-size","").css("display","inner-block").css("white-space","pre").each(function(){var t=n(this),i=t.parent();i.hasClass("hatchshow_temp")?i=i.parent():t.wrap("<span class='hatchshow_temp' style='display:block'>");var e=i.width();for(t.width();t.width()<e;){var r=t.fontSize();if(r>200)break;t.css("font-size",r+1+"px"),function(){for(;t.width()>e;){var n=t.fontSize();if(8>n)break;t.css("font-size",n-.1+"px")}}}}).hide().css("visibility","").fadeIn()},jQuery.fn.fontSize=function(){return parseInt(n(this).css("font-size").replace("px",""))}}(jQuery),function(n){n.fn.pressEnterDefaultTo=function(t,i){return this.each(function(){var e=n(this);e.keypress(function(e){var r=e.which?e.which:e.keyCode;if(13==r){var o=i?n(t,i):n(t);jQuery(this).blur(),e.preventDefault(),e.stopPropagation(),o[0].mcnTapTracking&&o[0].mcnTapTracking.callback&&o[0].mcnTapTracking.callback(o[0]),o.focus().click()}})})},n.fn.onPressEnter=function(t){return this.each(function(){var i=n(this);i.keypress(function(n){var i=n.which?n.which:n.keyCode;13==i&&(jQuery(this).blur(),n.preventDefault(),t&&t())})})},n.fn.throttleTextChanged=function(t,i){return this.each(function(){var e=this,r=n(this),o=e.value;r.keydown(function(n){clearTimeout(e.mcnTxtThrottling),e.mcnTxtThrottling=setTimeout(function(){o=e.value,i(e,e.value)},t)}),r.blur(function(n){o!=e.value&&(o=e.value,i(e,e.value))})})}}(jQuery),function(n){n.fn.transitionProperties=function(t,i,e){var r=n(this);return new WinJS.Promise(function(n,o){var s=t+" "+i+"ms ease-out",a=r.css("transition",s);e&&e(a),a.delay(i+10).promise().done(function(){r.css("-ms-transition",""),n(a)},function(){r.css("-ms-transition",""),o(a)})})}}(jQuery),function(n){n.fn.toWinJSPromise=function(){return new WinJS.Promise(function(n,t){var i=this.promise().done(function(){n(i)},function(){t(i)})})}}(jQuery),function(n){n.fn.renderWith=function(t,i){var e=n(t).get(0);return e&&(e=e.winControl),this.each(function(){var t=n(this);e&&e.render(null,i).done(function(n){t.append(n.children[0])})})}}(jQuery),function(n){n.fn.renderWithEach=function(t,i,e){var r=n(t).get(0);return r&&(r=r.winControl),this.each(function(){var t=n(this);r&&i.forEach(function(n,i){r.render(null,n).done(function(i){var r=i.children[0];t.append(r),e&&e(n,r)})})})}}(jQuery),function(n){n.fn.scrollInView=function(t,i){var e=Windows.UI.ViewManagement.ApplicationView.value,r=!0;return(e===Windows.UI.ViewManagement.ApplicationViewState.snapped||e===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(r=!1),this.each(function(){n(this);r?this.offsetParent.scrollLeft=this.offsetLeft-(t?t:0):this.offsetParent.scrollTop=this.offsetTop-(t?t:0)})}}(jQuery),function(n){n.fn.scrollInParentView=function(n,t){var i=Windows.UI.ViewManagement.ApplicationView.value,e=!0;return(i===Windows.UI.ViewManagement.ApplicationViewState.snapped||i===Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)&&(e=!1),this.each(function(){e?this.offsetParent.offsetParent.scrollLeft=this.offsetLeft-(n?n:0):this.offsetParent.offsetParent.scrollTop=this.offsetTop-(n?n:0)})}}(jQuery),function(n){n.fn.loadedPromises=function(t){var i=[];return this.each(function(){var e=(n(this),this),r=new WinJS.Promise(function(n,i){function r(n){e.removeEventListener("error",r),e.removeEventListener("load",o),i({message:"element not loaded",elt:n.currentTarget})}function o(){e.removeEventListener("error",r),e.removeEventListener("load",o),n(e),t&&t(e)}e.addEventListener("error",r),e.addEventListener("load",o,!1),e.naturalWidth>0&&o()});i.push(r)}),i},n.fn.whenLoaded=function(n){var t=this.loadedPromises();return n?void WinJS.Promise.join(t).done(function(t){n(t)}):WinJS.Promise.join(t)},n.fn.afterTransition=function(n,t){var i=[],e=!1;this.each(function(){var n=this,e=new WinJS.Promise(function(i,e){var r=function(t){t.srcElement===n&&o()},o=function(){clearTimeout(timeOutRef),n.removeEventListener("transitionend",r,!1),i()};n.addEventListener("transitionend",r,!1),timeOutRef=setTimeout(o,t||1e3)});i.push(e)});var r=null,o=null,s=new WinJS.Promise(function(n,t){r=n,o=t}),a=WinJS.Promise.join(i);return a.done(function(){return e?(a.cancel(),void o()):(e=!0,n&&n(),void r())},o),s},n.fn.afterAnimation=function(n){var t=[];return this.each(function(){var n=this,i=new WinJS.Promise(function(t,i){function e(i){i.srcElement===currentElement&&(n.removeEventListener("animationend",e),t())}n.addEventListener("animationend",e)});t.push(i)}),WinJS.Promise.join(t).done(function(){n&&n()}),this},n.fn.classBasedAnimation=function(t){return this.each(function(){var i=this;n(i).afterAnimation(function(){n(i).removeClass(t)}),n(i).addClass(t)})}}(jQuery);
!function(){"use strict";var t=WinJS.Class.mix(WinJS.Class.define(function(){this._initObservable()},{}),WinJS.Binding.mixin,WinJS.Binding.expandProperties({isValid:!1,updated:!1}));WinJS.Namespace.define("WinJSContrib.UI",{DataForm:WinJS.Class.mix(WinJS.Class.define(function(e,i){var n=this;this.element=e||document.createElement("FORM"),i=i||{},this.groups=i.groups,this.messages=i.messages,this.rules=i.rules,this.state=new t,this.state.item={},this.allowTooltip=i.allowTooltip||!0,this.workOnCopy=i.workOnCopy||!0,this.tooltipDelay=i.tooltipDelay||4e3,this.tooltipPosition=i.tooltipPosition||"right",this.tooltipTheme=i.tooltipTheme||"tooltipster-error",this.initValidator(),this.element.winControl=this,this.element.mcnDataForm=!0,this.element.classList.add("win-disposable"),WinJSContrib.CrossPlatform&&WinJSContrib.CrossPlatform.crossPlatformClass&&WinJSContrib.CrossPlatform.crossPlatformClass(this.element),WinJS.UI.setOptions(this,i),WinJS.UI.processAll(this.element).done(function(){WinJS.Binding.processAll(n.element,n.state)}),$(".mcn-dataform-cancel",this.element).click(function(t){t.preventDefault(),n.cancel()})},{messages:{get:function(){return this._messages},set:function(t){this._messages=t}},rules:{get:function(){return this._rules},set:function(t){this._rules=t}},groups:{get:function(){return this._groups},set:function(t){this._groups=t}},item:{get:function(){return this.state.item},set:function(t){var e=this;e.workOnCopy?(e.state.item=$.extend(!0,{},t),e.state.refItem=t):e.state.item=t,e.validator.resetForm(),e.autobindFields(),WinJS.Binding.processAll(this.element,this.state).done(function(){var t=e.allowTooltip;e.allowTooltip=!1,e.validator.form(),e.allowTooltip=t,e.checkState(),e.initValidator(),e.state.updated=!1}),e.dispatchEvent("itemchanged",{dataform:this,item:t})}},updated:{get:function(){return this.state.updated},set:function(t){this.state.updated=t,this.dispatchEvent("haschanges")}},autobindFields:function(){var t=this;$("[data-formfield]",t.element).each(function(){var e=this,i=$(e).data("formfield"),n="value";"checkbox"==e.type&&(n="checked"),WinJSContrib.UI.DataFormBinding(t.state.item,i.split("."),e,[n])})},checkState:function(){var t=this.validator.numberOfInvalids();this.state.isValid=0==t},cancel:function(){var t=this;t.workOnCopy&&(t.item=$.extend(!0,{},t.state.refItem))},save:function(){var t=this;t.workOnCopy&&(t.state.updated=!1,t.state.refItem=$.extend(!0,{},t.state.item))},initValidator:function(){var t=this;this.validator=$(this.element).validate({groups:this.groups,rules:this.rules,submitHandler:function(e){t.dispatchEvent("submitted",{item:t.state.item})},invalidHandler:function(e,i){t.checkState()},errorPlacement:function(e,i){if(t.checkState(),t.allowTooltip){var n=$(i);n.tooltipster({trigger:"custom",onlyOne:!1,position:t.tooltipPosition,theme:t.tooltipTheme});var o=n.data("lastError"),r=$(e).text();n.data("lastError",r),""!==r&&r!==o&&(n.tooltipster("content",r),n.tooltipster("show"),n[0].tooltipsterValidationTimeout=setTimeout(function(){n[0].tooltipsterValidationTimeout=null,n.hasClass("tooltipster")&&n.tooltipster("hide")},t.tooltipDelay))}},success:function(e,i){t.checkState();var n=$(i);n[0].tooltipsterValidationTimeout&&(clearTimeout(n[0].tooltipsterValidationTimeout),n[0].tooltipsterValidationTimeout=null),n.hasClass("tooltipstered")&&n.tooltipster("hide")}})},validate:function(){var t=this.validator.form();return t},dispose:function(){WinJS.Utilities.disposeSubTree(this.element)}},{DefaultBindingOptions:{trimText:!0,convertEmptyToNull:!0},Converters:{none:{fromObject:function(t,e){return t.toString()},fromInput:function(t,e){return t}},text:{fromObject:function(t,e){if("undefined"==typeof t||null===t)return"";var i=t.toString();return i},fromInput:function(t,e){var i=t;return i&&e&&e.trimText&&(i=i.trim()),e&&e.convertEmptyToNull&&(i=""===i?null:i),i}},number:{fromObject:function(t,e){return"number"!=typeof t?"":t.toString()},fromInput:function(t,e){return"undefined"!=typeof t&&null!==t?parseFloat(t.toString().replace(",",".").replace(" ","")):null}},"boolean":{fromObject:function(t,e){return"undefined"==typeof t||null===t?"":t.toString()},fromInput:function(t,e){return"true"===t?!0:"false"===t?!1:null}},object:{fromObject:function(t,e){return t},fromInput:function(t,e){return t}},stringifiedObject:{fromObject:function(t,e){return JSON.stringify(t)},fromInput:function(t,e){return JSON.parse(t)}}}}),WinJS.UI.DOMEventMixin,WinJS.Utilities.createEventProperties("itemchanged","haschanges","submitted")),parentDataForm:function(t){for(var e=t.parentNode;e;){if(e.mcnDataForm)return e.winControl;e=e.parentNode}},DataFormBinding:WinJS.Binding.initializer(function(t,e,i,n){function o(){var o=WinJSContrib.Utils.readProperty(t,e);"undefined"==typeof o&&(o=null),o=p.fromObject(o,l),WinJSContrib.Utils.writeProperty(i,n,o)}function r(){if(s.checkState(),!i.id||s.validator.element(i)){var o=WinJSContrib.Utils.getProperty(i,n).propValue;void 0!==o&&(o=p.fromInput(o,l)),WinJSContrib.Utils.writeProperty(t,e,o)}s.updated=!0}function a(){m&&s.validator.element(i)}i.binded&&i.winControl&&i.winControl.dispose();var s=WinJSContrib.UI.parentDataForm(i),l=WinJSContrib.UI.DataForm.DefaultBindingOptions,u=i.getAttribute("data-formfield-options");u&&(l=WinJS.UI.optionsParser(u,window));var d="",c=i.getAttribute("data-forminput");c&&(d=c);var m=!1;i.classList.add("mcn-dataform-field"),i.form||(i.form=s.element);var d="text";$(i).data("formfield-type")?d=$(i).data("formfield-type"):"TEXTAREA"!==i.nodeName&&"undefined"!=typeof i.type&&(d=i.type);var p=WinJSContrib.UI.DataForm.Converters[d]||WinJSContrib.UI.DataForm.Converters.text;i.binded||(i.binded=!0),i.winControl||(i.classList.add("win-disposable"),i.winControl={dispose:function(){i.removeEventListener("change",i.winControl.updateObjectFromInput),i.removeEventListener("blur",i.winControl.validateObjectOnBlur),d&&i.removeEventListener(d,i.winControl.updateObjectFromInput)}}),i.winControl.updateObjectFromInput=r,i.winControl.validateObjectOnBlur=a,d&&i.addEventListener(d,i.winControl.updateObjectFromInput),i.addEventListener("change",i.winControl.updateObjectFromInput),i.id&&i.addEventListener("blur",a);var f={};return f[e]=o,WinJS.Binding.bind(t,f)})})}();
var WinJSContrib;!function(e){var i;!function(i){var a;!function(i){function a(e){return e&&"number"==typeof e?{duration:e}:e||{}}function n(e,i){i=a(i);var n={property:"opacity",delay:r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:83,1,void 0!==i.maxdelay?i.maxdelay:333),duration:i.duration||167,timing:i.easing||"ease-in-out",to:0};return WinJS.UI.executeTransition(e,n)}function t(e,i){return i=a(i),WinJS.UI.executeTransition(e,{property:"opacity",delay:r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:83,1,void 0!==i.maxdelay?i.maxdelay:333),duration:i.duration||167,timing:i.easing||"ease-in-out",to:1})}function r(e,i,a,n){return function(t){for(var r=e,o=0;t>o;o++)i*=a,r+=i;return n&&(r=Math.min(r,n)),r}}function o(e,i){i=a(i);var n={property:"opacity",delay:r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:83,1,void 0!==i.maxdelay?i.maxdelay:333),duration:i.duration||160,timing:i.easing||"ease-in",to:0};return WinJS.UI.executeTransition(e,n)}function d(e,i){i=a(i);var n=r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:120,1,void 0!==i.maxdelay?i.maxdelay:333),t={keyframe:"WinJSContrib-EnterPage",property:U.transform.cssName,delay:n,duration:i.duration||600,timing:i.easing||"cubic-bezier(0.1, 0.9, 0.2, 1)"},o=WinJS.UI.executeAnimation(e,t),d={property:"opacity",delay:n,duration:i.duration||600,timing:i.easing||"ease-out",to:1},u=WinJS.UI.executeTransition(e,d);return WinJS.Promise.join([o,u])}function u(i,n,t,o){o=a(o);var d=o.duration||t?250:150,u=(o.delay||5,r(void 0!==o.delay?o.delay:5,void 0!==o.itemdelay?o.itemdelay:83,1,void 0!==o.maxdelay?o.maxdelay:333)),m=e.UI.Animation.Easings.easeInQuad;t&&(m=e.UI.Animation.Easings.easeOutQuad);var s={keyframe:n,property:U.transform.cssName,delay:u,duration:d,timing:o.easing||m},y=WinJS.UI.executeAnimation(i,s),c={property:"opacity",delay:u,duration:d/2,timing:m,from:0,to:1};t||(c.from=1,c.to=0,c.delay<d/2&&(c.delay=d/2));var l=WinJS.UI.executeTransition(i,c);return WinJS.Promise.join([y,l])}function m(e,i){return u(e,"WinJSContrib-slideFromBottom",!0,i)}function s(e,i){return u(e,"WinJSContrib-slideFromTop",!0,i)}function y(e,i){return u(e,"WinJSContrib-slideFromLeft",!0,i)}function c(e,i){return u(e,"WinJSContrib-slideFromRight",!0,i)}function l(e,i){return u(e,"WinJSContrib-slideToBottom",!1,i)}function b(e,i){return u(e,"WinJSContrib-slideToTop",!1,i)}function g(e,i){return u(e,"WinJSContrib-slideToLeft",!1,i)}function f(e,i){return u(e,"WinJSContrib-slideToRight",!1,i)}function p(e,i){i=a(i);var n=r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:83,1,void 0!==i.maxdelay?i.maxdelay:333),t={keyframe:"WinJSContrib-tabExitPage",property:U.transform.cssName,delay:n,duration:i.duration||160,timing:"ease-in"},o=WinJS.UI.executeAnimation(e,t),d={property:"opacity",delay:n,duration:i.duration||160,timing:"linear",from:1,to:0},u=WinJS.UI.executeTransition(e,d);return WinJS.Promise.join([o,u])}function x(i,n){n=a(n);var t=r(void 0!==n.delay?n.delay:5,void 0!==n.itemdelay?n.itemdelay:83,1,void 0!==n.maxdelay?n.maxdelay:333),o=WinJS.UI.executeAnimation(i,{keyframe:"WinJSContrib-tabEnterPage",property:U.transform.cssName,delay:t,duration:n.duration||250,timing:e.UI.Animation.Easings.easeOutQuad}),d=WinJS.UI.executeTransition(i,{property:"opacity",delay:t,duration:n.duration||250,timing:"ease-out",from:0,to:1});return WinJS.Promise.join([o,d])}function v(i,n){n=a(n);var t="WinJSContrib-exitGrow";n.exagerated&&(t+="-exagerated");var o=r(void 0!==n.delay?n.delay:5,void 0!==n.itemdelay?n.itemdelay:83,1,void 0!==n.maxdelay?n.maxdelay:333),d=n.duration||250,u=WinJS.UI.executeAnimation(i,{keyframe:t,property:U.transform.cssName,delay:o,duration:d,timing:n.easing||e.UI.Animation.Easings.easeInQuad}),m=WinJS.UI.executeTransition(i,{property:"opacity",delay:o,duration:d,timing:n.easing||e.UI.Animation.Easings.easeInQuint,from:1,to:0});return WinJS.Promise.join([u,m])}function S(i,n){n=a(n);var t="WinJSContrib-exitShrink";n.exagerated&&(t+="-exagerated");var o=n.duration||250,d=r(void 0!==n.delay?n.delay:10,void 0!==n.itemdelay?n.itemdelay:83,1,void 0!==n.maxdelay?n.maxdelay:333),u=WinJS.UI.executeAnimation(i,{keyframe:t,property:U.transform.cssName,delay:d,duration:o,timing:n.easing||e.UI.Animation.Easings.easeInQuad}),m=WinJS.UI.executeTransition(i,{property:"opacity",delay:d,duration:o,timing:e.UI.Animation.Easings.easeInQuint,from:1,to:0});return WinJS.Promise.join([u,m])}function I(e,i){i=a(i);var n=r(void 0!==i.delay?i.delay:5,void 0!==i.itemdelay?i.itemdelay:83,1,void 0!==i.maxdelay?i.maxdelay:333),t=i.duration||250,o=WinJS.UI.executeAnimation(e,{keyframe:"WinJSContrib-shrinkAndFall",property:U.transform.cssName,delay:n,duration:t,timing:i.easing||"ease-in"}),d=WinJS.UI.executeTransition(e,{property:"opacity",delay:n,duration:t,timing:"ease-in",from:1,to:0});return WinJS.Promise.join([o,d])}function J(i,n){n=a(n);var t="WinJSContrib-enterShrink";n.exagerated&&(t+="-exagerated");var o=n.duration||350,d=r(void 0!==n.delay?n.delay:5,void 0!==n.itemdelay?n.itemdelay:83,1,void 0!==n.maxdelay?n.maxdelay:333),u=WinJS.UI.executeAnimation(i,{keyframe:t,property:U.transform.cssName,delay:d,duration:o,timing:n.easing||e.UI.Animation.Easings.easeOutQuad}),m=WinJS.UI.executeTransition(i,{property:"opacity",delay:d,duration:o,timing:n.easing||e.UI.Animation.Easings.easeOutQuint,from:0,to:1});return WinJS.Promise.join([u,m])}function W(i,n){n=a(n);var t="WinJSContrib-enterGrow";n.exagerated&&(t+="-exagerated");var o=n.duration||350,d=r(void 0!==n.delay?n.delay:5,void 0!==n.itemdelay?n.itemdelay:83,1,void 0!==n.maxdelay?n.maxdelay:333),u=WinJS.UI.executeAnimation(i,{keyframe:t,property:U.transform.cssName,delay:d,duration:o,timing:n.easing||e.UI.Animation.Easings.easeOutQuad}),m=WinJS.UI.executeTransition(i,{property:"opacity",delay:d,duration:o,timing:e.UI.Animation.Easings.easeOutQuint,from:0,to:1});return WinJS.Promise.join([u,m])}i.Easings={easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"};var U=WinJS.Utilities._browserStyleEquivalents||{transform:{cssName:"transform"}};i.fadeOut=n,i.fadeIn=t,i.pageExit=o,i.enterPage=d,i.slideFromBottom=m,i.slideFromTop=s,i.slideFromLeft=y,i.slideFromRight=c,i.slideToBottom=l,i.slideToTop=b,i.slideToLeft=g,i.slideToRight=f,i.tabExitPage=p,i.tabEnterPage=x,i.exitGrow=v,i.exitShrink=S,i.shrinkAndFall=I,i.enterShrink=J,i.enterGrow=W}(a=i.Animation||(i.Animation={}))}(i=e.UI||(e.UI={}))}(WinJSContrib||(WinJSContrib={}));
!function(){"use strict";var e={rectangle:{morphpath:"M286,113c0,0-68.8,6-136,6c-78.2,0-137-6-137-6S6,97.198,6,62.5C6,33.999,13,12,13,12s59-7,137-7c85,0,136,7,136,7s8,17.598,8,52C294,96.398,286,113,286,113z",svg:'<svg width="100%" height="100%" viewBox="0 0 300 125" preserveAspectRatio="none"><path d="M286.5,113c0,0-104,0-136.5,0c-35.75,0-136.5,0-136.5,0s0-39.417,0-52.5c0-12.167,0-48.5,0-48.5s101.833,0,136.5,0c33.583,0,136.5,0,136.5,0s0,35.917,0,48.5C286.5,73.167,286.5,113,286.5,113z"/></svg>'},roundedrectangle:{morphpath:"M287,95.25c0,11.046-5.954,19.75-17,19.75c0,0-90-4-120-4s-120,4-120,4c-11.046,0-17.25-9.5-17.25-20.5c0-8.715,0.25-10.75,0.25-34s-0.681-26.257-1-33.75C11.5,15,18.954,10,30,10c0,0,90,3,120,3s120-3,120-3c11.046,0,17.75,6.5,17,20c-0.402,7.239,0,6.75,0,30.5C287,83.5,287,84.75,287,95.25z",svg:'<svg width="100%" height="100%" viewBox="0 0 300 125" preserveAspectRatio="none"><path d="M290,95c0,11.046-8.954,20-20,20c0,0-90,0-120,0s-120,0-120,0c-11.046,0-20-9-20-20c0-8.715,0-25.875,0-34.5c0-7.625,0-22.774,0-30.5c0-11.625,8.954-20,20-20c0,0,90,0,120,0s120,0,120,0c11.046,0,20,8.954,20,20c0,7.25,0,22.875,0,30.5C290,69.125,290,84.5,290,95z"/></svg>'},round:{morphpath:"M251,150c0,93.5-29.203,143-101,143S49,243.5,49,150C49,52.5,78.203,7,150,7S251,51.5,251,150z",svg:'<svg width="100%" height="100%" viewBox="0 0 300 300" preserveAspectRatio="none"><path d="M281,150c0,71.797-59.203,131-131,131S19,221.797,19,150S78.203,19,150,19S281,78.203,281,150z"/></svg>'}};WinJS.Namespace.define("WinJSContrib.UI",{ElasticButton:WinJS.Class.mix(WinJS.Class.define(function(e,t){this.element=e||document.createElement("DIV"),t=t||{},this.element.winControl=this,this.behavior={speed:{reset:800,active:150},easing:{reset:mina.elastic,active:mina.easein}},this.element.classList.add("mcn-elasticbutton"),this.element.classList.add("win-disposable"),WinJS.UI.setOptions(this,t)},{kind:{get:function(){return this._kind},set:function(e){this._kind=e,this.render()}},render:function(){var t=this;this.element.classList.add("mcn-elasticbutton-"+t.kind);var n=!1;if(t.contentElement||(t.contentElement=document.createElement("DIV"),t.contentElement.className="mcn-elasticbutton-content",WinJSContrib.Utils.moveChilds(t.element,t.contentElement),n=!0),t.bgElement||(t.bgElement=document.createElement("DIV"),t.bgElement.className="mcn-elasticbutton-bg",t.element.appendChild(t.bgElement)),n&&t.element.appendChild(t.contentElement),!t.contentElement){for(t.contentElement=document.createElement("DIV"),t.contentElement.className="mcn-elasticbutton-content";t.element.children.length>0;)t.contentElement.appendChild(t.element.children[0]);t.element.appendChild(t.contentElement)}t.currentKind=e[this.kind],t.currentKind&&(t.bgElement.innerHTML=t.currentKind.svg,t.snap=Snap(t.bgElement.querySelector("svg")),t.pathEl=t.snap.select("path"),t.paths={reset:t.pathEl.attr("d"),active:t.currentKind.morphpath},t.eventTracker&&t.eventTracker.dispose(),t.eventTracker=new WinJSContrib.UI.EventTracker,t.eventTracker.addEvent(t.element,"pointerdown",function(e){t._ptdown(e)}),t.eventTracker.addEvent(t.element,"pointerup",function(e){t._ptup(e)}),t.eventTracker.addEvent(t.element,"pointerleave",function(e){t._ptup(e)}))},_ptdown:function(e){this.element.classList.add("pressed"),this.pathEl.stop().animate({path:this.paths.active},this.behavior.speed.active,this.behavior.easing.active)},_ptup:function(e){this.element.classList.remove("pressed"),this.pathEl.stop().animate({path:this.paths.reset},this.behavior.speed.reset,this.behavior.easing.reset)},dispose:function(){this.eventTracker&&this.eventTracker.dispose(),WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("myevent"))})}();
!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{FOWrapper:WinJS.Class.mix(WinJS.Class.define(function(e,t){this.element=e||document.createElement("DIV"),t=t||{},this.element.winControl=this,this.element.classList.add("mcn-fowrapper"),this.element.classList.add("mcn-layout-ctrl"),this.element.classList.add("win-disposable"),WinJS.UI.setOptions(this,t),this.render()},{someProperty:{get:function(){return this._someProperty},set:function(e){this._someProperty=e}},render:function(){var e=this;e.wrapperId=WinJSContrib.Utils.guid();var t=document.createElement("BODY");t.className="mcn-fowrapper-content",t.style.width="100%",t.style.height="100%",WinJSContrib.Utils.moveChilds(e.element,t),e.element.innerHTML='<svg id="'+e.wrapperId+'" class="mcn-fowrapper-svg" xmlns="http://www.w3.org/2000/svg" style="width:100%; height: 100%"><defs><filter id="blur-'+e.wrapperId+'" x="0" y="0"><feGaussianBlur class="gblur" in="SourceGraphic" stdDeviation="0" /></filter></defs><foreignObject class="fowrapper" width="100%" height="100%" requiredExtensions="http://www.w3.org/1999/xhtml" filter="url(#blur-'+e.wrapperId+')"></foreignObject></svg>';var i=e.element.querySelector(".fowrapper");e.svg=e.element.querySelector("svg"),e.container=i,e.content=t,e.blurFilter=e.element.querySelector(".gblur"),e.sblurFilter=Snap(e.blurFilter),i.appendChild(t)},blurTo:function(e,t,i){var r=this;return r.sblurFilter.stop(),t?(r.sblurFilter.animate({stdDeviation:e},t,i||mina.easeout),void r.dispatchEvent("blur")):void r.blurFilter.setAttribute("stdDeviation",e)},updateLayout:function(){this.container&&(this.container.setAttribute("width","100%"),this.container.setAttribute("height","100%"))},dispose:function(){WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("blur"))})}();
var WinJSContrib=WinJSContrib||{};WinJSContrib.UI=WinJSContrib.UI||{},function(){"use strict";WinJSContrib.UI.MultiPassRenderer=WinJS.Class.define(function(e,t){t=t||{},this.items=[],this.element=e,this._scrollProcessor=null,this._tolerance=1,this._virtualize=!1,this._scrollContainer=t.scrollContainer||null,this._multipass=t.multipass||!1,this._orientation=t.orientation||"",this.itemClassName=t.itemClass||t.className||t.itemClassName,this.itemTemplate=WinJSContrib.Utils.getTemplate(t.template||t.itemTemplate),this.itemInvoked=t.invoked||t.itemInvoked,this.onitemContent=t.onitemContent,this._onScrollBinded=this._onScroll.bind(this),e&&(e.className=e.className+" mcn-items-ctrl mcn-layout-ctrl win-disposable")},{dispose:function(){var e=this;WinJSContrib.UI.untapAll(e.element),WinJS.Utilities.disposeSubTree(e.element),e._unregisterScrollEvents(),e._scrollContainer=null,e.element=null,e._scrollProcessor=null,e.rect=null,e.items=[]},clear:function(){var e=this;WinJS.Utilities.disposeSubTree(e.element),e.element.innerHTML=""},multipass:{get:function(){return this._multipass},set:function(e){this._multipass=e,this.refreshScrollEvents()}},tolerance:{get:function(){return this._tolerance},set:function(e){this._tolerance=e}},virtualize:{get:function(){return this._virtualize},set:function(e){this._virtualize=e}},orientation:{get:function(){return this._orientation},set:function(e){this._orientation=e,this.refreshScrollEvents()}},scrollContainer:{get:function(){return this._scrollContainer},set:function(e){this._unregisterScrollEvents(),this._scrollContainer=e,this._registerScrollEvents()}},_onScroll:function(){var e=this;e.scrollContainer&&e._scrollProcessor&&(e._scrollRequest&&cancelAnimationFrame(e._scrollRequest),e._scrollRequest=requestAnimationFrame(function(){e.checkRendering()}))},_unregisterScrollEvents:function(){this._scrollProcessor=null,this.clearOffsets(),this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",this._onScrollBinded)},_registerScrollEvents:function(){var e=this;e.scrollContainer&&(this.scrollContainer.addEventListener("scroll",this._onScrollBinded),"vertical"==e.orientation?"section"==e.multipass?e._scrollProcessor=function(){e._checkSection(e._vIsInView)}:"item"==e.multipass&&(e._scrollProcessor=function(){e._checkItem(e._vIsInView)}):"section"==e.multipass?e._scrollProcessor=function(){e._checkSection(e._hIsInView)}:"item"==e.multipass&&(e._scrollProcessor=function(){e._checkItem(e._hIsInView)}))},refreshScrollEvents:function(){this._unregisterScrollEvents(),this._registerScrollEvents(),this.clearOffsets()},_vIsInView:function(e,t,n){var i=t.clientHeight*n;return e.y>=t.scrollTop-i&&e.y<=t.scrollTop+t.clientHeight+i?!0:e.y+e.height>=t.scrollTop-i&&e.y+e.height<=t.scrollTop+t.clientHeight+i?!0:e.y<=t.scrollTop-i&&e.y+e.height>=t.scrollTop+t.clientHeight+i?!0:!1},_hIsInView:function(e,t,n){var i=t.clientWidth*(n||0);return e.x>=t.scrollLeft-i&&e.x<=t.scrollLeft+t.clientWidth+i?!0:e.x+e.width>=t.scrollLeft-i&&e.x+e.width<=t.scrollLeft+t.clientWidth+i?!0:e.x<=t.scrollLeft-i&&e.x+e.width>=t.scrollLeft+t.clientWidth+i?!0:!1},clearOffsets:function(){var e=this;e.element&&(e.rect=null,e.items.forEach(function(e){e.rect=null}))},updateLayout:function(){var e=this;e.element&&e.refreshScrollEvents()},_checkSection:function(e,t,n){var i=this;if(i.element){if(t=t||0,!i.rect&&i.items&&i.items.length?i.rect=WinJSContrib.UI.offsetFrom(i.element,i.scrollContainer):(i.rect=i.rect||{x:0,y:0,width:0,height:0},i.rect.width=i.element.clientWidth,i.rect.height=i.element.clientHeight),e(i.rect,i.scrollContainer,t)){if(n)return!0;i.renderItemsContent(),i.onrendersection&&i.onrendersection()}else i.virtualize&&t>0&&i.items&&i.items.length&&i.items[0].rendered&&i.items.forEach(function(e){e.empty()});0==t&&i.tolerance>0&&setImmediate(function(){i._checkSection(e,i.tolerance)})}},_checkItem:function(e,t){var n=this;if(n.element){t=t||0;var i=!0;n._checkSection(e,t,!0)?(n.items.forEach(function(r){r.rect||(r.rect=WinJSContrib.UI.offsetFrom(r.element,n.scrollContainer)),i&=r.rendered,!r.rendered&&e(r.rect,n.scrollContainer,t)?r.render():r.rendered&&n.virtualize&&t>0&&!e(r.rect,n.scrollContainer,t)&&r.empty()}),n.allRendered=i):t>0&&n.items.length&&(n.items[0].rendered||n.items[n.items.length-1].rendered)&&n.items.forEach(function(i){i.rect||(i.rect=WinJSContrib.UI.offsetFrom(i.element,n.scrollContainer)),n.virtualize&&!e(i.rect,n.scrollContainer,t)&&i.empty()}),0==t&&n.tolerance>0&&setImmediate(function(){n._checkItem(e,n.tolerance)})}},prepareItems:function(e,t){var n=this;e=e||[],t=t||{};var i=(e.length,t.itemInvoked||n.itemInvoked);"string"==typeof i&&(i=WinJSContrib.Utils.resolveMethod(n.element,i));var r=WinJSContrib.Utils.getTemplate(t.template)||n.itemTemplate,l=t.itemClassName||n.itemClassName,o=t.onitemInit||n.onitemInit,s=t.onitemContent||n.onitemContent,c=n.element,m=n.items;e.forEach(function(e){var t=new WinJSContrib.UI.MultiPassItem(n,null,{data:e,template:r,className:l,itemInvoked:i,onitemInit:o,onitemContent:s});m.push(t),c.appendChild(t.element)}),(t.renderItems||!this.multipass)&&n.renderItemsContent()},checkRendering:function(){var e=this;e.element&&e._scrollProcessor&&e._scrollProcessor()},renderItemsContent:function(){var e=this;e.element&&(e.items.forEach(function(e){e.rendered||e.render()}),e.allRendered=!0)}}),WinJSContrib.UI.MultiPassItem=WinJS.Class.define(function(e,t,n){n=n||{};var i=this;i.renderer=e,i.element=t||document.createElement("DIV"),i.element.className=i.element.className+" "+n.className+" mcn-multipass-item unloaded win-disposable",i.element.winControl=i,i.itemInvoked=n.itemInvoked,i.itemDataPromise=WinJS.Promise.as(n.data),i.itemTemplate=n.template,i.rendered=!1,i.onitemContent=n.onitemContent,n.onitemInit&&n.onitemInit(this)},{dispose:function(){var e=this;e.renderer=null,e.element=null,e.itemInvoked=null,e.itemData=null,e.itemDataPromise=null,e.itemTemplate=null,e.onitemContent=null},render:function(e){var t=this;return t.element&&t.itemTemplate&&!t.rendered?(t.rendered=!0,t._renderContent()):WinJS.Promise.wrap(t.contentElement)},empty:function(){var e=this;e.element&&e.rendered&&(WinJSContrib.UI.untapAll(e.element),e.element.classList.remove("loaded"),e.element.innerHTML="",e.rendered=!1)},_renderItemContent:function(e){var t=this;if(t.element)return t.element.appendChild(e),t.itemInvoked&&("string"==typeof t.itemInvoked&&(t.itemInvoked=WinJSContrib.Utils.resolveMethod(t.element,t.itemInvoked)),t.itemInvoked&&WinJSContrib.UI.tap(t.element,function(e){t.itemInvoked(t)})),t.onitemContent?t.onitemContent(t.itemData,e):t.renderer.onitemContent&&t.renderer.onitemContent(t.itemData,e),setImmediate(function(){t.element&&(t.element.classList.remove("unloaded"),t.element.classList.add("loaded"))}),t.rendered=!0,t.contentElement=e,e},_renderContent:function(){var e=this;return e.element&&e.itemTemplate?e.itemDataPromise.then(function(t){return e.itemData=t,e.itemTemplate.render(t).then(function(t){e._renderItemContent(t)})}):WinJS.Promise.wrap()}})}();
!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{GridControl:WinJS.Class.define(function(e,t){var i=this;t=t||{},i.element=e,i.element.className=i.element.className+" mcn-grid-ctrl mcn-layout-ctrl win-disposable",i.element.winControl=i,i.renderer=new WinJSContrib.UI.MultiPassRenderer(i.element,{multipass:t.multipass,itemClassName:t.itemClassName,itemTemplate:t.itemTemplate,itemInvoked:t.itemInvoked}),i.layouts=t.layouts,i.defaultLayout={layout:t.layout||"none",itemsPerColumn:t.itemsPerColumn?t.itemsPerColumn:void 0,itemsPerRow:t.itemsPerRow?t.itemsPerRow:void 0,cellSpace:t.cellSpace?t.cellSpace:10,cellWidth:t.cellWidth?t.cellWidth:void 0,cellHeight:t.cellHeight?t.cellHeight:void 0},i.autolayout=t.autolayout||!0;var l=WinJSContrib.Utils.getScopeControl(i.element);l&&l.pageLifeCycle?l.pageLifeCycle.steps.layout.attach(function(){i.autolayout&&i.layout()}):l&&l.elementReady&&l.elementReady.then(function(){l.readyComplete.then(function(){i.autolayout&&i.layout()})})},{scrollContainer:{get:function(){return this.renderer.scrollContainer},set:function(e){this.renderer.scrollContainer=e}},autolayout:{get:function(){return this._autolayout},set:function(e){this._autolayout=e}},layouts:{get:function(){return this.gridLayouts},set:function(e){this.gridLayouts=e}},multipass:{get:function(){return this.renderer.multipass},set:function(e){this.renderer.multipass=e}},itemInvoked:{get:function(){return this.renderer.itemInvoked},set:function(e){this.renderer.itemInvoked=e}},itemTemplate:{get:function(){return this.renderer.itemTemplate},set:function(e){this.renderer.itemTemplate=e}},itemClassName:{get:function(){return this.renderer.itemClassName},set:function(e){this.renderer.itemClassName=e}},items:{get:function(){},set:function(e){e&&e.length&&this.prepareItems(e)}},prepareItems:function(e,t){if(this.element){var i=WinJSContrib.Utils.getParentControlByClass("mcn-layout-ctrl",this.element);!this.renderer.multipass&&i&&i.multipass&&(this.renderer.multipass=i.multipass),this.renderer.prepareItems(e,t)}},renderItemsContent:function(){this.renderer&&this.renderer.renderItemsContent()},resetElement:function(e,t){var i=e.style;t&&i.position&&(i.position=""),!t&&i.display&&(i.display=""),i.width&&(i.width=""),i.height&&(i.height=""),i.minWidth&&(i.minWidth=""),i.minHeight&&(i.minHeight=""),i.left&&(i.left=""),i.top&&(i.top="")},clearContent:function(){var e=this;e.renderer.clear()},clearLayout:function(){var e=this;if(e.resetElement(e.element,!1),e.element.children.length)for(var t=0,i=e.element.children.length;i>t;t++)e.resetElement(e.element.children[t],!0)},fill:function(e,t,i,l,n){if(e.length<t+l)for(var a=e.length;t+l>a;a++)e.push([]);for(var a=t;t+l>a;a++){var r=e[a];if(r.length<i+n)for(var o=r.length;i+n>o;o++)r.push(!1);for(var o=i;i+n>o;o++)r[o]=!0}},fit:function(e,t,i,l,n,a,r){if(r&&n>r&&0===i)return!0;if(a&&l>a&&0===t)return!0;if(a&&t+l>a)return!1;if(r&&i+n>r)return!1;for(var o=t;t+l>o;o++){var s=e[o];if(s)for(var h=i;i+n>h;h++)if(s[h]===!0)return!1}return!0},firstFit:function(e,t,i,l,n){for(var a=this,r=0;n*l*2>r;r++){var o=e[r];if(!o)return{x:r,y:0};for(var s=0;l>s;s++)if(o[s]!==!0&&a.fit(e,r,s,t,i,void 0,l))return{x:r,y:s}}return void 0},visibleChilds:function(){for(var e=this,t=[],i=0,l=e.element.children.length;l>i;i++){var n=e.element.children[i],a=window.getComputedStyle(n);"none"!=a.display&&"hidden"!=a.visibility&&t.push(n)}return t},GridLayoutsImpl:{none:function(){},flexhorizontal:function(){var e=this;e.renderer.orientation="horizontal",e.element.style.position="relative",e.element.style.display="flex",e.element.style.flexFlow="column wrap",e.element.style.alignContent="flex-start",e.element.style.width&&(e.element.style.width=""),e.element.style.height="",e.element.clientHeight?e.element.style.height=e.element.clientHeight+"px":e.element.style.height="";var t=Math.floor(e.element.clientHeight/(e.data.cellHeight+e.data.cellSpace));if(t){var i=e.visibleChilds(),l=Math.ceil(i.length/t);e.element.style.minWidth=(e.data.cellWidth+e.data.cellSpace)*l+"px"}},flexvertical:function(){var e=this;e.renderer.orientation="vertical",e.element.style.position="relative",e.element.style.display="flex",e.element.style.flexFlow="row wrap",e.element.style.alignContent="flex-start",e.element.style.width="",e.element.clientWidth?e.element.style.width=e.element.clientWidth+"px":e.element.style.width="",e.element.style.height&&(e.element.style.height="")},hbloc:function(){var e=this;e.renderer.orientation="horizontal",e.element.style.position="relative",e.element.style.height="";var t=e.element.clientHeight;if(t){var i=e.data.cellWidth,l=e.data.cellSpace,n=1,a=0,r=0,o=e.visibleChilds();o.forEach(function(e){"absolute"!=e.style.position&&(e.style.position="absolute");var o=e.clientHeight;r+o>t&&(n++,a=a+l+i,r=0),e.style.left!=a+"px"&&(e.style.left=a+"px"),e.style.top!=r+"px"&&(e.style.top=r+"px"),r+=o}),a+=i,e.element.style.width!=a+"px"&&(e.element.style.width=a+"px")}},horizontal:function(){var e=this;e.renderer.orientation="horizontal",e.element.style.position="relative",e.element.style.height="";var t=e.element.clientHeight;if(t){var i=Math.floor(t/(e.data.cellHeight+e.data.cellSpace));0>=i&&(i=1);var l=e.data.cellWidth,n=e.data.cellHeight,a=e.data.cellSpace,r=1,o=1;e.data.itemsPerColumn&&(i=e.data.itemsPerColumn,n=(t-(i-1)*a)/i>>0,l=e.data.cellWidth*n/e.data.cellHeight>>0,r=l/e.data.cellWidth,o=n/e.data.cellHeight);var s=[[]],h=e.visibleChilds();h.forEach(function(t){t.style.position="absolute";var h=t.offsetWidth*r,d=t.offsetHeight*o,c=h/l>>0,u=d/n>>0,m=e.firstFit(s,c,u,i,e.element.children.length);m||(m={x:0,y:0}),e.fill(s,m.x,m.y,c,u);var f=m.x*(l+a),y=m.y*(n+a),p=c*l+(c-1)*a,v=u*n+(u-1)*a;t.style.left=f+"px",t.style.top=y+"px",t.style.width=p+"px",t.style.height=v+"px"});var d=s.length*(l+a);e.element.style.width=d+"px"}},vertical:function(e){var t=this;t.renderer.orientation="vertical",t.element.style.width="",t.element.style.position="relative";var i=t.element.clientWidth;if(i){var l=Math.floor(i/(t.data.cellWidth+t.data.cellSpace));0>=l&&(l=1);var n=t.data.cellWidth,a=t.data.cellHeight,r=t.data.cellSpace,o=1,s=1;t.data.itemsPerRow&&(l=t.data.itemsPerRow,n=(i-(l-1)*r)/l>>0,a=t.data.cellHeight*n/t.data.cellWidth>>0,o=n/t.data.cellWidth,s=a/t.data.cellHeight);var h=[[]],d=t.visibleChilds();d.forEach(function(e){e.style.position="absolute";var i=e.offsetWidth*o,d=e.offsetHeight*s,c=i/n>>0,u=d/a>>0,m=t.firstFit(h,u,c,l,t.element.children.length);t.fill(h,m.x,m.y,u,c);var f=m.y*(n+r),y=m.x*(a+r);e.style.left=f+"px",e.style.top=y+"px",e.style.width=c*n+(c-1)*r+"px",e.style.height=u*a+(u-1)*r+"px"});var c=h.length*(a+r);t.element.style.height=c+"px"}}},layout:function(){var e=this;if(e.element){var t=e.data;if(e.data=e.getLayout(),e.data){if(e.data.cellSpace=void 0!=e.data.cellSpace?e.data.cellSpace:void 0!=e.defaultLayout.cellSpace?e.defaultLayout.cellSpace:10,e.data.cellWidth=e.data.cellWidth||e.defaultLayout.cellWidth||0,e.data.cellHeight=e.data.cellHeight||e.defaultLayout.cellHeight||0,(!e.data.cellWidth||!e.data.cellHeight)&&e.element&&e.element.childNodes&&e.element.children.length>0){var i=e.visibleChilds();if(i&&i.length){var l=i[0],n=l.clientWidth,a=l.clientHeight,r=i.length;r>10&&(r=10);for(var o=0,r=i.length;r>o;o++){var s=i[o];(0==n||s.clientWidth<n)&&(n=s.clientWidth),(0==a||s.clientHeight<a)&&(a=s.clientHeight)}e.data.cellWidth=n,e.data.cellHeight=a}}var h=!t||e.data.layout!==t.layout;if(e.data.layout){var d=e.GridLayoutsImpl[e.data.layout.toLowerCase()];d&&(h&&e.changeLayout(),d.bind(e)(h),e.data.applyed=!0)}e.renderer.checkRendering()}}},changeLayout:function(){var e=this;e.clearLayout(),e.renderer.updateLayout()},updateLayout:function(e,t,i){var l=this;l.element&&l.layout()},getLayout:function(){var e=this,t=void 0;if(e.gridLayouts)for(var i in e.gridLayouts){var l=e.gridLayouts[i];if(e.gridLayouts.hasOwnProperty(i))if(l.query){var n=window.matchMedia(l.query);n.matches&&(t=l)}else t||(t=l);else t||(t=l)}return t||(t=e.defaultLayout),JSON.parse(JSON.stringify(t))},dispose:function(){this.element=null,this.renderer.dispose(),WinJS.Utilities.disposeSubTree&&WinJS.Utilities.disposeSubTree(this.element)}})}),WinJSContrib.UI.WebComponents&&WinJSContrib.UI.WebComponents.register("mcn-grid",WinJSContrib.UI.GridControl,{properties:["multipass","autolayout","layouts","itemInvoked","itemTemplate","itemClassName","items"]})}();
!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{AspectRatio:WinJS.Class.mix(WinJS.Class.define(function(t,e){this.element=t||document.createElement("DIV"),e=e||{},this.element.winControl=this,this.element.style.display="none",this.element.classList.add("mcn-aspectratio"),this.element.classList.add("win-disposable"),this.element.classList.add("mcn-layout-ctrl"),WinJS.UI.setOptions(this,e),this.render()},{baseWidth:{get:function(){return this._baseWidth},set:function(t){this._baseWidth=t}},baseWidthMin:{get:function(){return this._baseWidthMin},set:function(t){this._baseWidthMin=t}},baseWidthMargin:{get:function(){return this._baseWidthMargin||0},set:function(t){this._baseWidthMargin=t}},baseHeight:{get:function(){return this._baseHeight},set:function(t){this._baseHeight=t}},baseHeightMin:{get:function(){return this._baseHeightMin},set:function(t){this._baseHeightMin=t}},baseHeightMargin:{get:function(){return this._baseHeightMargin||0},set:function(t){this._baseHeightMargin=t}},ratio:{get:function(){return this._ratio},set:function(t){this._ratio=t}},basedOn:{get:function(){return this._basedOn},set:function(t){this._basedOn=t}},target:{get:function(){return this._target},set:function(t){this._target=t}},render:function(){var t=this;t.styleElt||(t.styleElt=document.createElement("STYLE"),t.element.appendChild(t.styleElt)),t.updateLayout()},pageLayout:function(){this.updateLayout()},updateLayout:function(){var t=this;t.parentpage||(t.parentpage=WinJSContrib.Utils.getScopeControl(t.element)),t.container||(t.container=t.element.parentElement),t.container&&t.target&&("height"==t.basedOn?t.updateLayoutBasedOnHeight():t.updateLayoutBasedOnWidth())},updateLayoutBasedOnWidth:function(){var t=this,e=t.target;t.prefix&&(e=t.prefix+" "+e);var i=t.parentpage.element;if(t.baseWidth){var n=(t.container.clientWidth/t.baseWidth<<0)+1,a=(t.container.clientWidth/n<<0)-t.baseWidthMargin-.25;if(t.ratio){var s=a/t.ratio<<0;t.styleElt.innerHTML=e+"{ width: "+a+"px; height:"+s+"px}"}else t.styleElt.innerHTML=e+"{ width: "+a+"px; }"}else if(t.ratio){var r=t.container.querySelectorAll(t.target),h=r[0].clientWidth;r[0].clientHeight;if(h>0){var s=h/t.ratio<<0;if(t.max){var l=i.clientHeight*t.max/100<<0;s>l&&(s=l)}t.styleElt.innerHTML=e+"{ height:"+s+"px}"}}else console.warn("aspect ratio control must have baseWidth and/or ratio")},updateLayoutBasedOnHeight:function(){var t=this,e=t.target;if(t.prefix&&(e=t.prefix+" "+e),t.baseHeight){var i=(t.container.clientHeight/t.baseHeight<<0)+1,n=(t.container.clientHeight/i<<0)-t.baseHeightMargin,a=n/t.ratio<<0;t.styleElt.innerHTML=e+"{ width: "+a+"px; height:"+n+"px}"}else{var s=t.container.querySelectorAll(t.target),r=(s[0].clientWidth,s[0].clientHeight);if(r>0){var a=r*t.ratio<<0;if(t.max){var h=t.container.clientWidth*t.max/100<<0;a>h&&(a=h)}t.styleElt.innerHTML=e+"{ width:"+a+"px}"}}},dispose:function(){var t=this;t.parentpage=null,t.container=null,t.styleElt.parentElement.removeChild(t.styleElt),WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("myevent"))})}();
!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{VisualState:WinJS.Class.mix(WinJS.Class.define(function(t,e){this.element=t||document.createElement("DIV"),e=e||{},this.element.winControl=this,this.element.style.display="none",this.element.classList.add("mcn-visualstate"),this.element.classList.add("mcn-layout-ctrl"),this.element.classList.add("win-disposable"),WinJS.UI.setOptions(this,e)},{states:{get:function(){return this._states},set:function(t){this._states=t}},target:{get:function(){return this._target},set:function(t){this._target=t}},checkAllStates:function(t,e){var i=this;if(i.states)for(var s in i.states)i.checkState(s,i.states[s])},checkState:function(t,e){var i=this;if(i.element){var s=i.target||i.element.parentElement,n=s.clientWidth,a=s.clientHeight,l=!0;e.wGt&&(l=l&&n>e.wGt),e.wLt&&(l=l&&n<e.wLt),e.hGt&&(l=l&&a>e.hGt),e.hLt&&(l=l&&a<e.hLt),l?(e.active=!0,s.classList.add("state-"+t)):(e.active=!1,s.classList.remove("state-"+t))}},pageLayout:function(){var t=this;t.checkAllStates()},updateLayout:function(){var t=this;t.checkAllStates()},dispose:function(){WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("myevent"))})}();
//# sourceMappingURL=winjscontrib-custom.js.map
