{"version":3,"sources":["../scripts/winjscontrib/js/winjscontrib.core.js","../scripts/winjscontrib/js/winjscontrib.ui.webcomponents.js","../scripts/winjscontrib/js/winjscontrib.winrt.core.js","../scripts/winjscontrib/js/winjscontrib.winrt.upnp.js","../scripts/winjscontrib/js/winjscontrib.bindings.js","../scripts/winjscontrib/js/winjscontrib.date.utils.js","../scripts/winjscontrib/js/winjscontrib.messenger.js","../scripts/winjscontrib/js/winjscontrib.datacontainer.winrt.file.js","../scripts/winjscontrib/js/winjscontrib.ui.jquery.js","../scripts/winjscontrib/js/winjscontrib.ui.dataform.js","../scripts/winjscontrib/js/winjscontrib.ui.navigator.js","../scripts/winjscontrib/js/winjscontrib.ui.animation.js","../scripts/winjscontrib/js/winjscontrib.ui.elasticbutton.js","../scripts/winjscontrib/js/winjscontrib.ui.fowrapper.js","../scripts/winjscontrib/js/winjscontrib.ui.multipass-renderer.js","../scripts/winjscontrib/js/winjscontrib.ui.grid.js","../scripts/winjscontrib/js/winjscontrib.ui.aspectratio.js","../scripts/winjscontrib/js/winjscontrib.ui.visualstate.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACngBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACviFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACh2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"winjscontrib-custom.js","sourcesContent":["/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Logs;\n    (function (Logs) {\n        var Appenders;\n        (function (Appenders) {\n            /**\n             * @namespace WinJSContrib.Logs.Appenders\n             */\n            WinJSContrib.Logs.Appenders = WinJSContrib.Logs.Appenders;\n            var ConsoleAppender = (function () {\n                /**\n                 * Appender writing to console\n                 * @class WinJSContrib.Logs.Appenders.ConsoleAppender\n                 */\n                function ConsoleAppender(config) {\n                    this.config = config || { level: Logs.Levels.inherit };\n                }\n                /**\n                 * clone appender\n                 * @function WinJSContrib.Logs.Appenders.ConsoleAppender.prototype.clone\n                 */\n                ConsoleAppender.prototype.clone = function () {\n                    return new WinJSContrib.Logs.Appenders.ConsoleAppender(this.config);\n                };\n                /**\n                 * log item\n                 * @function WinJSContrib.Logs.Appenders.ConsoleAppender.prototype.log\n                 * @param {string} message log message\n                 * @param {WinJSContrib.Logs.Levels} log level\n                 */\n                ConsoleAppender.prototype.log = function (logger, message, level) {\n                    var args = [];\n                    for (var _i = 3; _i < arguments.length; _i++) {\n                        args[_i - 3] = arguments[_i];\n                    }\n                    if (this.config.level == Logs.Levels.inherit || level >= this.config.level) {\n                        var msg = [this.format(logger, message, level)];\n                        if (args.length) {\n                            args.forEach(function (a) {\n                                msg.push(a);\n                            });\n                        }\n                        switch (level) {\n                            case Logs.Levels.verbose:\n                                return console.log.apply(console, msg);\n                            case Logs.Levels.debug:\n                                return console.log.apply(console, msg);\n                            case Logs.Levels.info:\n                                return console.info.apply(console, msg);\n                            case Logs.Levels.warn:\n                                return console.warn.apply(console, msg);\n                            case Logs.Levels.error:\n                                return console.error.apply(console, msg);\n                        }\n                    }\n                };\n                /**\n                 * create log group\n                 * @function WinJSContrib.Logs.Appenders.ConsoleAppender.prototype.group\n                 */\n                ConsoleAppender.prototype.group = function (title) {\n                    console.group(title);\n                };\n                /**\n                 * create collapsed log group\n                 * @function WinJSContrib.Logs.Appenders.ConsoleAppender.prototype.groupCollapsed\n                 */\n                ConsoleAppender.prototype.groupCollapsed = function (title) {\n                    console.groupCollapsed(title);\n                };\n                /**\n                 * close log group\n                 * @function WinJSContrib.Logs.Appenders.ConsoleAppender.prototype.groupEnd\n                 */\n                ConsoleAppender.prototype.groupEnd = function () {\n                    console.groupEnd();\n                };\n                ConsoleAppender.prototype.format = function (logger, message, level) {\n                    var finalMessage = \"\";\n                    if (logger.Config && logger.Config.prefix)\n                        finalMessage += logger.Config.prefix + \" # \";\n                    if (this.config.showLoggerNameInMessage)\n                        finalMessage += logger.name + \" # \";\n                    if (this.config.showLevelInMessage)\n                        finalMessage += Logs.logginLevelToString(level) + \" # \";\n                    finalMessage += message;\n                    return finalMessage;\n                };\n                return ConsoleAppender;\n            })();\n            Appenders.ConsoleAppender = ConsoleAppender;\n            var BufferAppender = (function () {\n                /**\n                 * Appender writing to console\n                 * @class WinJSContrib.Logs.Appenders.BufferAppender\n                 */\n                function BufferAppender(config) {\n                    this.config = config || { level: Logs.Levels.inherit };\n                    this.buffer = [];\n                }\n                /**\n                 * clone appender\n                 * @function WinJSContrib.Logs.Appenders.BufferAppender.prototype.clone\n                 */\n                BufferAppender.prototype.clone = function () {\n                    return new WinJSContrib.Logs.Appenders.BufferAppender(this.config);\n                };\n                /**\n                 * log item\n                 * @function WinJSContrib.Logs.Appenders.BufferAppender.prototype.log\n                 * @param {string} message log message\n                 * @param {WinJSContrib.Logs.Levels} log level\n                 */\n                BufferAppender.prototype.log = function (logger, message, level) {\n                    var args = [];\n                    for (var _i = 3; _i < arguments.length; _i++) {\n                        args[_i - 3] = arguments[_i];\n                    }\n                    if (this.config.level == Logs.Levels.inherit || level >= this.config.level) {\n                        var msg = [new Date().getTime() + \"\", Logs.Levels[level].toUpperCase(), this.format(logger, message, level)];\n                        if (args.length) {\n                            args.forEach(function (a) {\n                                if (typeof a == \"object\")\n                                    a = JSON.stringify(a);\n                                msg.push(a);\n                            });\n                        }\n                        this.buffer.push(msg.join(\" \"));\n                    }\n                };\n                /**\n                 * create log group\n                 * @function WinJSContrib.Logs.Appenders.BufferAppender.prototype.group\n                 */\n                BufferAppender.prototype.group = function (title) {\n                };\n                /**\n                 * create collapsed log group\n                 * @function WinJSContrib.Logs.Appenders.BufferAppender.prototype.groupCollapsed\n                 */\n                BufferAppender.prototype.groupCollapsed = function (title) {\n                };\n                /**\n                 * close log group\n                 * @function WinJSContrib.Logs.Appenders.BufferAppender.prototype.groupEnd\n                 */\n                BufferAppender.prototype.groupEnd = function () {\n                };\n                BufferAppender.prototype.format = function (logger, message, level) {\n                    var finalMessage = \"\";\n                    if (logger.Config && logger.Config.prefix)\n                        finalMessage += logger.Config.prefix + \" # \";\n                    if (this.config.showLoggerNameInMessage)\n                        finalMessage += logger.name + \" # \";\n                    if (this.config.showLevelInMessage)\n                        finalMessage += Logs.logginLevelToString(level) + \" # \";\n                    finalMessage += message;\n                    return finalMessage;\n                };\n                return BufferAppender;\n            })();\n            Appenders.BufferAppender = BufferAppender;\n        })(Appenders = Logs.Appenders || (Logs.Appenders = {}));\n    })(Logs = WinJSContrib.Logs || (WinJSContrib.Logs = {}));\n})(WinJSContrib || (WinJSContrib = {}));\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Logs;\n    (function (Logs) {\n        /**\n         * @namespace WinJSContrib.Logs\n         */\n        WinJSContrib.Logs = WinJSContrib.Logs;\n        /**\n        * enumeration for log levels\n        * @enum {number} Levels\n        * @memberof WinJSContrib.Logs\n        */\n        (function (Levels) {\n            /**\n             * disabled\n             */\n            Levels[Levels[\"inherit\"] = 512] = \"inherit\";\n            /**\n             * disabled\n             */\n            Levels[Levels[\"off\"] = 256] = \"off\";\n            /**\n             * log error\n             */\n            Levels[Levels[\"error\"] = 32] = \"error\";\n            /**\n             * log warn and error\n             */\n            Levels[Levels[\"warn\"] = 16] = \"warn\";\n            /**\n             * log info, warn, error\n             */\n            Levels[Levels[\"info\"] = 8] = \"info\";\n            /**\n             * log debug, info, warn, error\n             */\n            Levels[Levels[\"debug\"] = 4] = \"debug\";\n            /**\n            * verbose mode\n            */\n            Levels[Levels[\"verbose\"] = 2] = \"verbose\";\n        })(Logs.Levels || (Logs.Levels = {}));\n        var Levels = Logs.Levels;\n        ;\n        // Default config\n        Logs.defaultConfig = {\n            \"level\": Levels.off,\n            \"showLevelInMessage\": false,\n            \"showLoggerNameInMessage\": false,\n            \"appenders\": [\"DefaultConsole\"]\n        };\n        var Loggers = {};\n        Logs.RuntimeAppenders = {\n            \"DefaultConsole\": new Logs.Appenders.ConsoleAppender()\n        };\n        Logs.DefaultAppenders = [];\n        /**\n         * get a logger, logger is created if it does not exists\n         * @function WinJSContrib.Logs.getLogger\n         * @param {string} name name for the logger\n         * @param {Object} config logger configuration\n         * @param {...Object} appenders appenders to add to the logger\n         * @returns {WinJSContrib.Logs.Logger}\n         */\n        function getLogger(name, config) {\n            var existing = Loggers[name];\n            if (!existing) {\n                existing = new Logger(config || Logs.defaultConfig);\n                existing.name = name;\n                Loggers[name] = existing;\n            }\n            if (config || arguments.length > 2)\n                configure.apply(null, arguments);\n            return existing;\n        }\n        Logs.getLogger = getLogger;\n        function configure(name, config) {\n            var existing = Loggers[name];\n            if (existing) {\n                if (config)\n                    existing.Config = config;\n                if (arguments.length > 2) {\n                    for (var i = 2; i < arguments.length; i++) {\n                        existing.addAppender(arguments[i]);\n                    }\n                }\n            }\n        }\n        Logs.configure = configure;\n        function loggingLevelStringToEnum(level) {\n            switch (level.toLowerCase()) {\n                default:\n                case \"log\":\n                case \"debug\":\n                    return Levels.debug;\n                case \"info\":\n                    return Levels.info;\n                case \"warn\":\n                    return Levels.warn;\n                case \"error\":\n                    return Levels.error;\n            }\n        }\n        Logs.loggingLevelStringToEnum = loggingLevelStringToEnum;\n        function logginLevelToString(level) {\n            switch (level) {\n                default:\n                case Levels.verbose:\n                    return \"VERBOSE\";\n                case Levels.debug:\n                    return \"DEBUG\";\n                case Levels.info:\n                    return \"INFO\";\n                case Levels.warn:\n                    return \"WARN\";\n                case Levels.error:\n                    return \"ERROR\";\n            }\n        }\n        Logs.logginLevelToString = logginLevelToString;\n        var Logger = (function () {\n            /**\n             * @class WinJSContrib.Logs.Logger\n             * @param {Object} config logger configuration\n             */\n            function Logger(config) {\n                this.appenders = [];\n                /**\n                 * Logger configuration\n                 * @field Config\n                 * @type {Object}\n                 */\n                this.Config = config || Logs.defaultConfig;\n            }\n            Object.defineProperty(Logger.prototype, \"Config\", {\n                get: function () {\n                    return this._config;\n                },\n                set: function (newValue) {\n                    var _this = this;\n                    this._config = newValue || { level: Logs.Levels.off, showLevelInMessage: false, showLoggerNameInMessage: false };\n                    if (typeof newValue.level === \"number\")\n                        this.Level = newValue.level;\n                    if (typeof newValue.showLevelInMessage === \"boolean\")\n                        this.Config.showLevelInMessage = newValue.showLevelInMessage;\n                    if (typeof newValue.showLoggerNameInMessage === \"boolean\")\n                        this.Config.showLoggerNameInMessage = newValue.showLoggerNameInMessage;\n                    if (this._config.appenders) {\n                        this._config.appenders.forEach(function (a) {\n                            _this.addAppender(a);\n                        });\n                    }\n                    else {\n                        this._config.appenders = [];\n                    }\n                },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Logger.prototype, \"Level\", {\n                get: function () {\n                    return this._level;\n                },\n                set: function (val) {\n                    this._level = val;\n                    if (this._level <= Logs.Levels.verbose) {\n                        this.verbose = Logger.verbose;\n                    }\n                    else {\n                        this.verbose = Logger.noop;\n                    }\n                    if (this._level <= Logs.Levels.debug) {\n                        this.debug = Logger.debug;\n                    }\n                    else {\n                        this.debug = Logger.noop;\n                    }\n                    if (this._level <= Logs.Levels.info) {\n                        this.info = Logger.info;\n                    }\n                    else {\n                        this.info = Logger.noop;\n                    }\n                    if (this._level <= Logs.Levels.warn) {\n                        this.warn = Logger.warn;\n                    }\n                    else {\n                        this.warn = Logger.noop;\n                    }\n                    if (this._level <= Logs.Levels.error) {\n                        this.error = Logger.error;\n                    }\n                    else {\n                        this.error = Logger.noop;\n                    }\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * add appender to logger\n             * @function WinJSContrib.Logs.Logger.prototype.addAppender\n             * @param {Object} appender\n             */\n            Logger.prototype.addAppender = function (appender) {\n                if (typeof appender == \"string\") {\n                    appender = WinJSContrib.Logs.RuntimeAppenders[appender];\n                }\n                var currentappender = appender;\n                if (!currentappender)\n                    return;\n                var exists = this.appenders.indexOf(currentappender) >= 0;\n                if (exists)\n                    return;\n                //if (!currentappender.format)\n                //    currentappender.format = this.format.bind(this);\n                this.appenders.push(currentappender);\n            };\n            /**\n             * Add log entry\n             * @function WinJSContrib.Logs.Logger.prototype.log\n             * @param {string} message log message\n             * @param {WinJSContrib.Logs.Levels} log level\n             */\n            Logger.prototype.log = function (message, level) {\n                var args = [];\n                for (var _i = 2; _i < arguments.length; _i++) {\n                    args[_i - 2] = arguments[_i];\n                }\n                // If general logging level is set to 'none', returns\n                if (this._config.level === WinJSContrib.Logs.Levels.off || level < this._config.level)\n                    return;\n                if (!this.appenders || !this.appenders.length)\n                    return;\n                var fnargs = [this, message, level];\n                if (args.length) {\n                    for (var i = 0; i < args.length; i++) {\n                        fnargs.push(args[i]);\n                    }\n                }\n                Logs.DefaultAppenders.forEach(function (a) {\n                    a.log.apply(a, fnargs);\n                });\n                this.appenders.forEach(function (a) {\n                    a.log.apply(a, fnargs);\n                });\n            };\n            ///**\n            // * format log entry\n            // * @function WinJSContrib.Logs.Logger.prototype.format\n            // * @param {string} message log message\n            // * @param {string} group group/category for the entry\n            // * @param {WinJSContrib.Logs.Levels} log level\n            // */\n            //public format(message: string, level: Logs.Levels) {\n            //    var finalMessage = \"\";\n            //    if (!this.Config.hideLevelInMessage) finalMessage += logginLevelToString(level) + \" - \";\n            //    finalMessage += message;\n            //    return finalMessage;\n            //}\n            /**\n             * add debug log entry\n             * @function WinJSContrib.Logs.Logger.prototype.debug\n             * @param {string} message log message\n             */\n            Logger.prototype.verbose = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            /**\n             * add debug log entry\n             * @function WinJSContrib.Logs.Logger.prototype.debug\n             * @param {string} message log message\n             */\n            Logger.prototype.debug = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            /**\n             * add info log entry\n             * @function WinJSContrib.Logs.Logger.prototype.info\n             * @param {string} message log message\n             * @param {string} [group] log group name\n             */\n            Logger.prototype.info = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            /**\n             * add warn log entry\n             * @function WinJSContrib.Logs.Logger.prototype.warn\n             * @param {string} message log message\n             */\n            Logger.prototype.warn = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            /**\n             * add error log entry\n             * @function WinJSContrib.Logs.Logger.prototype.error\n             * @param {string} message log message\n             */\n            Logger.prototype.error = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            /**\n             * create a log group\n             * @function WinJSContrib.Logs.Logger.prototype.group\n             * @param {string} title group title\n             */\n            Logger.prototype.group = function (title) {\n                this.appenders.forEach(function (a) {\n                    if (a.group)\n                        a.group(title);\n                });\n            };\n            /**\n             * create a collapsed log group\n             * @function WinJSContrib.Logs.Logger.prototype.groupCollapsed\n             * @param {string} title group title\n             */\n            Logger.prototype.groupCollapsed = function (title) {\n                this.appenders.forEach(function (a) {\n                    if (a.groupCollapsed)\n                        a.groupCollapsed(title);\n                });\n            };\n            /**\n             * end current group\n             * @function WinJSContrib.Logs.Logger.prototype.groupEnd\n             */\n            Logger.prototype.groupEnd = function () {\n                this.appenders.forEach(function (a) {\n                    if (a.groupEnd)\n                        a.groupEnd();\n                });\n            };\n            /**\n             * Get a child logger\n             * @function WinJSContrib.Logs.Logger.prototype.getChildLogger\n             * @param {string} name child logger name\n             * @param {WinJSContrib.Logs.Levels} level\n             */\n            Logger.prototype.getChildLogger = function (name, level) {\n                var res = WinJSContrib.Logs.getLogger(this.name + '.' + name, JSON.parse(JSON.stringify(this.Config)));\n                res.Config.appenders = [];\n                this.appenders.forEach(function (a) {\n                    if (a.clone)\n                        res.addAppender(a.clone());\n                });\n                if (level)\n                    res.Config.level = level;\n                return res;\n            };\n            Logger.noop = function (message) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n            };\n            Logger.getLogFn = function (level) {\n                return function (message) {\n                    var args = null;\n                    if (arguments.length > 1) {\n                        args = [];\n                        for (var i = 1; i < arguments.length; i++) {\n                            args.push(arguments[i]);\n                        }\n                        this.log(message, level, args);\n                    }\n                    else\n                        this.log(message, level);\n                };\n            };\n            Logger.verbose = Logger.getLogFn(Logs.Levels.verbose);\n            Logger.debug = Logger.getLogFn(Logs.Levels.debug);\n            Logger.info = Logger.getLogFn(Logs.Levels.info);\n            Logger.warn = Logger.getLogFn(Logs.Levels.warn);\n            Logger.error = Logger.getLogFn(Logs.Levels.error);\n            return Logger;\n        })();\n        Logs.Logger = Logger;\n    })(Logs = WinJSContrib.Logs || (WinJSContrib.Logs = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\n(function (_global) {\n    //polyfill setimmediate\n    if (!this.setImmediate) {\n        this.setImmediate = function (callback) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            setTimeout(callback, 0);\n            return 0;\n        };\n    }\n    //Windows 10 doesn't have it anymore, polyfill for backward compat\n    if (!this.toStaticHTML) {\n        this.toStaticHTML = function (text) {\n            return text;\n        };\n    }\n    var msapp = _global.MSApp;\n    if (msapp && !msapp.execUnsafeLocalFunction) {\n        msapp.execUnsafeLocalFunction = function (c) { c(); };\n    }\n})(this);\nif (!Object.map) {\n    Object.map = function (obj, mapping) {\n        var mapped = {};\n        if (typeof obj !== 'object') {\n            return mapped;\n        }\n        if (typeof mapping !== 'function') {\n            // We could just return obj but that wouldn't be\n            // consistent with the rest of the interface which always returns\n            // a new object.\n            mapping = function (key, val) {\n                return [key, val];\n            };\n        }\n        Object.keys(obj).forEach(function (key) {\n            var transmuted = mapping.apply(obj, [key, obj[key]]);\n            if (transmuted && transmuted.length) {\n                mapped[transmuted[0] || key] = transmuted[1];\n            }\n        });\n        return mapped;\n    };\n}\nif (!String.prototype.format) {\n    String.prototype.format = function () {\n        var args = arguments;\n        return this.replace(/{(\\d+)}/g, function (match, number) {\n            return typeof args[number] !== 'undefined' ? args[number] : match;\n        });\n    };\n}\nif (!String.prototype.padLeft) {\n    String.prototype.padLeft = function padLeft(length, leadingChar) {\n        if (leadingChar === undefined) {\n            leadingChar = \"0\";\n        }\n        return this.length < length ? (leadingChar + this).padLeft(length, leadingChar) : this;\n    };\n}\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Promise;\n    (function (Promise) {\n        /**\n         * apply callback for each item in the array in waterfall\n         * @function WinJSContrib.Promise.waterfall\n         * @param {Array} dataArray items to process with async tasks\n         * @param {function} promiseCallback function applyed to each item (could return a promise for item callback completion)\n         * @returns {WinJS.Promise}\n         */\n        function waterfall(dataArray, promiseCallback) {\n            var resultPromise = WinJS.Promise.wrap();\n            var results = [];\n            if (!dataArray) {\n                return WinJS.Promise.wrap([]);\n            }\n            var dataPromise = WinJS.Promise.as(dataArray);\n            return dataPromise.then(function (items) {\n                var queueP = function (p, item) {\n                    var prComplete, prError;\n                    var result = new WinJS.Promise(function (c, e) {\n                        prComplete = c;\n                        prError = e;\n                    });\n                    p.then(function (previous) {\n                        WinJS.Promise.as(promiseCallback(item, previous)).then(function (r) {\n                            results.push(r);\n                            return r;\n                        }).then(prComplete, prError);\n                    });\n                    return result;\n                };\n                for (var i = 0, l = items.length; i < l; i++) {\n                    var item = items[i];\n                    if (!item && items.getItem) {\n                        item = items.getItem(i);\n                    }\n                    resultPromise = queueP(resultPromise, item);\n                }\n                return resultPromise.then(function (r) {\n                    return results;\n                });\n            });\n        }\n        Promise.waterfall = waterfall;\n        function promises(dataArray, promiseCallback) {\n            if (!dataArray) {\n                return WinJS.Promise.wrap([]);\n            }\n            var dataPromise = WinJS.Promise.as(dataArray);\n            return dataPromise.then(function (items) {\n                var promises = [];\n                for (var i = 0, l = items.length; i < l; i++) {\n                    var item = items[i];\n                    if (!item && items.getItem) {\n                        item = items.getItem(i);\n                    }\n                    promises.push(WinJS.Promise.as(promiseCallback(item)));\n                }\n                return promises;\n            });\n        }\n        /**\n         * apply callback for each item in the array in parallel (equivalent to WinJS.Promise.join)\n         * @function WinJSContrib.Promise.parallel\n         * @param {Array} dataArray items to process with async tasks\n         * @param {function} promiseCallback function applyed to each item (could return a promise for item callback completion)\n         * @returns {WinJS.Promise}\n         */\n        function parallel(dataArray, promiseCallback) {\n            if (!dataArray) {\n                return WinJS.Promise.wrap([]);\n            }\n            var dataPromise = WinJS.Promise.as(dataArray);\n            return dataPromise.then(function (items) {\n                var promises = [];\n                for (var i = 0, l = items.length; i < l; i++) {\n                    var item = items[i];\n                    if (!item && items.getItem) {\n                        item = items.getItem(i);\n                    }\n                    promises.push(WinJS.Promise.as(promiseCallback(item)));\n                }\n                return WinJS.Promise.join(promises);\n            });\n        }\n        Promise.parallel = parallel;\n        /**\n         * apply callback for each item in the array in batch of X parallel items\n         * @function WinJSContrib.Promise.batch\n         * @param {Array} dataArray items to process with async tasks\n         * @param {number} batchSize number of items to batch\n         * @param {function} promiseCallback function applyed to each item (could return a promise for item callback completion)\n         * @returns {WinJS.Promise}\n         */\n        function batch(dataArray, batchSize, promiseCallback, batchWrapCallback) {\n            if (!dataArray) {\n                return WinJS.Promise.wrap([]);\n            }\n            var dataPromise = WinJS.Promise.as(dataArray);\n            return dataPromise.then(function (items) {\n                var resultPromise = WinJS.Promise.wrap();\n                var batcheditems = [];\n                var results = [];\n                var hasErrors = false;\n                var queueBatch = function (p, items) {\n                    var prComplete, prError;\n                    var result = new WinJS.Promise(function (c, e) {\n                        prComplete = c;\n                        prError = e;\n                    });\n                    p.then(function (r) {\n                        WinJS.Promise.join(items.map(function (item, index) {\n                            return WinJS.Promise.as(promiseCallback(item, index));\n                        })).then(function (results) {\n                            if (batchWrapCallback)\n                                return batchWrapCallback(results);\n                            return results;\n                        }).then(function (results) {\n                            results = results.concat(results);\n                            return results;\n                        }, function (errors) {\n                            results = results.concat(errors);\n                            hasErrors = true;\n                            return results;\n                        }).then(prComplete, prError);\n                    });\n                    return result;\n                };\n                for (var i = 0, l = items.length; i < l; i++) {\n                    var item = items[i];\n                    if (!item && items.getItem) {\n                        item = items.getItem(i);\n                    }\n                    batcheditems.push(item);\n                    if (i > 0 && i % batchSize === 0) {\n                        resultPromise = queueBatch(resultPromise, batcheditems);\n                        batcheditems = [];\n                    }\n                }\n                if (batcheditems.length) {\n                    resultPromise = queueBatch(resultPromise, batcheditems);\n                }\n                return resultPromise.then(function () {\n                    if (hasErrors)\n                        return WinJS.Promise.wrapError(results);\n                    return results;\n                });\n            });\n        }\n        Promise.batch = batch;\n    })(Promise = WinJSContrib.Promise || (WinJSContrib.Promise = {}));\n})(WinJSContrib || (WinJSContrib = {}));\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Utils;\n    (function (Utils) {\n        var EventDispatcher = (function () {\n            function EventDispatcher() {\n            }\n            EventDispatcher.prototype.dispatchEvent = function (type, data) { };\n            EventDispatcher.prototype.addEventListener = function (type, callback) { };\n            EventDispatcher.prototype.removeEventListener = function (type, callback) { };\n            return EventDispatcher;\n        })();\n        Utils.EventDispatcher = EventDispatcher;\n        Utils.EventDispatcher = WinJS.Class.mix(EventDispatcher, WinJS.Utilities.eventMixin);\n        /**\n         * extend an object with properties from subsequent objects\n         * @function WinJSContrib.Utils.extend\n         * @returns {Object} composite object\n         */\n        function extend() {\n            for (var i = 1; i < arguments.length; i++)\n                for (var key in arguments[i])\n                    if (arguments[i].hasOwnProperty(key))\n                        arguments[0][key] = arguments[i][key];\n            return arguments[0];\n        }\n        Utils.extend = extend;\n        /** indicate if string starts with featured characters\n         * @function WinJSContrib.Utils.startsWith\n         * @param {string} str string to search within\n         * @param {string} strToMatch match string\n         * @returns {boolean} true if string starts with strToMatch\n         */\n        function startsWith(str, strToMatch) {\n            if (!strToMatch) {\n                return false;\n            }\n            var match = (str.match(\"^\" + strToMatch) == strToMatch);\n            return match;\n        }\n        Utils.startsWith = startsWith;\n        if (!String.prototype.startsWith) {\n            String.prototype.startsWith = function (str) {\n                return WinJSContrib.Utils.startsWith(this, str);\n            };\n        }\n        function asyncForEach(array, callback, batchsize) {\n            if (batchsize === void 0) { batchsize = 1; }\n            var i = 0;\n            while (i < array.length) {\n                setImmediate(function () {\n                    for (var j = 0; j < batchsize && i < array.length; j++) {\n                        i++;\n                        callback(array[i]);\n                    }\n                });\n            }\n        }\n        Utils.asyncForEach = asyncForEach;\n        /** indicate if string ends with featured characters\n         * @function WinJSContrib.Utils.endsWith\n         * @param {string} str string to search within\n         * @param {string} strToMatch match string\n         * @returns {boolean} true if string starts with strToMatch\n         */\n        function endsWith(str, strToMatch) {\n            if (!strToMatch) {\n                return false;\n            }\n            return (str.match(strToMatch + \"$\") == strToMatch);\n        }\n        Utils.endsWith = endsWith;\n        if (!String.prototype.endsWith) {\n            String.prototype.endsWith = function (str) {\n                return WinJSContrib.Utils.endsWith(this, str);\n            };\n        }\n        /**\n         * generate a string formatted as a query string from object properties\n         * @function WinJSContrib.Utils.queryStringFrom\n         * @param {Object} obj object to format\n         * @returns {string}\n         */\n        function queryStringFrom(obj) {\n            var str = [];\n            for (var p in obj)\n                if (obj.hasOwnProperty(p)) {\n                    var key = encodeURIComponent(p);\n                    var rawValue = obj[p];\n                    var value = WinJSContrib.Utils.hasValue(rawValue) ? encodeURIComponent(rawValue) : \"\";\n                    str.push(key + \"=\" + value);\n                }\n            return str.join(\"&\");\n        }\n        Utils.queryStringFrom = queryStringFrom;\n        /**\n         * trigger an event on a DOM node\n         * @function WinJSContrib.Utils.triggerEvent\n         * @param {HTMLElement} element receiving the event\n         * @param {string} eventName name of the event\n         * @param {boolean} bubbles indicate if event should bubble\n         * @param {boolean} cancellable indicate if event can be cancelled\n         */\n        function triggerEvent(element, eventName, bubbles, cancellable) {\n            var eventToTrigger = document.createEvent(\"Event\");\n            eventToTrigger.initEvent(eventName, bubbles, cancellable);\n            element.dispatchEvent(eventToTrigger);\n        }\n        Utils.triggerEvent = triggerEvent;\n        /**\n         * @function WinJSContrib.Utils.triggerCustomEvent\n         * @param {HTMLElement} element receiving the event\n         * @param {string} eventName name of the event\n         * @param {boolean} bubbles indicate if event should bubble\n         * @param {boolean} cancellable indicate if event can be cancelled\n         */\n        function triggerCustomEvent(element, eventName, bubbles, cancellable, data) {\n            var eventToTrigger = document.createEvent(\"CustomEvent\");\n            eventToTrigger.initCustomEvent(eventName, bubbles, cancellable, data);\n            element.dispatchEvent(eventToTrigger);\n        }\n        Utils.triggerCustomEvent = triggerCustomEvent;\n        /*\n        Core object properties features\n        */\n        //return object value based on property name. Property name is a string containing the name of the property, \n        //or the name of the property with an indexer, ex: myproperty[2] (to get item in a array)\n        function getobject(obj, prop) {\n            if (!obj)\n                return;\n            if (prop === 'this')\n                return obj;\n            var baseValue = obj[prop];\n            if (typeof baseValue !== \"undefined\")\n                return baseValue;\n            var idx = prop.indexOf('[');\n            if (idx < 0)\n                return;\n            var end = prop.indexOf(']', idx);\n            if (end < 0)\n                return;\n            var val = prop.substr(idx + 1, end - idx);\n            val = parseInt(val);\n            return obj[val];\n        }\n        //set object property value based on property name. Property name is a string containing the name of the property, \n        //or the name of the property with an indexer, ex: myproperty[2] (to get item in a array)\n        function setobject(obj, prop, data) {\n            if (!obj)\n                return;\n            if (WinJSContrib.Utils.hasValue(prop)) {\n                if (obj.setProperty) {\n                    obj.setProperty(prop, data);\n                    return;\n                }\n                obj[prop] = data;\n                return;\n            }\n            if (typeof prop === \"string\") {\n                var idx = prop.indexOf('[');\n                if (idx < 0)\n                    return;\n                var end = prop.indexOf(']', idx);\n                if (end < 0)\n                    return;\n                var val = prop.substr(idx + 1, end - idx);\n                var intval = parseInt(val);\n                obj[intval] = data;\n            }\n        }\n        /** Read property value on an object based on expression\n        * @function WinJSContrib.Utils.readProperty\n        * @param {Object} source the object containing data\n        * @param {Object} properties property descriptor. could be a string in js notation ex: 'myProp.myChildProp,\n        * or an array of strings ['myProp', 'myChildProp']. String notation can contain indexers\n        * @returns {Object} property value\n        */\n        function readProperty(source, properties) {\n            if (!source)\n                return null;\n            if (typeof properties == 'string' && source[properties])\n                return source[properties];\n            if (!properties || !properties.length)\n                return source;\n            var prop = WinJSContrib.Utils.getProperty(source, properties);\n            if (prop) {\n                return prop.propValue;\n            }\n        }\n        Utils.readProperty = readProperty;\n        var PropertyDescriptor = (function () {\n            function PropertyDescriptor(parent, parentDescriptor, keyProp) {\n                this.parent = parent;\n                this.parentDescriptor = parentDescriptor;\n                this.keyProp = keyProp;\n            }\n            PropertyDescriptor.prototype.ensureParent = function () {\n                if (parent) {\n                    return parent;\n                }\n                else {\n                    if (this.parentDescriptor) {\n                        this.parentDescriptor.ensureParent();\n                        if (!this.parentDescriptor.parent[this.parentDescriptor.keyProp]) {\n                            this.parentDescriptor.parent[this.parentDescriptor.keyProp] = {};\n                            this.parent = this.parentDescriptor.parent[this.parentDescriptor.keyProp];\n                        }\n                    }\n                }\n            };\n            Object.defineProperty(PropertyDescriptor.prototype, \"propValue\", {\n                get: function () {\n                    return getobject(this.parent, this.keyProp);\n                },\n                set: function (val) {\n                    this.ensureParent();\n                    setobject(this.parent, this.keyProp, val);\n                },\n                enumerable: true,\n                configurable: true\n            });\n            return PropertyDescriptor;\n        })();\n        Utils.PropertyDescriptor = PropertyDescriptor;\n        /**\n         * return a propery descriptor for an object based on expression\n         * @function WinJSContrib.Utils.getProperty\n         * @param {Object} source the object containing data\n         * @param {string[]} properties property descriptor. could be a string in js notation ex: 'myProp.myChildProp,\n         * or an array of strings ['myProp', 'myChildProp']. String notation can contain indexers\n         * @returns {Object} property descriptor\n         */\n        function getProperty(source, properties) {\n            if (typeof properties == 'string') {\n                properties = properties.split('.');\n            }\n            if (!properties || !properties.length) {\n                properties = ['this'];\n            }\n            var parent = source;\n            var previousDescriptor = null;\n            for (var i = 0; i < properties.length; i++) {\n                var descriptor = new PropertyDescriptor(parent, previousDescriptor, properties[i]);\n                previousDescriptor = descriptor;\n                if (i == properties.length - 1) {\n                    return descriptor;\n                }\n                parent = getobject(parent, properties[i]);\n            }\n            return;\n        }\n        Utils.getProperty = getProperty;\n        /**\n         * Write property value on an object based on expression\n         * @function WinJSContrib.Utils.writeProperty\n         * @param {Object} source the object containing data\n         * @param {string[]} properties property descriptor. could be a string in js notation ex: 'myProp.myChildProp,\n         * or an array of strings ['myProp', 'myChildProp']. String notation can contain indexers\n         * @param {Object} data data to feed to the property\n         */\n        function writeProperty(source, properties, data) {\n            var prop = WinJSContrib.Utils.getProperty(source, properties);\n            if (prop) {\n                prop.propValue = data;\n            }\n        }\n        Utils.writeProperty = writeProperty;\n        /** generate a random value between two numbers\n         * @function WinJSContrib.Utils.randomFromInterval\n         * @param {number} from lower limit\n         * @param {number} to upper limit\n         * @returns {number}\n         */\n        function randomFromInterval(from, to) {\n            return (Math.random() * (to - from + 1) + from) << 0;\n        }\n        Utils.randomFromInterval = randomFromInterval;\n        /**\n         * function to use as a callback for Array.sort when you want the array to be sorted alphabetically\n         * @function WinJSContrib.Utils.alphabeticSort\n         * @param {string} a\n         * @param {string} b\n         * @returns {number}\n         */\n        function alphabeticSort(a, b) {\n            if (a > b)\n                return 1;\n            if (a < b)\n                return -1;\n            return 0;\n        }\n        Utils.alphabeticSort = alphabeticSort;\n        /**\n         * generate an array with only distinct elements\n         * @function WinJSContrib.Utils.distinctArray\n         * @param {Array} array\n         * @param {string} path to array's item property used for checking items\n         * @param {boolean} ignorecase indicate if comparison should ignore case when using string\n         * @returns {Array}\n         */\n        function distinctArray(array, property, ignorecase) {\n            if (array === null || array.length === 0)\n                return array;\n            if (typeof ignorecase == \"undefined\")\n                ignorecase = false;\n            var sMatchedItems = \"\";\n            var foundCounter = 0;\n            var newArray = [];\n            var sFind;\n            var i;\n            if (ignorecase) {\n                for (i = 0; i < array.length; i++) {\n                    if (property) {\n                        var data = WinJSContrib.Utils.readProperty(array[i], property.split('.'));\n                        sFind = data;\n                        if (!data)\n                            sFind = data;\n                        if (data && data.toLowerCase)\n                            sFind = data.toLowerCase();\n                    }\n                    else {\n                        sFind = array[i];\n                    }\n                    if (sMatchedItems.indexOf(\"|\" + sFind + \"|\") < 0) {\n                        sMatchedItems += \"|\" + sFind + \"|\";\n                        newArray[foundCounter++] = array[i];\n                    }\n                }\n            }\n            else {\n                for (i = 0; i < array.length; i++) {\n                    if (property) {\n                        sFind = WinJSContrib.Utils.readProperty(array[i], property.split('.'));\n                    }\n                    else {\n                        sFind = array[i];\n                    }\n                    if (sMatchedItems.indexOf(\"|\" + sFind + \"|\") < 0) {\n                        sMatchedItems += \"|\" + sFind + \"|\";\n                        newArray[foundCounter++] = array[i];\n                    }\n                }\n            }\n            return newArray;\n        }\n        Utils.distinctArray = distinctArray;\n        /**\n         * get distinct values from an array of items\n         * @function WinJSContrib.Utils.getDistinctPropertyValues\n         * @param {Array} array items array\n         * @param {string} property property path for values\n         * @param {boolean} ignorecase ignore case for comparisons\n         */\n        function getDistinctPropertyValues(array, property, ignorecase) {\n            return Utils.distinctArray(array, property, ignorecase).map(function (item) {\n                return WinJSContrib.Utils.readProperty(item, property.split('.'));\n            });\n        }\n        Utils.getDistinctPropertyValues = getDistinctPropertyValues;\n        /**\n         * Remove all accented characters from a string and replace them with their non-accented counterpart for ex: replace \"é\" with \"e\"\n         * @function WinJSContrib.Utils.removeAccents\n         * @param {string} s\n         * @returns {string}\n         */\n        function removeAccents(s) {\n            var r = s.toLowerCase();\n            r = r.replace(new RegExp(\"[àáâãäå]\", 'g'), \"a\");\n            r = r.replace(new RegExp(\"æ\", 'g'), \"ae\");\n            r = r.replace(new RegExp(\"ç\", 'g'), \"c\");\n            r = r.replace(new RegExp(\"[èéêë]\", 'g'), \"e\");\n            r = r.replace(new RegExp(\"[ìíîï]\", 'g'), \"i\");\n            r = r.replace(new RegExp(\"ñ\", 'g'), \"n\");\n            r = r.replace(new RegExp(\"[òóôõö]\", 'g'), \"o\");\n            r = r.replace(new RegExp(\"œ\", 'g'), \"oe\");\n            r = r.replace(new RegExp(\"[ùúûü]\", 'g'), \"u\");\n            r = r.replace(new RegExp(\"[ýÿ]\", 'g'), \"y\");\n            return r;\n        }\n        Utils.removeAccents = removeAccents;\n        /**\n         * remove a page from navigation history\n         * @function WinJSContrib.Utils.removePageFromHistory\n         * @param {string} pageLocation page url\n         */\n        function removePageFromHistory(pageLoc) {\n            var history = [];\n            if (WinJS.Navigation.history && WinJS.Navigation.history.backStack && WinJS.Navigation.history.backStack.length) {\n                WinJS.Navigation.history.backStack.forEach(function (page) {\n                    if (page.location !== pageLoc) {\n                        history.push(page);\n                    }\n                });\n            }\n            WinJS.Navigation.history.backStack = history;\n        }\n        Utils.removePageFromHistory = removePageFromHistory;\n        /**\n         * format a number on 2 digits\n         * @function WinJSContrib.Utils.pad2\n         * @param {number} number\n         */\n        function pad2(number) {\n            return (number < 10 ? '0' : '') + number;\n        }\n        Utils.pad2 = pad2;\n        /**\n         * truncate a string and add ellipse if text if greater than certain size\n         * @function WinJSContrib.Utils.ellipsisizeString\n         * @param {string} text text to truncate\n         * @param {number} maxSize maximum size for text\n         * @param {boolean} useWordBoundary indicate if truncate should happen on the closest word boundary (like space)\n         */\n        function ellipsisizeString(text, maxSize, useWordBoundary) {\n            if (!text) {\n                return '';\n            }\n            var toLong = text.length > maxSize, text_ = toLong ? text.substr(0, maxSize - 1) : text;\n            text_ = useWordBoundary && toLong ? text_.substr(0, text_.lastIndexOf(' ')) : text_;\n            return toLong ? text_ + '...' : text_;\n        }\n        Utils.ellipsisizeString = ellipsisizeString;\n        /**\n         * generate a new Guid\n         * @function WinJSContrib.Utils.guid\n         * @returns {string}\n         */\n        function guid() {\n            var d = new Date().getTime();\n            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                var r = (d + Math.random() * 16) % 16 | 0;\n                d = Math.floor(d / 16);\n                return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n            });\n            return uuid;\n        }\n        Utils.guid = guid;\n        /**\n         * inherit property from parent WinJS controls\n         * @function WinJSContrib.Utils.inherit\n         * @param {HTMLElement} element\n         * @param {string} property property name\n         */\n        function inherit(element, property) {\n            if (element && element.parentElement) {\n                var current = element.parentElement;\n                while (current) {\n                    if (current.winControl) {\n                        if (current.winControl[property] !== undefined) {\n                            return current.winControl[property];\n                        }\n                    }\n                    current = current.parentElement;\n                }\n            }\n        }\n        Utils.inherit = inherit;\n        /**\n         * move DOM childrens form one node to the other\n         * @function WinJSContrib.Utils.moveChilds\n         * @param {HTMLElement} source source node containing elements to move\n         * @param {HTMLElement} target target node for moved elements\n         */\n        function moveChilds(source, target) {\n            if (!source || !target)\n                return;\n            var childs = [];\n            for (var i = 0; i < source.childNodes.length; i++) {\n                childs.push(source.childNodes[i]);\n            }\n            childs.forEach(function (elt) {\n                target.appendChild(elt);\n            });\n        }\n        Utils.moveChilds = moveChilds;\n        /**\n         * get parent control identifyed by a property attached on DOM element\n         * @function WinJSContrib.Utils.getParent\n         * @param {string} property property attached to control's DOM element, for ex: msParentSelectorScope\n         * @param {HTMLElement} element DOM element to scan\n         * @returns {Object} WinJS control\n         */\n        function getParent(property, element) {\n            if (!element)\n                return;\n            var current = element.parentNode;\n            while (current) {\n                if (current[property] && current.winControl) {\n                    return current.winControl;\n                }\n                current = current.parentNode;\n            }\n        }\n        Utils.getParent = getParent;\n        /**\n         * get parent control identifyed by a css class\n         * @function WinJSContrib.Utils.getParentControlByClass\n         * @param {string} className css class name\n         * @param {HTMLElement} element DOM element to scan\n         * @returns {Object} WinJS control\n         */\n        function getParentControlByClass(className, element) {\n            if (!element)\n                return;\n            var current = element.parentNode;\n            while (current) {\n                if (current.classList && current.classList.contains(className) && current.winControl) {\n                    return current.winControl;\n                }\n                current = current.parentNode;\n            }\n        }\n        Utils.getParentControlByClass = getParentControlByClass;\n        /**\n         * get parent page control (work only with WinJSContrib.UI.PageControlNavigator\n         * @function WinJSContrib.Utils.getParentPage\n         * @param {HTMLElement} element DOM element to scan\n         * @returns {Object} WinJS control\n         */\n        function getParentPage(element) {\n            return WinJSContrib.Utils.getParent('mcnPage', element);\n        }\n        Utils.getParentPage = getParentPage;\n        /**\n         * get parent scope control (based on msParentSelectorScope)\n         * @function WinJSContrib.Utils.getScopeControl\n         * @param {HTMLElement} element DOM element to scan\n         * @returns {Object} WinJS control\n         */\n        function getScopeControl(element) {\n            var current = element.parentNode;\n            while (current) {\n                if (current.msParentSelectorScope) {\n                    var scope = current.parentNode;\n                    if (scope) {\n                        var scopeControl = scope.winControl;\n                        if (scopeControl) {\n                            return scopeControl;\n                        }\n                    }\n                }\n                current = current.parentNode;\n            }\n        }\n        Utils.getScopeControl = getScopeControl;\n        /**\n         * get WinJS.Binding.Template like control from a path, a control, a function or a DOM element\n         * @function WinJSContrib.Utils.getTemplate\n         * @param {Object} template template input\n         * @returns {Object} WinJS.Binding.Template or template-like object (object with a render function)\n         */\n        function getTemplate(template) {\n            if (template) {\n                var templatetype = typeof template;\n                if (templatetype == 'string') {\n                    return new WinJS.Binding.Template(null, { href: template });\n                }\n                if (templatetype == 'function') {\n                    return {\n                        render: function (data, elt) {\n                            var res = template(data, elt);\n                            return WinJS.Promise.as(res);\n                        }\n                    };\n                }\n                else if (template.winControl) {\n                    return template.winControl;\n                }\n                else if (template.render) {\n                    return template;\n                }\n            }\n        }\n        Utils.getTemplate = getTemplate;\n        /**\n         * get a function from an expression, for example 'page:myAction' will return the myAction function from the parent page.\n         * The returned function will be bound to it's owner. This function relies on {link WinJSContrib.Utils.resolveValue}, see this for details about how data are crawled\n         * @function WinJSContrib.Utils.resolveMethod\n         * @param {HTMLElement} element DOM element to look\n         * @param {string} text expression like 'page:something' or 'ctrl:something' or 'something'\n         * @returns {function}\n         */\n        function resolveMethod(element, text) {\n            var res = WinJSContrib.Utils.resolveValue(element, text);\n            if (res && typeof res == 'function')\n                return res;\n            return undefined;\n        }\n        Utils.resolveMethod = resolveMethod;\n        function readValue(element, text) {\n            var res = WinJSContrib.Utils.resolveValue(element, text);\n            if (res) {\n                if (typeof res == 'function')\n                    return res(element);\n                else\n                    return res;\n            }\n            return undefined;\n        }\n        Utils.readValue = readValue;\n        /**\n         * Utility functions used by WinJSContrib.Utils.resolveValue and WinJSContrib.Utils.applyValue\n         * @namespace WinJSContrib.Utils.ValueParsers\n         */\n        Utils.ValueParsers = {\n            /**\n             * Get value from current page in parent navigator\n             * @function WinJSContrib.Utils.ValueParsers.navpage\n             */\n            \"navpage\": function (element, text, context) {\n                var control = (context && context.data) ? context.data.navpage : null;\n                if (!control) {\n                    if (WinJSContrib.Utils.getParentPage) {\n                        control = WinJSContrib.Utils.getParentPage(element);\n                        if (context && context.data)\n                            context.data.navpage = control;\n                    }\n                    if (!control && WinJSContrib.UI.Application.navigator) {\n                        control = WinJSContrib.UI.Application.navigator.pageControl;\n                        if (context && context.data)\n                            context.data.navpage = control;\n                    }\n                }\n                if (!control)\n                    return;\n                if (context)\n                    context.parentControl = control;\n                var method = WinJSContrib.Utils.readProperty(control, text);\n                if (method && typeof method === 'function')\n                    return method.bind(control);\n                else\n                    return method;\n            },\n            /**\n             * Get value from parent element with 'pagecontrol' class\n             * @function WinJSContrib.Utils.ValueParsers.page\n             */\n            \"page\": function (element, text, context) {\n                var control = (context && context.data) ? context.data.page : null;\n                if (!control) {\n                    control = WinJSContrib.Utils.getParentControlByClass('pagecontrol', element);\n                    if (context && context.data)\n                        context.data.page = control;\n                }\n                if (!control)\n                    return;\n                if (context)\n                    context.parentControl = control;\n                var method = WinJSContrib.Utils.readProperty(control, text);\n                if (method && typeof method === 'function')\n                    return method.bind(control);\n                else\n                    return method;\n            },\n            /**\n             * Get value from parent scope\n             * @function WinJSContrib.Utils.ValueParsers.ctrl\n             */\n            \"ctrl\": function (element, text, context) {\n                var control = (context && context.data) ? context.data.scope : null;\n                if (!control) {\n                    control = WinJSContrib.Utils.getScopeControl(element);\n                    if (context && context.data)\n                        context.data.scope = control;\n                }\n                if (!control)\n                    return;\n                if (context)\n                    context.parentControl = control;\n                var method = WinJSContrib.Utils.readProperty(control, text);\n                if (method && typeof method === 'function')\n                    return method.bind(control);\n                else\n                    return method;\n            },\n            /**\n             * select a node from DOM\n             * @function WinJSContrib.Utils.ValueParsers.select\n             */\n            \"select\": function (element, text, context) {\n                var control = (context && context.data) ? context.data.scope : null;\n                if (!control) {\n                    control = WinJSContrib.Utils.getScopeControl(element);\n                    if (context && context.data)\n                        context.data.scope = control;\n                }\n                var element = null;\n                var items = text.split('|');\n                var selector = items[0];\n                if (control) {\n                    element = control.element.querySelector(selector);\n                }\n                if (!element)\n                    element = document.querySelector(selector);\n                if (items.length == 1) {\n                    return element;\n                }\n                else if (items.length > 1) {\n                    var val = readProperty(element, text.substr(items[0].length + 1));\n                    return val;\n                }\n            },\n            /**\n             * get an object formatted as JSON\n             * @function WinJSContrib.Utils.ValueParsers.obj\n             */\n            \"obj\": function (element, text, context) {\n                return WinJS.UI.optionsParser(text, window, {\n                    select: WinJS.Utilities.markSupportedForProcessing(function (text) {\n                        var parent = WinJSContrib.Utils.getScopeControl(element);\n                        if (parent) {\n                            return parent.element.querySelector(text);\n                        }\n                        else {\n                            return document.querySelector(text);\n                        }\n                    })\n                });\n            },\n            /**\n             * mark a promise for resolution (if used in applyValue, the promise will get resolved and the promise's result will be affected)\n             * @function WinJSContrib.Utils.ValueParsers.prom\n             */\n            \"prom\": function (element, text, context) {\n                var res = resolveValue(element, text, context);\n                if (res.then) {\n                    res = res.then(null, null);\n                    res.mcnMustResolve = true;\n                }\n                return res;\n            },\n            /**\n             * wrap result in WinJS.Binding.List().dataSource\n             * usefull for ListViews\n             * @function WinJSContrib.Utils.ValueParsers.list\n             */\n            \"list\": function (element, text, context) {\n                var res = resolveValue(element, text, context);\n                if (res) {\n                    if (res.then) {\n                        var p = res.then(function (data) {\n                            return new WinJS.Binding.List(data).dataSource;\n                        });\n                        p.mcnMustResolve = true;\n                        return p;\n                    }\n                    return new WinJS.Binding.List(res).dataSource;\n                }\n            },\n            /**\n             * get value from global scope\n             * @function WinJSContrib.Utils.ValueParsers.global\n             */\n            \"global\": function (element, text, context) {\n                return WinJSContrib.Utils.readProperty(window, text);\n            },\n            /**\n             * get a template from uri\n             * @function WinJSContrib.Utils.ValueParsers.templ\n             */\n            \"templ\": function (element, text, context) {\n                return WinJSContrib.Templates.get(text);\n            },\n            /**\n             * return element property\n             * @function WinJSContrib.Utils.ValueParsers.element\n             */\n            \"element\": function (element, text, context) {\n                var res = resolveValue(element, text, context);\n                if (res)\n                    return res.element;\n            },\n            \"event\": function (element, text, context) {\n                var res = resolveValue(element, text, context);\n                var parentControl = null;\n                if (!res || !context || !context.name) {\n                    return;\n                }\n                if (context)\n                    parentControl = context.parentControl;\n                if (res && typeof res === 'function') {\n                    if (parentControl && parentControl.eventTracker) {\n                        parentControl.eventTracker.addEvent(context.control, context.name, res);\n                    }\n                    else {\n                        context.control.addEventListener(context.name, res);\n                    }\n                }\n            }\n        };\n        /**\n         * resolve value from an expression. This helper will crawl the DOM up, and provide the property or function from parent page or control.\n         * @function WinJSContrib.Utils.resolveValue\n         * @param {HTMLElement} element DOM element to look\n         * @param {string} text expression like 'page:something' or 'ctrl:something' or 'something'\n         * @returns {Object}\n         */\n        function resolveValue(element, text, context) {\n            var methodName, control, method;\n            var items = text.split(':');\n            if (items.length > 1) {\n                var name = items[0];\n                var val = text.substr(name.length + 1);\n                var parser = Utils.ValueParsers[name];\n                if (parser) {\n                    return parser(element, val, context);\n                }\n            }\n            return text; //WinJSContrib.Utils.readProperty(window, text);\n        }\n        Utils.resolveValue = resolveValue;\n        /**\n         * call resolve value and apply result to a target object\n         * @function WinJSContrib.Utils.applyValue\n         * @param {HTMLElement} element DOM element to look\n         * @param {string} text expression like 'page:something' or 'ctrl:something' or 'something'\n         * @param {string} target target object\n         * @param {string} targetPath path to dest property\n         */\n        function applyValue(element, text, target, targetPath, context) {\n            var tmp = WinJSContrib.Utils.resolveValue(element, text, context);\n            if (tmp && tmp.then && tmp.mcnMustResolve) {\n                tmp.then(function (data) {\n                    WinJSContrib.Utils.writeProperty(target, targetPath, data);\n                });\n            }\n            else {\n                WinJSContrib.Utils.writeProperty(target, targetPath, tmp);\n            }\n        }\n        Utils.applyValue = applyValue;\n        /**\n         * Checks in a safe way if an object has a value, which could be 'false', '0' or '\"\"'\n         * @function WinJSContrib.Utils.hasValue\n         * @param {Object} item The object to check.\n         * @returns {Boolean} Whether the object has a value or not.\n         */\n        function hasValue(item) {\n            return typeof item !== \"undefined\" && item !== null;\n        }\n        Utils.hasValue = hasValue;\n        /**\n         * format error from an xhr call\n         * @function WinJSContrib.Utils.formatXHRError\n         */\n        function formatXHRError(xhr) {\n            return \"{0} - {1}: {2}\".format(xhr.status, xhr.statusText, xhr.responseText);\n        }\n        Utils.formatXHRError = formatXHRError;\n        /**\n         * Unwraps the real error from a WinJS.Promise.join operation, which by design returns an array with 'undefined' for all cells,\n         * excepts the one corresponding to the promise that really faulted.\n         * @function WinJSContrib.Utils.unwrapJoinError\n         * @param {function} errorCallback The callback to use to handle the error.\n         * @returns {Function} The result of the callback being fired with the real error.\n         */\n        function unwrapJoinError(errorCallback) {\n            return function (errorArray) {\n                var unwrappedError = null;\n                for (var i = 0; i < errorArray.length; i++) {\n                    var tentativeError = errorArray[i];\n                    if (typeof tentativeError !== \"undefined\") {\n                        unwrappedError = tentativeError;\n                        break;\n                    }\n                }\n                return errorCallback(unwrappedError);\n            };\n        }\n        Utils.unwrapJoinError = unwrapJoinError;\n        /**\n         * inject properties from source object to target object\n         * @function WinJSContrib.Utils.inject\n         */\n        function inject(target, source) {\n            if (source) {\n                for (var k in source) {\n                    target[k] = source[k];\n                }\n            }\n        }\n        Utils.inject = inject;\n    })(Utils = WinJSContrib.Utils || (WinJSContrib.Utils = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n/**\n * @namespace WinJSContrib.Templates\n */\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Templates;\n    (function (Templates) {\n        var cache = {};\n        /**\n         * get a template from it's path\n         * @function get\n         * @memberof WinJSContrib.Templates\n         * @param {string} uri path to template file\n         * @returns {WinJS.Binding.Template} template object\n         */\n        function get(uri) {\n            var template = cache[uri];\n            if (cache[uri])\n                return template;\n            return new WinJS.Binding.Template(null, { href: uri });\n        }\n        Templates.get = get;\n        /**\n         * get a template and turn it to a rendering function that takes an item promise, and return a DOM element\n         * @function WinJSContrib.Templates.interactive\n         * @param {string} uri path to template file\n         * @param {Object} args definition of interactive elements\n         * @returns {function} rendering function that takes an item promise, and return a DOM element\n         */\n        function interactive(uri, args) {\n            var template = WinJSContrib.Templates.get(uri);\n            if (template) {\n                return WinJSContrib.Templates.makeInteractive(template, args);\n            }\n            else {\n                throw { message: 'template not found for ' + uri };\n            }\n        }\n        Templates.interactive = interactive;\n        /**\n         * generate a rendering function that takes an item promise, and return a DOM element\n         * @function WinJSContrib.Templates.get\n         * @param {WinJS.Binding.Template} template template object\n         * @param {Object} args definition of interactive elements\n         * @returns {function} rendering function that takes an item promise, and return a DOM element\n         */\n        function makeInteractive(template, args) {\n            return function (itemPromise) {\n                return itemPromise.then(function (item) {\n                    return template.render(item).then(function (rendered) {\n                        if (args.tap) {\n                            for (var n in args.tap) {\n                                var elt = rendered.querySelector(n);\n                                WinJSContrib.UI.tap(elt, function (arg) {\n                                    args.tap[n](arg, item);\n                                });\n                            }\n                        }\n                        if (args.click) {\n                            for (var n in args.click) {\n                                var elt = rendered.querySelector(n);\n                                elt.onclick = function (arg) {\n                                    args.click[n](arg, item);\n                                };\n                            }\n                        }\n                        return rendered;\n                    });\n                });\n            };\n        }\n        Templates.makeInteractive = makeInteractive;\n    })(Templates = WinJSContrib.Templates || (WinJSContrib.Templates = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var UI;\n    (function (UI) {\n        UI.Application = {};\n        /**\n         * indicate if fragment should not look for resources when building control\n         * @field WinJSContrib.UI.disableAutoResources\n         * @type {boolean}\n         */\n        UI.disableAutoResources = false;\n        /**\n         * Calculate offset of element relative to parent element. If parent parameter is null, offset is relative to document\n         * @function WinJSContrib.UI.offsetFrom\n         * @param {HTMLElement} element element to evaluate\n         * @param {HTMLElement} parent reference of offset\n         */\n        function offsetFrom(element, parent) {\n            var xPosition = 0;\n            var yPosition = 0;\n            var w = element.clientWidth;\n            var h = element.clientHeight;\n            while (element && element != parent) {\n                xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n                yPosition += (element.offsetTop - element.scrollTop + element.clientTop);\n                element = element.offsetParent;\n            }\n            return { x: xPosition, y: yPosition, width: w, height: h };\n        }\n        UI.offsetFrom = offsetFrom;\n        var EventTracker = (function () {\n            /**\n             * @class WinJSContrib.UI.EventTracker\n             * @classdesc object to register and release events from addEventListener or bind\n             */\n            function EventTracker() {\n                this.events = [];\n            }\n            /**\n             * register an event from an object\n             * @function WinJSContrib.UI.EventTracker.prototype.addEvent\n             * @param {Object} e object containing addEventListener\n             * @param {string} eventName name of the event\n             * @param {function} handler\n             * @param {boolean} capture\n             * @returns {function} function to call for unregistering the event\n             */\n            EventTracker.prototype.addEvent = function (e, eventName, handler, capture) {\n                var tracker = this;\n                e.addEventListener(eventName, handler, capture);\n                var unregister = function () {\n                    try {\n                        e.removeEventListener(eventName, handler);\n                        var idx = tracker.events.indexOf(unregister);\n                        if (idx >= 0) {\n                            tracker.events.splice(idx, 1);\n                        }\n                    }\n                    catch (exception) {\n                        console.error('unexpected error while releasing callback ' + exception.message);\n                    }\n                };\n                this.events.push(unregister);\n                return unregister;\n            };\n            /**\n             * register binding event\n             * @function WinJSContrib.UI.EventTracker.prototype.addBinding\n             * @param {Object} e object containing bind method\n             * @param {string} eventName name of the binding event\n             * @param {function} handler\n             */\n            EventTracker.prototype.addBinding = function (e, eventName, handler) {\n                e.bind(eventName, handler);\n                var unregister = function () {\n                    e.unbind(eventName, handler);\n                };\n                this.events.push(unregister);\n                return unregister;\n            };\n            /**\n             * release all registered events\n             * @function WinJSContrib.UI.EventTracker.prototype.dispose\n             */\n            EventTracker.prototype.dispose = function () {\n                for (var i = 0; i < this.events.length; i++) {\n                    this.events[i]();\n                }\n                this.events = [];\n            };\n            return EventTracker;\n        })();\n        UI.EventTracker = EventTracker;\n        /**\n         * open all appbars\n         * @function WinJSContrib.UI.appbarsOpen\n         */\n        function appbarsOpen() {\n            var res = document.querySelectorAll('div[data-win-control=\"WinJS.UI.AppBar\"],div[data-win-control=\"WinJS.UI.NavBar\"]');\n            if (res && res.length) {\n                for (var i = 0; i < res.length; i++) {\n                    var e = res[i];\n                    if (e.winControl) {\n                        e.winControl.show();\n                    }\n                }\n            }\n        }\n        UI.appbarsOpen = appbarsOpen;\n        /**\n         * close all appbars\n         * @function WinJSContrib.UI.appbarsClose\n         */\n        function appbarsClose() {\n            var res = document.querySelectorAll('div[data-win-control=\"WinJS.UI.AppBar\"],div[data-win-control=\"WinJS.UI.NavBar\"]');\n            if (res && res.length) {\n                for (var i = 0; i < res.length; i++) {\n                    var e = res[i];\n                    if (e.winControl) {\n                        e.winControl.hide();\n                    }\n                }\n            }\n        }\n        UI.appbarsClose = appbarsClose;\n        /**\n         * disable all appbars\n         * @function WinJSContrib.UI.appbarsDisable\n         */\n        function appbarsDisable() {\n            var res = document.querySelectorAll('div[data-win-control=\"WinJS.UI.AppBar\"],div[data-win-control=\"WinJS.UI.NavBar\"]');\n            if (res && res.length) {\n                for (var i = 0; i < res.length; i++) {\n                    var e = res[i];\n                    if (e.winControl) {\n                        e.winControl.disabled = true;\n                    }\n                }\n            }\n        }\n        UI.appbarsDisable = appbarsDisable;\n        /**\n         * enable all appbars\n         * @function WinJSContrib.UI.appbarsEnable\n         */\n        function appbarsEnable() {\n            var elements = document.querySelectorAll('div[data-win-control=\"WinJS.UI.AppBar\"],div[data-win-control=\"WinJS.UI.NavBar\"]');\n            if (elements && elements.length) {\n                for (var i = 0, l = elements.length; i < l; i++) {\n                    var el = elements[i];\n                    if (el.winControl) {\n                        el.winControl.disabled = false;\n                    }\n                }\n            }\n        }\n        UI.appbarsEnable = appbarsEnable;\n        /**\n         * build a promise around element \"load\" event (work for all element with src property like images, iframes, ...)\n         * @function WinJSContrib.UI.elementLoaded\n         * @param {HTMLElement} element\n         * @param {string} url url used to feed \"src\" on element\n         * @returns {WinJS.Promise}\n         */\n        function elementLoaded(elt, url) {\n            return new WinJS.Promise(function (complete, error) {\n                function onerror(e) {\n                    elt.onload = undefined;\n                    elt.onerror = undefined;\n                    elt.onreadystatechange = undefined;\n                    error('element not loaded');\n                }\n                function onload(e) {\n                    elt.onload = undefined;\n                    elt.onerror = undefined;\n                    elt.onreadystatechange = undefined;\n                    complete({\n                        element: elt,\n                        url: url\n                    });\n                }\n                elt.onerror = onerror;\n                elt.onload = onload;\n                elt.onreadystatechange = onload;\n                if (elt.naturalWidth > 0) {\n                    onload(undefined);\n                }\n                elt.src = url;\n            });\n        }\n        UI.elementLoaded = elementLoaded;\n        /**\n         * Create a promise for getting an image object from url\n         * @function WinJSContrib.UI.loadImage\n         * @param {string} imgUrl url for the picture\n         * @returns {WinJS.Promise}\n         */\n        function loadImage(imgUrl) {\n            return new WinJS.Promise(function (complete, error) {\n                var image = new Image();\n                function onerror(e) {\n                    image.onload = undefined;\n                    image.onerror = undefined;\n                    error({ message: 'image not loaded : ' + imgUrl, path: imgUrl });\n                }\n                function onload(e) {\n                    image.onload = undefined;\n                    image.onerror = undefined;\n                    complete({\n                        element: image,\n                        url: imgUrl\n                    });\n                }\n                image.onerror = onerror;\n                image.onload = onload;\n                if (image.naturalWidth > 0) {\n                    onload(undefined);\n                }\n                image.src = imgUrl;\n            });\n        }\n        UI.loadImage = loadImage;\n        /**\n         * List all elements found after provided element\n         * @function WinJSContrib.UI.listElementsAfterMe\n         * @param {HTMLElement} elt target element\n         * @returns {Array} list of sibling elements\n         */\n        function listElementsAfterMe(elt) {\n            var res = [];\n            var passed = false;\n            if (elt.parentElement) {\n                var parent = elt.parentElement;\n                for (var i = 0; i < parent.children.length; i++) {\n                    if (parent.children[i] === elt) {\n                        passed = true;\n                    }\n                    else if (passed) {\n                        res.push(parent.children[i]);\n                    }\n                }\n            }\n            return res;\n        }\n        UI.listElementsAfterMe = listElementsAfterMe;\n        /**\n         * create an animation for removing an element from a list\n         * @function WinJSContrib.UI.removeElementAnimation\n         * @param {HTMLElement} element that will be removed\n         * @returns {WinJS.Promise}\n         */\n        function removeElementAnimation(elt) {\n            return new WinJS.Promise(function (complete, error) {\n                var remainings = WinJSContrib.UI.listElementsAfterMe(elt);\n                var anim = WinJS.UI.Animation.createDeleteFromListAnimation([\n                    elt\n                ], remainings);\n                elt.style.position = \"fixed\";\n                elt.style.opacity = '0';\n                anim.execute().done(function () {\n                    complete(elt);\n                });\n            });\n        }\n        UI.removeElementAnimation = removeElementAnimation;\n        function bindAction(el, element, control, item) {\n            if (!el)\n                return;\n            el.classList.add('page-action');\n            var actionName = el.dataset.pageAction || el.getAttribute('tap');\n            var action = control[actionName];\n            if (action && typeof action === 'function') {\n                WinJSContrib.UI.tap(el, function (eltarg) {\n                    var p = WinJS.Promise.wrap(actionArgs);\n                    var actionArgs = eltarg.dataset.pageActionArgs || el.getAttribute('tap-args');\n                    if (actionArgs && typeof actionArgs == 'string') {\n                        var tmp = WinJSContrib.Utils.readValue(eltarg, actionArgs);\n                        p = WinJS.Promise.as(tmp).then(function (val) {\n                            if (typeof val === 'string') {\n                                try {\n                                    val = WinJS.UI.optionsParser(val, window);\n                                }\n                                catch (exception) {\n                                    return;\n                                }\n                            }\n                            return val;\n                        });\n                        if (tmp) {\n                            actionArgs = tmp;\n                        }\n                    }\n                    return p.then(function (arg) {\n                        return control[actionName].bind(control)({ elt: eltarg, args: arg, item: item });\n                    });\n                });\n            }\n        }\n        /**\n         * setup declarative binding to parent control function. It looks for \"data-page-action\" attributes,\n         * and try to find a matching method on the supplyed control.\n         * You could add arguments with a \"page-action-args\" attribute. The argument can be an object or a function\n         * @function WinJSContrib.UI.bindPageActions\n         * @param {HTMLElement} element root node crawled for page actions\n         * @param {Object} control control owning functions to call\n         * @param {item} optionnal argument for adding an item to call\n         */\n        function bindPageActions(element, control, item) {\n            var elements = element.querySelectorAll('*[data-page-action], *[tap]');\n            if (elements && elements.length) {\n                for (var i = 0, l = elements.length; i < l; i++) {\n                    var el = elements[i];\n                    bindAction(el, element, control, item);\n                }\n            }\n        }\n        UI.bindPageActions = bindPageActions;\n        function bindLink(el, element, item) {\n            if (!el)\n                return;\n            el.classList.add('page-link');\n            var applink = el.getAttribute('applink');\n            var target = el.dataset.pageLink || el.getAttribute('linkto');\n            if (target && target.indexOf('/') < 0) {\n                var tmp = WinJSContrib.Utils.readProperty(window, target);\n                if (tmp) {\n                    target = tmp;\n                }\n            }\n            if (target) {\n                var options = el.dataset.pageActionOptions || el.getAttribute('tap-options');\n                if (options) {\n                    try {\n                        options = WinJS.UI.optionsParser(options, window);\n                    }\n                    catch (exception) {\n                        return;\n                    }\n                }\n                WinJSContrib.UI.tap(el, function (eltarg) {\n                    var p = WinJS.Promise.wrap();\n                    var actionArgs = eltarg.dataset.pageActionArgs || el.getAttribute('linkto-args');\n                    if (actionArgs && typeof actionArgs == 'string') {\n                        var tmp = WinJSContrib.Utils.readValue(eltarg, actionArgs);\n                        p = WinJS.Promise.as(tmp).then(function (val) {\n                            if (typeof val === 'string') {\n                                try {\n                                    val = WinJS.UI.optionsParser(val, window);\n                                }\n                                catch (exception) {\n                                }\n                            }\n                            return val;\n                        });\n                    }\n                    if (!actionArgs && item)\n                        actionArgs = { item: item };\n                    return p.then(function (actionArgs) {\n                        if (!applink && WinJSContrib.UI.parentNavigator && WinJSContrib.UI.parentNavigator(eltarg)) {\n                            var nav = WinJSContrib.UI.parentNavigator(eltarg);\n                            return nav.navigate(target, actionArgs);\n                        }\n                        else {\n                            return WinJS.Navigation.navigate(target, actionArgs);\n                        }\n                    });\n                }, options);\n            }\n        }\n        /**\n         * setup declarative binding to page link. It looks for \"data-page-link\" attributes.\n         * If any the content of the attribute point toward a page. clicking that element will navigate to that page.\n         * You could add arguments with a \"page-action-args\" attribute. The argument can be an object or a function\n         * @function WinJSContrib.UI.bindPageLinks\n         * @param {HTMLElement} element root node crawled for page actions\n         */\n        function bindPageLinks(element, item) {\n            var elements = element.querySelectorAll('*[data-page-link], *[linkto]');\n            if (elements && elements.length) {\n                for (var i = 0, l = elements.length; i < l; i++) {\n                    var el = elements[i];\n                    bindLink(el, element, item);\n                }\n            }\n        }\n        UI.bindPageLinks = bindPageLinks;\n        function parentNavigator(element) {\n            var current = element.parentNode;\n            while (current) {\n                if (current.mcnNavigator) {\n                    return current.winControl;\n                }\n                current = current.parentNode;\n            }\n        }\n        UI.parentNavigator = parentNavigator;\n        function bindMember(el, element, control) {\n            if (!el)\n                return;\n            el.classList.add('page-member');\n            var memberName = el.dataset.pageMember || el.getAttribute('member');\n            if (!memberName)\n                memberName = el.id;\n            if (memberName && !control[memberName]) {\n                control[memberName] = el;\n                if (el.winControl) {\n                    control[memberName] = el.winControl;\n                }\n            }\n        }\n        /**\n         * Add this element or control as member to the control. It looks for \"data-page-member\" attributes. If attribute is empty, it tooks the element id as member name.\n         * @function WinJSContrib.UI.bindMembers\n         * @param {HTMLElement} element root node crawled for page actions\n         * @param {Object} control control owning functions to call\n         */\n        function bindMembers(element, control) {\n            var elements = element.querySelectorAll('*[data-page-member], *[member]');\n            if (elements && elements.length) {\n                for (var i = 0, l = elements.length; i < l; i++) {\n                    var el = elements[i];\n                    bindMember(el, element, control);\n                }\n            }\n        }\n        UI.bindMembers = bindMembers;\n        /**\n         * setup declarative binding to parent control function and to navigation links. It internally invoke both {@link WinJSContrib.UI.bindPageActions} and {@link WinJSContrib.UI.bindPageLinks}\n         * @function WinJSContrib.UI.bindActions\n         * @param {HTMLElement} element root node crawled for page actions\n         * @param {Object} control control owning functions to call\n         */\n        function bindActions(element, control, item) {\n            WinJSContrib.UI.bindPageActions(element, control, item);\n            WinJSContrib.UI.bindPageLinks(element, item);\n        }\n        UI.bindActions = bindActions;\n        /**\n         * Trigger events on media queries. This class is usefull as a component for other controls to change some properties based on media queries\n         * @class WinJSContrib.UI.MediaTrigger\n         * @param {Object} items object containing one property for each query\n         * @param {Object} linkedControl control linked to media trigger\n         */\n        var MediaTrigger = (function () {\n            function MediaTrigger(items, linkedControl) {\n                var ctrl = this;\n                ctrl.queries = [];\n                ctrl.linkedControl = linkedControl;\n                for (var name in items) {\n                    var e = items[name];\n                    if (e.query) {\n                        ctrl.registerMediaEvent(name, e.query, e);\n                    }\n                }\n            }\n            /**\n             * @function WinJSContrib.UI.MediaTrigger.prototype.dispose\n             * release media trigger\n             */\n            MediaTrigger.prototype.dispose = function () {\n                var ctrl = this;\n                ctrl.linkedControl = null;\n                this.queries.forEach(function (q) {\n                    q.dispose();\n                });\n            };\n            /**\n             * register an event from a media query\n             * @function WinJSContrib.UI.MediaTrigger.prototype.registerMediaEvent\n             * @param {string} name event name\n             * @param {string} query media query\n             * @param {Object} data data associated with this query\n             */\n            MediaTrigger.prototype.registerMediaEvent = function (name, query, data) {\n                var ctrl = this;\n                var mq = window.matchMedia(query);\n                var internalQuery = {\n                    name: name,\n                    query: query,\n                    data: data,\n                    mq: mq,\n                    dispose: null\n                };\n                var f = function (arg) {\n                    if (arg.matches) {\n                        ctrl._mediaEvent(arg, internalQuery);\n                    }\n                };\n                mq.addListener(f);\n                internalQuery.dispose = function () {\n                    mq.removeListener(f);\n                };\n                ctrl.queries.push(internalQuery);\n            };\n            MediaTrigger.prototype._mediaEvent = function (arg, query) {\n                var ctrl = this;\n                if (ctrl.linkedControl) {\n                    WinJS.UI.setOptions(ctrl.linkedControl, query.data);\n                }\n                ctrl.dispatchEvent('media', query);\n            };\n            /**\n             * @function WinJSContrib.UI.MediaTrigger.prototype.check\n             * Check all registered queries\n             */\n            MediaTrigger.prototype.check = function () {\n                var ctrl = this;\n                ctrl.queries.forEach(function (q) {\n                    var mq = window.matchMedia(q.query);\n                    if (mq.matches) {\n                        ctrl._mediaEvent({ matches: true }, q);\n                    }\n                });\n            };\n            /**\n             * Adds an event listener to the control.\n             * @function WinJSContrib.UI.MediaTrigger.prototype.addEventListener\n             * @param type The type (name) of the event.\n             * @param listener The listener to invoke when the event gets raised.\n             * @param useCapture If true, initiates capture, otherwise false.\n            **/\n            MediaTrigger.prototype.addEventListener = function (type, listener, useCapture) {\n            };\n            /**\n             * Raises an event of the specified type and with the specified additional properties.\n             * @function WinJSContrib.UI.MediaTrigger.prototype.dispatchEvent\n             * @param type The type (name) of the event.\n             * @param eventProperties The set of additional properties to be attached to the event object when the event is raised.\n             * @returns true if preventDefault was called on the event.\n            **/\n            MediaTrigger.prototype.dispatchEvent = function (type, eventProperties) {\n                return false;\n            };\n            /**\n             * Removes an event listener from the control.\n             * @function WinJSContrib.UI.MediaTrigger.prototype.removeEventListener\n             * @param type The type (name) of the event.\n             * @param listener The listener to remove.\n             * @param useCapture true if capture is to be initiated, otherwise false.\n            **/\n            MediaTrigger.prototype.removeEventListener = function (type, listener, useCapture) { };\n            return MediaTrigger;\n        })();\n        UI.MediaTrigger = MediaTrigger;\n        WinJS.Class.mix(WinJSContrib.UI.MediaTrigger, WinJS.Utilities.eventMixin);\n        /**\n         * register navigation related events like hardware backbuttons. This method keeps track of previously registered navigation handlers\n         *  and disable them until the latests is closed, enablinh multi-level navigation.\n         * @function WinJSContrib.UI.registerNavigationEvents\n         * @param {Object} control control taking ownership of navigation handlers\n         * @param {function} callback callback to invoke when \"back\" is requested\n         * @returns {function} function to call for releasing navigation handlers\n         */\n        var registeredNavigationStack = [];\n        function registerNavigationEvents(control, callback) {\n            var locked = [];\n            var registration = { control: control, callback: callback };\n            registeredNavigationStack.push(registration);\n            //control.navLocks = control.navLocks || [];\n            //control.navLocks.isActive = true;\n            var backhandler = function (arg) {\n                var idx = registeredNavigationStack.indexOf(registration);\n                if (idx === registeredNavigationStack.length - 1) {\n                    registration.callback.bind(registration.control)(arg);\n                    idx--;\n                    while (idx >= 0 && !arg.handled) {\n                        var tmp = registeredNavigationStack[idx];\n                        tmp.callback.bind(tmp.control)(arg);\n                        idx--;\n                    }\n                }\n                //if (!control.navLocks || control.navLocks.length === 0) {\n                //    callback.bind(control)(arg);\n                //}\n            };\n            //var navcontrols = document.querySelectorAll('.mcn-navigation-ctrl');\n            //for (var i = 0; i < navcontrols.length; i++) {\n            //    var navigationCtrl = (<any>navcontrols[i]).winControl;\n            //    if (navigationCtrl && navigationCtrl != control) {\n            //        navigationCtrl.navLocks = navigationCtrl.navLocks || [];\n            //        if (navigationCtrl.navLocks.isActive && (!navigationCtrl.navLocks.length || navigationCtrl.navLocks.indexOf(control) < 0)) {\n            //            navigationCtrl.navLocks.push(control);\n            //            locked.push(navigationCtrl);\n            //        }\n            //    }\n            //}\n            function cancelNavigation(args) {\n                //this.eventTracker.addEvent(nav, 'beforenavigate', this._beforeNavigate.bind(this));\n                var p = new WinJS.Promise(function (c) { });\n                args.detail.setPromise(p);\n                //setImmediate(function () {\n                p.cancel();\n                //});\n            }\n            WinJS.Navigation.addEventListener('beforenavigate', cancelNavigation);\n            if (window.Windows && window.Windows.Phone)\n                window.Windows.Phone.UI.Input.HardwareButtons.addEventListener(\"backpressed\", backhandler);\n            else {\n                document.addEventListener(\"backbutton\", backhandler);\n                var systemNavigationManager = null;\n                if (WinJSContrib.UI && WinJSContrib.UI.enableSystemBackButtonVisibility && window.Windows && window.Windows.UI && window.Windows.UI.Core && window.Windows.UI.Core.SystemNavigationManager) {\n                    systemNavigationManager = window.Windows.UI.Core.SystemNavigationManager.getForCurrentView();\n                    systemNavigationManager.addEventListener('backrequested', backhandler);\n                }\n            }\n            var keypress = function (args) {\n                if (args.key === \"Esc\" || args.key === \"Backspace\") {\n                    backhandler(args);\n                }\n            };\n            document.body.addEventListener('keypress', keypress);\n            if (WinJSContrib.UI.Application && WinJSContrib.UI.Application.navigator)\n                WinJSContrib.UI.Application.navigator.addLock();\n            return function () {\n                if (WinJSContrib.UI.Application && WinJSContrib.UI.Application.navigator)\n                    WinJSContrib.UI.Application.navigator.removeLock();\n                //control.navLocks.isActive = false;\n                //locked.forEach(function (navigationCtrl) {\n                //    var idx = navigationCtrl.navLocks.indexOf(control);\n                //    if (idx >= 0)\n                //        navigationCtrl.navLocks.splice(idx, 1);\n                //});\n                var idx = registeredNavigationStack.indexOf(registration);\n                registeredNavigationStack.splice(idx, 1);\n                document.body.removeEventListener('keypress', keypress);\n                WinJS.Navigation.removeEventListener('beforenavigate', cancelNavigation);\n                if (window.Windows && window.Windows.Phone)\n                    window.Windows.Phone.UI.Input.HardwareButtons.removeEventListener(\"backpressed\", backhandler);\n                else {\n                    document.removeEventListener(\"backbutton\", backhandler);\n                    var systemNavigationManager = null;\n                    if (WinJSContrib.UI && WinJSContrib.UI.enableSystemBackButtonVisibility && window.Windows && window.Windows.UI && window.Windows.UI.Core && window.Windows.UI.Core.SystemNavigationManager) {\n                        systemNavigationManager = window.Windows.UI.Core.SystemNavigationManager.getForCurrentView();\n                        systemNavigationManager.removeEventListener('backrequested', backhandler);\n                    }\n                }\n            };\n        }\n        UI.registerNavigationEvents = registerNavigationEvents;\n        /**\n         * remove tap behavior\n         * @function WinJSContrib.UI.untap\n         * @param {HtmlElement} element element to clean\n         */\n        function untap(element) {\n            if (!element)\n                return;\n            if (element.mcnTapTracking) {\n                element.mcnTapTracking.dispose();\n                element.mcnTapTracking = null;\n            }\n        }\n        UI.untap = untap;\n        /**\n         * remove tap behavior from all childs\n         * @function WinJSContrib.UI.untapAll\n         * @param {HtmlElement} element element to clean\n         */\n        function untapAll(element) {\n            if (!element)\n                return;\n            var taps = element.querySelectorAll('.tap');\n            for (var i = 0, l = taps.length; i < l; i++) {\n                untap(taps[i]);\n            }\n        }\n        UI.untapAll = untapAll;\n        UI.defaultTapBehavior = {\n            animDown: null,\n            animUp: null,\n            disableAnimation: false,\n            disableAria: false,\n            awaitAnim: false,\n            errorDelay: 3000,\n            mapClickEvents: 0\n        };\n        if (WinJS && WinJS.UI && WinJS.UI.Animation) {\n            UI.defaultTapBehavior.animDown = WinJS.UI.Animation.pointerDown;\n            UI.defaultTapBehavior.animUp = WinJS.UI.Animation.pointerUp;\n        }\n        /**\n         * add tap behavior to an element, tap manages quirks like click delay, visual feedback, etc\n         * @function WinJSContrib.UI.tap\n         * @param {HtmlElement} element element to make \"tappable\"\n         * @param {function} callback callback function invoked on tap\n         * @param {Object} options tap options\n         */\n        function tap(element, callback, options) {\n            if (!element)\n                return;\n            var ptDown = function (event) {\n                var elt = event.currentTarget || event.target;\n                var tracking = elt.mcnTapTracking;\n                if (!elt.disabled && tracking && (event.button === undefined || event.button === 0 || (tracking.allowRickClickTap && event.button === 2))) {\n                    if (tracking.lock) {\n                        if (event.pointerId && event.currentTarget.setPointerCapture)\n                            event.currentTarget.setPointerCapture(event.pointerId);\n                        event.stopPropagation();\n                        event.preventDefault();\n                    }\n                    WinJS.Utilities.addClass(elt, 'tapped');\n                    WinJS.Utilities.removeClass(elt, 'tap-error');\n                    clearTimeout(tracking.pendingErrorTimeout);\n                    if (event.changedTouches) {\n                        tracking.pointerdown = { x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY };\n                    }\n                    else {\n                        tracking.pointerdown = { x: event.clientX, y: event.clientY };\n                    }\n                    tracking.animDown(event.currentTarget);\n                    if (tracking.tapOnDown) {\n                        tracking.invoke(elt, event);\n                    }\n                }\n            };\n            var ptOut = function (event) {\n                var elt = event.currentTarget || event.target;\n                var tracking = elt.mcnTapTracking;\n                if (tracking && tracking.pointerdown) {\n                    WinJS.Utilities.removeClass(elt, 'tapped');\n                    if (event.pointerId && elt.releasePointerCapture) {\n                        try {\n                            elt.releasePointerCapture(event.pointerId);\n                        }\n                        catch (exception) {\n                            console.error(exception);\n                        }\n                    }\n                    if (!tracking.disableAnimation)\n                        tracking.animUp(event.currentTarget);\n                }\n            };\n            var ptUp = function (event) {\n                var elt = event.currentTarget || event.target;\n                var tracking = elt.mcnTapTracking;\n                if (tracking && (event.button === undefined || event.button === 0 || (tracking.allowRickClickTap && event.button === 2))) {\n                    if (elt.releasePointerCapture) {\n                        try {\n                            elt.releasePointerCapture(event.pointerId);\n                        }\n                        catch (exception) {\n                            console.error(exception);\n                        }\n                    }\n                    if (tracking && !tracking.tapOnDown) {\n                        event.stopPropagation();\n                        var resolveTap = function () {\n                            if (tracking && tracking.pointerdown) {\n                                if (event.changedTouches) {\n                                    var dX = Math.abs(tracking.pointerdown.x - event.changedTouches[0].clientX);\n                                    var dY = Math.abs(tracking.pointerdown.y - event.changedTouches[0].clientY);\n                                }\n                                else {\n                                    var dX = Math.abs(tracking.pointerdown.x - event.clientX);\n                                    var dY = Math.abs(tracking.pointerdown.y - event.clientY);\n                                }\n                                if (tracking.callback && dX < 15 && dY < 15) {\n                                    event.stopImmediatePropagation();\n                                    event.stopPropagation();\n                                    event.preventDefault();\n                                    tracking.invoke();\n                                }\n                                if (tracking && tracking.pointerdown)\n                                    tracking.pointerdown = undefined;\n                            }\n                        };\n                        if (tracking.awaitAnim) {\n                            tracking.animUp(elt).done(resolveTap);\n                        }\n                        else {\n                            tracking.animUp(elt);\n                            resolveTap();\n                        }\n                    }\n                    WinJS.Utilities.removeClass(elt, 'tapped');\n                }\n            };\n            if (!options) {\n                var attroptions = element.getAttribute('tap-options');\n                if (attroptions) {\n                    try {\n                        options = WinJS.UI.optionsParser(attroptions, window);\n                    }\n                    catch (exception) {\n                        return;\n                    }\n                }\n            }\n            var opt = options || {};\n            if (element.mcnTapTracking) {\n                element.mcnTapTracking.dispose();\n            }\n            WinJS.Utilities.addClass(element, 'tap');\n            element.mcnTapTracking = element.mcnTapTracking || {};\n            element.mcnTapTracking.disableAria = opt.disableAria || UI.defaultTapBehavior.disableAria;\n            if (!element.mcnTapTracking.disableAria) {\n                if (!element.hasAttribute(\"tabindex\"))\n                    element.setAttribute(\"tabindex\", \"0\");\n                if (!element.hasAttribute(\"role\"))\n                    element.setAttribute(\"role\", \"button\");\n            }\n            element.mcnTapTracking.eventTracker = new WinJSContrib.UI.EventTracker();\n            element.mcnTapTracking.disableAnimation = opt.disableAnimation || UI.defaultTapBehavior.disableAnimation;\n            if (element.mcnTapTracking.disableAnimation) {\n                if (opt.disableAnimation)\n                    WinJS.Utilities.addClass(element, 'tap-disableanimation');\n                element.mcnTapTracking.animDown = function () { return WinJS.Promise.wrap(); };\n                element.mcnTapTracking.animUp = function () { return WinJS.Promise.wrap(); };\n            }\n            else {\n                element.mcnTapTracking.animDown = opt.animDown || UI.defaultTapBehavior.animDown;\n                element.mcnTapTracking.animUp = opt.animUp || UI.defaultTapBehavior.animUp;\n            }\n            element.mcnTapTracking.element = element;\n            element.mcnTapTracking.callback = callback;\n            element.mcnTapTracking.lock = opt.lock;\n            element.mcnTapTracking.awaitAnim = opt.awaitAnim || UI.defaultTapBehavior.awaitAnim;\n            element.mcnTapTracking.errorDelay = opt.errorDelay || UI.defaultTapBehavior.errorDelay;\n            element.mcnTapTracking.mapClickEvents = opt.mapClickEvents || UI.defaultTapBehavior.mapClickEvents;\n            element.mcnTapTracking.tapOnDown = opt.tapOnDown;\n            element.mcnTapTracking.pointerModel = 'none';\n            element.mcnTapTracking.invoke = function (arg) {\n                var elt = element;\n                if (elt && elt.mcnTapTracking) {\n                    var tracking = elt.mcnTapTracking;\n                    if (tracking) {\n                        var now = (new Date());\n                        var dif = 9000;\n                        if (tracking.lastinvoke) {\n                            dif = now - tracking.lastinvoke;\n                        }\n                        if (dif < tracking.mapClickEvents) {\n                            arg.preventDefault();\n                            arg.stopPropagation();\n                            return;\n                        }\n                        var res = tracking.callback(elt, arg);\n                        tracking.lastinvoke = new Date();\n                        if (res && WinJS.Promise.is(res)) {\n                            elt.disabled = true;\n                            WinJS.Utilities.addClass(elt, 'tap-working');\n                            res.then(function () {\n                                elt.disabled = false;\n                                WinJS.Utilities.removeClass(elt, 'tap-working');\n                            }, function (err) {\n                                elt.disabled = false;\n                                WinJS.Utilities.removeClass(elt, 'tap-working');\n                                console.error(err);\n                                WinJS.Application.queueEvent({ type: \"mcn-taperror\", error: err });\n                                WinJS.Utilities.addClass(elt, 'tap-error');\n                                if (tracking.errorDelay) {\n                                    tracking.pendingErrorTimeout = setTimeout(function () {\n                                        tracking.pendingErrorTimeout = null;\n                                        WinJS.Utilities.removeClass(elt, 'tap-error');\n                                    }, tracking.errorDelay);\n                                }\n                            });\n                        }\n                    }\n                }\n            };\n            if (element.mcnTapTracking.mapClickEvents > 0) {\n                element.onclick = function (arg) {\n                    if (element && arg.target == element && element.mcnTapTracking) {\n                        element.mcnTapTracking.invoke(arg);\n                    }\n                };\n            }\n            element.mcnTapTracking.dispose = function () {\n                WinJS.Utilities.removeClass(element, 'tap');\n                this.eventTracker.dispose();\n                element.mcnTapTracking = null;\n                element = null;\n            };\n            if (element.onpointerdown !== undefined) {\n                element.mcnTapTracking.pointerModel = 'pointers';\n                element.mcnTapTracking.eventTracker.addEvent(element, 'pointerdown', ptDown);\n                element.mcnTapTracking.eventTracker.addEvent(element, 'pointerout', ptOut);\n                element.mcnTapTracking.eventTracker.addEvent(element, 'pointerup', ptUp);\n            }\n            else if (window.Touch && !opt.noWebkitTouch) {\n                element.mcnTapTracking.pointerModel = 'touch';\n                element.mcnTapTracking.eventTracker.addEvent(element, 'touchstart', function (arg) {\n                    element.mcnTapTracking.cancelMouse = true;\n                    ptDown(arg);\n                });\n                element.mcnTapTracking.eventTracker.addEvent(element, 'touchcancel', function (arg) {\n                    setTimeout(function () {\n                        if (element && element.mcnTapTracking)\n                            element.mcnTapTracking.cancelMouse = false;\n                    }, 1000);\n                    ptOut(arg);\n                });\n                element.mcnTapTracking.eventTracker.addEvent(element, 'touchend', function (arg) {\n                    setTimeout(function () {\n                        if (element && element.mcnTapTracking)\n                            element.mcnTapTracking.cancelMouse = false;\n                    }, 1000);\n                    ptUp(arg);\n                });\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mousedown', function (arg) {\n                    if (!element.mcnTapTracking.cancelMouse)\n                        ptDown(arg);\n                });\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mouseleave', function (arg) {\n                    ptOut(arg);\n                });\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mouseup', function (arg) {\n                    if (!element.mcnTapTracking.cancelMouse)\n                        ptUp(arg);\n                    else\n                        ptOut(arg);\n                });\n            }\n            else {\n                element.mcnTapTracking.pointerModel = 'mouse';\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mousedown', ptDown);\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mouseleave', ptOut);\n                element.mcnTapTracking.eventTracker.addEvent(element, 'mouseup', ptUp);\n            }\n        }\n        UI.tap = tap;\n        /**\n         * return a promise completed after css transition on the element is ended\n         * @function WinJSContrib.UI.afterTransition\n         * @param {HtmlElement} element element to watch\n         * @param {number} timeout timeout\n         */\n        function afterTransition(element, timeout) {\n            var timeOutRef = null;\n            return new WinJS.Promise(function (complete, error) {\n                var onaftertransition = function (event) {\n                    if (event.srcElement === element) {\n                        close();\n                    }\n                };\n                var close = function () {\n                    clearTimeout(timeOutRef);\n                    element.removeEventListener(\"transitionend\", onaftertransition, false);\n                    complete();\n                };\n                element.addEventListener(\"transitionend\", onaftertransition, false);\n                timeOutRef = setTimeout(close, timeout || 1000);\n            });\n        }\n        UI.afterTransition = afterTransition;\n        /**\n         * Utility class for building DOM elements through code with a fluent API\n         * @class WinJSContrib.UI.FluentDOM\n         * @param {string} nodeType type of DOM node (ex: 'DIV')\n         * @param className css classes\n         * @param parentElt parent DOM element\n         * @param {WinJSContrib.UI.FluentDOM} parent parent FluentDOM\n         * @example\n         * var elt = new WinJSContrib.UI.FluentDOM('DIV', 'item-content')\n         *    .text(item.title)\n         *    .display('none')\n         *    .element;\n         */\n        var FluentDOM = (function () {\n            function FluentDOM(nodeType, className, parentElt, parent) {\n                this.element = document.createElement(nodeType);\n                if (className)\n                    this.element.className = className;\n                if (parentElt)\n                    parentElt.appendChild(this.element);\n                this.parent = parent;\n                this.childs = [];\n                if (parent) {\n                    parent.childs.push(this);\n                }\n            }\n            FluentDOM.for = function (element) {\n                var res = new FluentDOM(null);\n                res.element = element;\n                return res;\n            };\n            FluentDOM.fragment = function () {\n                var res = new FluentDOM(null);\n                res.element = document.createDocumentFragment();\n                return res;\n            };\n            Object.defineProperty(FluentDOM.prototype, \"control\", {\n                get: function () {\n                    return this.element.winControl;\n                },\n                enumerable: true,\n                configurable: true\n            });\n            /**\n             * Add a css class\n             * @function WinJSContrib.UI.FluentDOM.prototype.addClass\n             * @param classname css class\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.addClass = function (classname) {\n                if (this.element)\n                    this.element.classList.add(classname);\n                return this;\n            };\n            /**\n             * set className\n             * @function WinJSContrib.UI.FluentDOM.prototype.className\n             * @param classname css classes\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.className = function (classname) {\n                if (this.element)\n                    this.element.className = classname;\n                return this;\n            };\n            /**\n             * set opacity\n             * @function WinJSContrib.UI.FluentDOM.prototype.opacity\n             * @param opacity opacity\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.opacity = function (opacity) {\n                if (this.element)\n                    this.element.style.opacity = opacity;\n                return this;\n            };\n            /**\n             * set display\n             * @function WinJSContrib.UI.FluentDOM.prototype.display\n             * @param display display\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.display = function (display) {\n                if (this.element)\n                    this.element.style.display = display;\n                return this;\n            };\n            /**\n             * set display 'none'\n             * @function WinJSContrib.UI.FluentDOM.prototype.hide\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.hide = function () {\n                if (this.element)\n                    this.element.style.display = 'none';\n                return this;\n            };\n            /**\n             * set visibility\n             * @function WinJSContrib.UI.FluentDOM.prototype.visibility\n             * @param visibility visibility\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.visibility = function (visibility) {\n                if (this.element)\n                    this.element.style.visibility = visibility;\n                return this;\n            };\n            /**\n             * set textContent\n             * @function WinJSContrib.UI.FluentDOM.prototype.text\n             * @param text text\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.text = function (text) {\n                if (this.element)\n                    this.element.textContent = text;\n                return this;\n            };\n            /**\n             * set innerHTML\n             * @function WinJSContrib.UI.FluentDOM.prototype.html\n             * @param text text\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.html = function (text) {\n                if (this.element)\n                    this.element.innerHTML = text;\n                return this;\n            };\n            /**\n             * set attribute\n             * @function WinJSContrib.UI.FluentDOM.prototype.attr\n             * @param name attribute name\n             * @param val attribute value\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.attr = function (name, val) {\n                if (this.element)\n                    this.element.setAttribute(name, val);\n                return this;\n            };\n            /**\n             * set style property\n             * @function WinJSContrib.UI.FluentDOM.prototype.style\n             * @param name attribute name\n             * @param val attribute value\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.style = function (name, val) {\n                if (this.element)\n                    this.element.style[name] = val;\n                return this;\n            };\n            /**\n             * set style property\n             * @function WinJSContrib.UI.FluentDOM.prototype.style\n             * @param name attribute name\n             * @param val attribute value\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.styles = function (obj) {\n                var st = this.element.style;\n                var keys = Object.keys(obj);\n                keys.forEach(function (k) {\n                    st[k] = obj[k];\n                });\n                return this;\n            };\n            /**\n             * append element to another DOM element\n             * @function WinJSContrib.UI.FluentDOM.prototype.appendTo\n             * @param elt parent element\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.appendTo = function (elt) {\n                if (this.element && elt)\n                    elt.appendChild(this.element);\n                return this;\n            };\n            /**\n             * add tap behavior\n             * @function WinJSContrib.UI.FluentDOM.prototype.tap\n             * @param callback tap callback\n             * @param options tap options\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.tap = function (callback, options) {\n                if (this.element)\n                    WinJSContrib.UI.tap(this.element, callback, options);\n                return this;\n            };\n            /**\n             * create a child FluentDOM and append it to current\n             * @function WinJSContrib.UI.FluentDOM.prototype.append\n             * @param nodeType child node type\n             * @param className css classes\n             * @param callback callback receiving the new FluentDOM as an argument\n             * @returns {WinJSContrib.UI.FluentDOM} current instance (for method chaining)\n             */\n            FluentDOM.prototype.append = function (nodeType, className, callback) {\n                var child = new FluentDOM(nodeType, className, this.element, this);\n                if (callback) {\n                    callback(child);\n                }\n                return this;\n            };\n            /**\n             * create a child FluentDOM and append it to current\n             * @function WinJSContrib.UI.FluentDOM.prototype.createChild\n             * @param nodeType child node type\n             * @param className css classes\n             * @returns {WinJSContrib.UI.FluentDOM} child FluentDOM\n             */\n            FluentDOM.prototype.createChild = function (nodeType, className) {\n                var child = new FluentDOM(nodeType, className, this.element, this);\n                return child;\n            };\n            /**\n             * create a WinJS control\n             * @function WinJSContrib.UI.FluentDOM.prototype.ctrl\n             * @param ctrl constructor or full name of the control\n             * @param options control options\n             * @returns {WinJSContrib.UI.FluentDOM}\n             */\n            FluentDOM.prototype.ctrl = function (ctrl, options) {\n                var ctor = ctrl;\n                if (typeof ctrl === 'string')\n                    ctor = WinJSContrib.Utils.readProperty(window, ctrl);\n                if (ctor) {\n                    new ctor(this.element, options);\n                }\n                return this;\n            };\n            return FluentDOM;\n        })();\n        UI.FluentDOM = FluentDOM;\n        function dismissableShow(targetElement, classPrefix, animationTarget) {\n            animationTarget = animationTarget || targetElement;\n            targetElement.classList.add(classPrefix + \"-enter\");\n            targetElement.getBoundingClientRect();\n            targetElement.classList.remove(classPrefix + \"-leave\");\n            targetElement.classList.remove(classPrefix + \"-leave-active\");\n            //setImmediate(() => {\n            WinJSContrib.UI.afterTransition(animationTarget).then(function () {\n                //if (targetElement.classList.contains(classPrefix + \"-lea\")) {\n                //    targetElement.classList.remove(classPrefix + \"-enter\");\n                //    targetElement.classList.remove(classPrefix + \"-enter-active\");\n                //}\n            });\n            targetElement.classList.add(classPrefix + \"-enter-active\");\n            //});\n        }\n        UI.dismissableShow = dismissableShow;\n        function dismissableHide(targetElement, classPrefix, animationTarget) {\n            animationTarget = animationTarget || targetElement;\n            targetElement.classList.add(classPrefix + \"-leave\");\n            targetElement.classList.remove(classPrefix + \"-enter\");\n            targetElement.classList.remove(classPrefix + \"-enter-active\");\n            setImmediate(function () {\n                WinJSContrib.UI.afterTransition(animationTarget).then(function () {\n                    targetElement.classList.remove(classPrefix + \"-leave\");\n                    targetElement.classList.remove(classPrefix + \"-leave-active\");\n                });\n                targetElement.classList.add(classPrefix + \"-leave-active\");\n            });\n        }\n        UI.dismissableHide = dismissableHide;\n        function forwardFocus(container, focusTarget, allowed) {\n            var isInContainer = function (elt) {\n                while (elt.parentElement && elt.parentElement != container) {\n                    elt = elt.parentElement;\n                }\n                if (elt.parentElement == container)\n                    return true;\n                return false;\n            };\n            var focusManager = function (arg) {\n                if (!isInContainer(arg.target) && (!allowed || !(allowed.indexOf(arg.target) >= 0))) {\n                    focusTarget.focus();\n                }\n            };\n            document.addEventListener(\"focus\", focusManager, true);\n            return function () {\n                document.removeEventListener(\"focus\", focusManager);\n            };\n        }\n        UI.forwardFocus = forwardFocus;\n    })(UI = WinJSContrib.UI || (WinJSContrib.UI = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\nvar __global = this;\nvar profiler = __global.msWriteProfilerMark || function () { };\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var UI;\n    (function (UI) {\n        var Pages;\n        (function (Pages) {\n            function abs(uri) {\n                var a = window.document.createElement(\"a\");\n                a.href = uri;\n                return a.href;\n            }\n            var logger = WinJSContrib.Logs.getLogger(\"WinJSContrib.UI.Pages\");\n            Pages.verboseTraces = false;\n            Pages.preloadDelay = 500;\n            var loadedPages = {};\n            function preload() {\n                var pathes = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    pathes[_i - 0] = arguments[_i];\n                }\n                return WinJSContrib.Promise.waterfall(pathes, function (path) {\n                    return preloadPath(path);\n                });\n            }\n            Pages.preload = preload;\n            function preloadPath(path) {\n                var absuri = abs(path);\n                if (!loadedPages[absuri]) {\n                    logger.verbose(\"preload \" + absuri);\n                    loadedPages[absuri] = true;\n                    return WinJS.Promise.timeout(Pages.preloadDelay).then(function () {\n                        return WinJS.Utilities.Scheduler.schedule(function () {\n                            var wrapper = document.createDocumentFragment();\n                            var elt = document.createElement(\"DIV\");\n                            wrapper.appendChild(elt);\n                            WinJS.UI.Fragments.render(absuri, elt);\n                        }, WinJS.Utilities.Scheduler.Priority.idle, {}, \"preload|\" + absuri);\n                    });\n                }\n                return WinJS.Promise.wrap();\n            }\n            Pages.preloadPath = preloadPath;\n            /**\n             * List of mixins to apply to each fragment managed by WinJS Contrib (through navigator or by calling explicitely {@link WinJSContrib.UI.Pages.fragmentMixin}).\n             * @field WinJSContrib.UI.Pages.defaultFragmentMixins\n             * @type {Array}\n             */\n            Pages.defaultFragmentMixins = [{\n                    $: function (selector) {\n                        return $(selector, this.element || this._element);\n                    },\n                    q: function (selector) {\n                        if (!this.element)\n                            return;\n                        return this.element.querySelector(selector);\n                    },\n                    qAll: function (selector) {\n                        if (!this.element)\n                            return;\n                        var res = this.element.querySelectorAll(selector);\n                        if (res && !res.forEach) {\n                            res = [].slice.call(res);\n                        }\n                        return res;\n                    },\n                },\n                {\n                    initPageMixin: function () {\n                        this.promises = [];\n                    },\n                    disposePageMixin: function () {\n                        if (this.promises) {\n                            this.cancelPromises();\n                            this.promises = null;\n                        }\n                    },\n                    addPromise: function (prom) {\n                        this.promises.push(prom);\n                        return prom;\n                    },\n                    cancelPromises: function () {\n                        var page = this;\n                        if (page.promises) {\n                            for (var i = 0; i < page.promises.length; i++) {\n                                if (page.promises[i]) {\n                                    page.promises[i].cancel();\n                                }\n                            }\n                            page.promises = [];\n                        }\n                    }\n                },\n                {\n                    initPageMixin: function () {\n                        this.eventTracker = new WinJSContrib.UI.EventTracker();\n                    },\n                    disposePageMixin: function () {\n                        if (this.eventTracker) {\n                            this.eventTracker.dispose();\n                            this.eventTracker = null;\n                        }\n                    },\n                }];\n            function broadcast(ctrl, element, eventName, args, before, after) {\n                var promises = [];\n                if (before)\n                    promises.push(WinJS.Promise.as(before.apply(ctrl, args)));\n                var query = element.querySelectorAll(\".mcn-layout-ctrl\");\n                if (query && query.length) {\n                    var index = 0;\n                    var length = query.length;\n                    while (index < length) {\n                        var childctrl = query[index];\n                        if (childctrl) {\n                            var event = childctrl.winControl[eventName];\n                            if (event) {\n                                if (childctrl.winControl.pageLifeCycle) {\n                                    promises.push(childctrl.winControl.pageLifeCycle.steps.layout.promise);\n                                }\n                                else {\n                                    promises.push(WinJS.Promise.as(event.apply(childctrl.winControl, args)));\n                                }\n                            }\n                        }\n                        // Skip descendants\n                        if (childctrl && childctrl.winControl && childctrl.winControl.pageLifeCycle) {\n                            index += childctrl.querySelectorAll(\".mcn-fragment, .mcn-layout-ctrl\").length + 1;\n                            childctrl.winControl.__checkLayout();\n                        }\n                        else {\n                            index += 1;\n                        }\n                    }\n                    //if (after)\n                    //    promises.push(WinJS.Promise.as(after.apply(ctrl, args)));\n                    return WinJS.Promise.join(promises).then(function () {\n                        if (after)\n                            return WinJS.Promise.as(after.apply(ctrl, args));\n                    });\n                }\n                else {\n                    if (after)\n                        return WinJS.Promise.as(after.apply(ctrl, args));\n                    return WinJS.Promise.wrap();\n                }\n            }\n            /**\n             * render a html fragment with winjs contrib pipeline and properties, and add WinJS Contrib page events.\n             * @function WinJSContrib.UI.Pages.renderFragment\n             * @param {HTMLElement} container element that will contain the fragment\n             * @param {string} location url for the fragment\n             * @param {Object} args arguments to the fragment\n             * @param {Object} options rendering options\n             */\n            function renderFragment(container, location, args, options) {\n                var fragmentCompleted;\n                var fragmentError;\n                options = options || {};\n                var element = document.createElement(\"div\");\n                element.setAttribute(\"dir\", __global.getComputedStyle(element, null).direction);\n                element.style.opacity = '0';\n                container.appendChild(element);\n                var fragmentPromise = new WinJS.Promise(function (c, e) { fragmentCompleted = c; fragmentError = e; });\n                var parented = options.parented ? WinJS.Promise.as(options.parented) : null;\n                var layoutCtrls = [];\n                var pageConstructor = WinJS.UI.Pages.get(location);\n                function preparePageControl(elementCtrl) {\n                    if (options.getFragmentElement) {\n                        options.getFragmentElement(elementCtrl);\n                    }\n                    if (args && args.injectToPage) {\n                        WinJSContrib.Utils.inject(elementCtrl, args.injectToPage);\n                    }\n                    elementCtrl.navigationState = { location: location, state: args };\n                    if (options.oncreate) {\n                        options.oncreate(elementCtrl.element, args);\n                    }\n                    if (options.oninit) {\n                        elementCtrl.pageLifeCycle.steps.init.attach(function () {\n                            return options.oninit(elementCtrl.element, args);\n                        });\n                    }\n                    if (elementCtrl.enterPageAnimation || options.enterPage) {\n                        if (elementCtrl.enterPageAnimation)\n                            elementCtrl._enterAnimation = elementCtrl.enterPageAnimation;\n                        else\n                            elementCtrl._enterAnimation = options.enterPage;\n                        elementCtrl.enterPageAnimation = function () {\n                            var page = this;\n                            var elts = null;\n                            element.style.opacity = '';\n                            if (page && page.getAnimationElements) {\n                                elts = page.getAnimationElements(false);\n                            }\n                            else {\n                                elts = page.element;\n                            }\n                            if (elts)\n                                return page._enterAnimation(elts);\n                        };\n                    }\n                    if (options.onrender) {\n                        elementCtrl.pageLifeCycle.steps.process.attach(function () {\n                            options.onrender(elementCtrl.element, args);\n                        });\n                    }\n                    if (!WinJSContrib.UI.disableAutoResources) {\n                        elementCtrl.pageLifeCycle.steps.process.attach(function () {\n                            return WinJS.Resources.processAll(element);\n                        });\n                    }\n                    if (options.closeOldPagePromise) {\n                        elementCtrl.pageLifeCycle.steps.ready.attach(function () {\n                            return options.closeOldPagePromise;\n                        });\n                    }\n                    if (options.onready) {\n                        elementCtrl.pageLifeCycle.steps.ready.attach(function () {\n                            if (options.onready)\n                                options.onready(elementCtrl.element, args);\n                        });\n                    }\n                    elementCtrl.pageLifeCycle.steps.enter.attach(function () {\n                        if (elementCtrl.enterPageAnimation) {\n                            return WinJS.Promise.as(elementCtrl.enterPageAnimation(element, options));\n                        }\n                        else {\n                            elementCtrl.element.style.opacity = '';\n                        }\n                    });\n                    elementCtrl.pageLifeCycle.steps.ready.promise.then(fragmentCompleted, fragmentError);\n                }\n                var elementCtrl = new pageConstructor(element, args, preparePageControl, parented);\n                return fragmentPromise;\n            }\n            Pages.renderFragment = renderFragment;\n            var DefferedLoadings = (function () {\n                function DefferedLoadings(page) {\n                    var _this = this;\n                    this.items = [];\n                    this.page = page;\n                    this.resolved = false;\n                    page.promises.push(page.pageLifeCycle.steps.ready.promise.then(function () {\n                        return _this.resolve();\n                    }));\n                }\n                DefferedLoadings.prototype.push = function (delegate) {\n                    var _this = this;\n                    if (!this.resolved) {\n                        this.items.push(delegate);\n                    }\n                    else {\n                        setImmediate(function () {\n                            _this.page.promises.push(WinJS.Promise.as(delegate()));\n                        });\n                    }\n                };\n                DefferedLoadings.prototype.resolve = function () {\n                    this.resolved = true;\n                    if (!this.items.length) {\n                        return WinJS.Promise.wrap();\n                    }\n                    logger.verbose(\"resolve deffered loads\");\n                    return WinJSContrib.Promise.waterfall(this.items, function (job) {\n                        return WinJS.Promise.as(job()).then(function () {\n                            return WinJS.Promise.timeout();\n                        });\n                    });\n                };\n                return DefferedLoadings;\n            })();\n            Pages.DefferedLoadings = DefferedLoadings;\n            var PageBase = (function () {\n                function PageBase() {\n                }\n                return PageBase;\n            })();\n            Pages.PageBase = PageBase;\n            var PageLifeCycleStep = (function () {\n                function PageLifeCycleStep(page, stepName, parent) {\n                    var _this = this;\n                    this.page = page;\n                    this.queue = [];\n                    this.isDone = false;\n                    this.stepName = stepName;\n                    if (Pages.verboseTraces) {\n                        this.created = new Date();\n                    }\n                    this.promise = new WinJS.Promise(function (c, e) {\n                        _this._resolvePromise = c;\n                        _this._rejectPromise = e;\n                    });\n                    page.promises.push(this.promise);\n                    //if their is a parent page fragment, we attach step to synchronize page construction\n                    if (parent && parent.pageLifeCycle) {\n                        parent.pageLifeCycle.steps[stepName].attach(function () {\n                            return _this.promise;\n                        });\n                    }\n                }\n                PageLifeCycleStep.prototype.attach = function (callback) {\n                    if (this.queue && !this.isDone) {\n                        this.queue.push(callback);\n                        return this.promise;\n                    }\n                    else {\n                        return WinJS.Promise.as(callback());\n                    }\n                };\n                PageLifeCycleStep.prototype.resolve = function (arg) {\n                    var step = this;\n                    this.isDone = true;\n                    function closeStep() {\n                        step.resolved = new Date();\n                        step._resolvePromise(arg);\n                        if (Pages.verboseTraces) {\n                            step.resolved = new Date();\n                            logger.verbose((step.resolved - step.created) + 'ms ' + step.stepName.toUpperCase() + ' ' + step.page.pageLifeCycle.profilerMarkIdentifier);\n                            profiler(\"WinJS.UI.Pages:\" + step.stepName.toUpperCase() + step.page.pageLifeCycle.profilerMarkIdentifier + \",StartTM\");\n                        }\n                        return step.promise;\n                    }\n                    if (this.queue && this.queue.length) {\n                        var promises = [];\n                        this.queue.forEach(function (q) {\n                            promises.push(new WinJS.Promise(function (c, e) {\n                                try {\n                                    WinJS.Promise.as(q()).then(function (res) {\n                                        c(res);\n                                    }, e);\n                                }\n                                catch (exception) {\n                                    e(exception);\n                                }\n                            }));\n                        });\n                        this.queue = null;\n                        return WinJS.Promise.join(promises).then(function () {\n                            return closeStep();\n                        }, this.reject.bind(this));\n                    }\n                    else {\n                        this.queue = null;\n                        return closeStep();\n                    }\n                };\n                PageLifeCycleStep.prototype.reject = function (arg) {\n                    this.isDone = true;\n                    this.queue = null;\n                    this._rejectPromise(arg);\n                    return WinJS.Promise.wrapError(this.promise);\n                };\n                return PageLifeCycleStep;\n            })();\n            Pages.PageLifeCycleStep = PageLifeCycleStep;\n            (function (_Pages, _Global, _Base, _CorePages, _BaseUtils, _ElementUtilities, _WriteProfilerMark, Promise, Fragments, ControlProcessor) {\n                'use strict';\n                if (!_Global.document || !_CorePages)\n                    return;\n                var viewMap = _CorePages._viewMap || _CorePages.viewMap || {};\n                //this property allows defining mixins applyed to all pages\n                function abs(uri) {\n                    var a = _Global.document.createElement(\"a\");\n                    a.href = uri;\n                    return a.href;\n                }\n                function selfhost(uri) {\n                    return _Global.document.location.href.toLowerCase() === uri.toLowerCase();\n                }\n                var _mixinBase = {\n                    dispose: function () {\n                        /// <signature helpKeyword=\"WinJS.UI.Pages.dispose\">\n                        /// <summary locid=\"WinJS.UI.Pages.dispose\">\n                        /// Disposes this Page.\n                        /// </summary>\n                        /// </signature>\n                        if (this._disposed) {\n                            return;\n                        }\n                        if (this.disposePageMixin) {\n                            this.disposePageMixin();\n                        }\n                        this.pageLifeCycle.stop();\n                        this.pageLifeCycle = null;\n                        this._disposed = true;\n                        this.readyComplete.cancel();\n                        _ElementUtilities.disposeSubTree(this.element);\n                        this.element = null;\n                    },\n                    init: function () {\n                    },\n                    load: function (uri) {\n                        /// <signature helpKeyword=\"WinJS.UI.Pages._mixin.load\">\n                        /// <summary locid=\"WinJS.UI.Pages._mixin.load\">\n                        /// Creates a copy of the DOM elements from the specified URI.  In order for this override\n                        /// to be used, the page that contains the load override needs to be defined by calling\n                        /// WinJS.UI.Pages.define() before WinJS.UI.Pages.render() is called.\n                        /// </summary>\n                        /// <param name=\"uri\" locid=\"WinJS.UI.Pages._mixin.load_p:uri\">\n                        /// The URI from which to copy the DOM elements.\n                        /// </param>\n                        /// <returns type=\"WinJS.Promise\" locid=\"WinJS.UI.Pages._mixin.load_returnValue\">\n                        /// A promise whose fulfilled value is the set of unparented DOM elements, if asynchronous processing is necessary. If not, returns nothing.\n                        /// </returns>\n                        /// </signature>\n                        if (!this.selfhost) {\n                            return Fragments.renderCopy(abs(uri));\n                        }\n                    },\n                    process: function (element, options) {\n                        /// <signature helpKeyword=\"WinJS.UI.Pages._mixin.process\">\n                        /// <summary locid=\"WinJS.UI.Pages._mixin.process\">\n                        /// Processes the unparented DOM elements returned by load.\n                        /// </summary>\n                        /// <param name=\"element\" locid=\"WinJS.UI.Pages._mixin.process_p:element\">\n                        /// The DOM element that will contain all the content for the page.\n                        /// </param>\n                        /// <param name=\"options\" locid=\"WinJS.UI.Pages._mixin.process_p:options\">\n                        /// The options that are to be passed to the constructor of the page.\n                        /// </param>\n                        /// <returns type=\"WinJS.Promise\" locid=\"WinJS.UI.Pages._mixin.process_returnValue\">\n                        /// A promise that is fulfilled when processing is complete.\n                        /// </returns>\n                        /// </signature>\n                        return ControlProcessor.processAll(element);\n                    },\n                    processed: function (element, options) { },\n                    render: function (element, options, loadResult) {\n                        /// <signature helpKeyword=\"WinJS.UI.Pages._mixin.render\">\n                        /// <summary locid=\"WinJS.UI.Pages._mixin.render\">\n                        /// Renders the control, typically by adding the elements specified in the loadResult parameter to the specified element.\n                        /// </summary>\n                        /// <param name=\"element\" locid=\"WinJS.UI.Pages._mixin.render_p:element\">\n                        /// The DOM element that will contain all the content for the page.\n                        /// </param>\n                        /// <param name=\"options\" locid=\"WinJS.UI.Pages._mixin.render_p:options\">\n                        /// The options passed into the constructor of the page.\n                        /// </param>\n                        /// <param name=\"loadResult\" locid=\"WinJS.UI.Pages._mixin.render_p:loadResult\">\n                        /// The elements returned from the load method.\n                        /// </param>\n                        /// <returns type=\"WinJS.Promise\" locid=\"WinJS.UI.Pages._mixin.render_returnValue\">\n                        /// A promise that is fulfilled when rendering is complete, if asynchronous processing is necessary. If not, returns nothing.\n                        /// </returns>\n                        /// </signature>\n                        if (!this.selfhost) {\n                            element.appendChild(loadResult);\n                        }\n                        return element;\n                    },\n                    rendered: function (element, options) { },\n                    ready: function () { }\n                };\n                function injectMixin(base, mixin) {\n                    var d = base.prototype.dispose;\n                    var dM = base.prototype.disposePageMixin;\n                    var iM = base.prototype.initPageMixin;\n                    base = _Base.Class.mix(base, mixin);\n                    //we want to allow this mixins to provide their own addition to \"dispose\" and initialize custom properties\n                    if (d && mixin.hasOwnProperty('dispose')) {\n                        base.prototype.dispose = function () {\n                            mixin.dispose.apply(this);\n                            if (d)\n                                d.apply(this);\n                        };\n                    }\n                    if (d && mixin.hasOwnProperty('disposePageMixin')) {\n                        base.prototype.disposePageMixin = function () {\n                            mixin.disposePageMixin.apply(this);\n                            if (dM)\n                                dM.apply(this);\n                        };\n                    }\n                    if (d && mixin.hasOwnProperty('initPageMixin')) {\n                        base.prototype.initPageMixin = function () {\n                            mixin.initPageMixin.apply(this);\n                            if (iM)\n                                iM.apply(this);\n                        };\n                    }\n                    return base;\n                }\n                function mergeJavaScriptClass(baseCtor, classDef) {\n                    var keys = Object.keys(baseCtor.prototype);\n                    keys.forEach(function (k) {\n                        if (classDef.prototype[k] === undefined) {\n                            classDef.prototype[k] = baseCtor.prototype[k];\n                        }\n                    });\n                    return baseCtor;\n                }\n                function addMembers(ctor, members) {\n                    if (!members)\n                        return ctor;\n                    if (typeof members == 'function') {\n                        ctor.prototype._attachedConstructor = members;\n                        return mergeJavaScriptClass(ctor, members);\n                    }\n                    else if (typeof members == 'object') {\n                        return injectMixin(ctor, members);\n                    }\n                    return ctor;\n                }\n                function pageLifeCycle(that, uri, element, options, complete, parentedPromise) {\n                    if (element.style.display)\n                        that.pageLifeCycle.initialDisplay = element.style.display;\n                    element.style.display = 'none';\n                    var profilerMarkIdentifier = \" uri='\" + uri + \"'\" + _BaseUtils._getProfilerMarkIdentifier(that.element);\n                    that.pageLifeCycle.profilerMarkIdentifier = profilerMarkIdentifier;\n                    _WriteProfilerMark(\"WinJS.UI.Pages:createPage\" + profilerMarkIdentifier + \",StartTM\");\n                    if (WinJSContrib.UI.WebComponents) {\n                        that.pageLifeCycle.observer = WinJSContrib.UI.WebComponents.watch(that.element);\n                    }\n                    var load = Promise.timeout().then(function Pages_load() {\n                        that.pageLifeCycle.log(function () { return \"URI loading \" + that.pageLifeCycle.profilerMarkIdentifier; });\n                        return that.load(uri);\n                    }).then(function (loadResult) {\n                        that.pageLifeCycle.log(function () { return \"URI loaded \" + that.pageLifeCycle.profilerMarkIdentifier; });\n                        //if page is defined by Js classes, call class constructors \n                        if (that._attachedConstructor) {\n                            var realControl = new that._attachedConstructor(element, options);\n                            element.winControl = realControl;\n                            var keys = Object.keys(that);\n                            keys.forEach(function (k) {\n                                realControl[k] = that[k];\n                            });\n                            realControl.pageLifeCycle.page = realControl;\n                            that.pageControl = realControl;\n                            that.dismissed = true;\n                            that = realControl;\n                        }\n                        return loadResult;\n                    });\n                    var renderCalled = load.then(function Pages_init(loadResult) {\n                        return Promise.join({\n                            loadResult: loadResult,\n                            initResult: that.init(element, options)\n                        });\n                    }).then(function Pages_render(result) {\n                        return that.pageLifeCycle.steps.init.resolve().then(function () {\n                            return result;\n                        });\n                    }).then(function Pages_render(result) {\n                        return that.render(element, options, result.loadResult);\n                    }).then(function Pages_render(result) {\n                        return that.rendered(element, options);\n                    }).then(function (result) {\n                        return that.pageLifeCycle.steps.render.resolve();\n                    }).then(function Pages_processed() {\n                        if (WinJSContrib.UI.WebComponents) {\n                            //add delay to enable webcomponent processing\n                            return WinJS.Promise.timeout();\n                        }\n                    });\n                    that.elementReady = renderCalled.then(function () {\n                        return element;\n                    });\n                    that.renderComplete = renderCalled.then(function Pages_process() {\n                        return that.process(element, options);\n                    }).then(function (result) {\n                        return that.pageLifeCycle.steps.process.resolve();\n                    }).then(function Pages_processed() {\n                        WinJSContrib.UI.bindMembers(element, that);\n                        return that.processed(element, options);\n                    }).then(function () {\n                        return that;\n                    });\n                    var callComplete = function () {\n                        complete && complete(that);\n                        _WriteProfilerMark(\"WinJS.UI.Pages:createPage\" + profilerMarkIdentifier + \",StopTM\");\n                    };\n                    // promises guarantee order, so this will be called prior to ready path below\n                    //\n                    that.renderComplete.then(callComplete, callComplete);\n                    that.layoutComplete = that.renderComplete.then(function () {\n                        return parentedPromise;\n                    }).then(function () {\n                        element.style.display = that.pageLifeCycle.initialDisplay || '';\n                        var r = element.getBoundingClientRect(); //force element layout\n                        return broadcast(that, element, 'pageLayout', [element, options], null, that.pageLayout);\n                    }).then(function () {\n                        WinJSContrib.UI.bindActions(element, that);\n                    }).then(function (result) {\n                        return that.pageLifeCycle.steps.layout.resolve();\n                    }).then(function () {\n                        return that;\n                    });\n                    that.readyComplete = that.layoutComplete.then(function Pages_ready() {\n                        that.ready(element, options);\n                        that.pageLifeCycle.ended = new Date();\n                        that.pageLifeCycle.delta = that.pageLifeCycle.ended - that.pageLifeCycle.created;\n                        //broadcast(that, element, 'pageReady', [element, options]);\n                    }).then(function (result) {\n                        return that.pageLifeCycle.steps.ready.resolve();\n                    }).then(function (result) {\n                        return that.pageLifeCycle.steps.enter.resolve();\n                    }).then(function () {\n                        return that;\n                    }).then(null, function Pages_error(err) {\n                        if (that.error)\n                            return that.error(err);\n                        if (err && err._value && err._value.name === \"Canceled\")\n                            return;\n                        return WinJS.Promise.wrapError(err);\n                    });\n                    that.__checkLayout = function () {\n                        var page = this;\n                        var updateLayoutArgs = arguments;\n                        var p = null;\n                        if (page.updateLayout) {\n                            p = WinJS.Promise.as(page.updateLayout.apply(page, updateLayoutArgs));\n                        }\n                        else {\n                            p = WinJS.Promise.wrap();\n                        }\n                        return p.then(function () {\n                            return broadcast(page, page.element, 'updateLayout', updateLayoutArgs);\n                        });\n                    };\n                }\n                function getPageConstructor(uri, members) {\n                    /// <signature helpKeyword=\"WinJS.UI.Pages.define\">\n                    /// <summary locid=\"WinJS.UI.Pages.define\">\n                    /// Creates a new page control from the specified URI that contains the specified members.\n                    /// Multiple calls to this method for the same URI are allowed, and all members will be\n                    /// merged.\n                    /// </summary>\n                    /// <param name=\"uri\" locid=\"WinJS.UI.Pages.define_p:uri\">\n                    /// The URI for the content that defines the page.\n                    /// </param>\n                    /// <param name=\"members\" locid=\"WinJS.UI.Pages.define_p:members\">\n                    /// Additional members that the control will have.\n                    /// </param>\n                    /// <returns type=\"Function\" locid=\"WinJS.UI.Pages.define_returnValue\">\n                    /// A constructor function that creates the page.\n                    /// </returns>\n                    /// </signature>\n                    var refUri = abs(uri).toLowerCase();\n                    var base = viewMap[refUri];\n                    uri = abs(uri);\n                    if (!base) {\n                        base = _Base.Class.define(\n                        // This needs to follow the WinJS.UI.processAll \"async constructor\"\n                        // pattern to interop nicely in the \"Views.Control\" use case.\n                        //\n                        // This needs to follow the WinJS.UI.processAll \"async constructor\"\n                        // pattern to interop nicely in the \"Views.Control\" use case.\n                        //\n                        function PageControl_ctor(element, options, complete, parentedPromise) {\n                            var that = this;\n                            if (that._attachedConstructor) {\n                                var realControl = new this._attachedConstructor(element, options);\n                                element.winControl = realControl;\n                                var keys = Object.keys(that);\n                                keys.forEach(function (k) {\n                                    if (k !== \"_attachedConstructor\") {\n                                        realControl[k] = that[k];\n                                    }\n                                });\n                                that = realControl;\n                            }\n                            var parent = WinJSContrib.Utils.getScopeControl(element);\n                            _ElementUtilities.addClass(element, \"win-disposable\");\n                            _ElementUtilities.addClass(element, \"pagecontrol\");\n                            _ElementUtilities.addClass(element, \"mcn-layout-ctrl\");\n                            if (that.initPageMixin)\n                                that.initPageMixin();\n                            //that._eventTracker = new WinJSContrib.UI.EventTracker();\n                            //that._promises = [];\n                            that.pageLifeCycle = {\n                                created: new Date(),\n                                location: uri,\n                                log: function (callback) {\n                                    if (Pages.verboseTraces) {\n                                        var delta = new Date() - this.created;\n                                        logger.verbose(delta + \"ms \" + callback());\n                                    }\n                                },\n                                stop: function () {\n                                    that.readyComplete.cancel();\n                                    that.cancelPromises();\n                                    if (this.observer) {\n                                        this.observer.disconnect();\n                                        this.observer = null;\n                                    }\n                                },\n                                steps: {\n                                    init: new PageLifeCycleStep(that, 'init', null),\n                                    render: new PageLifeCycleStep(that, 'render', null),\n                                    process: new PageLifeCycleStep(that, 'process', parent),\n                                    layout: new PageLifeCycleStep(that, 'layout', parent),\n                                    ready: new PageLifeCycleStep(that, 'ready', parent),\n                                    enter: new PageLifeCycleStep(that, 'enter', parent),\n                                },\n                                initialDisplay: null\n                            };\n                            that.defferedLoading = new DefferedLoadings(that);\n                            that._disposed = false;\n                            that.element = element = element || _Global.document.createElement(\"div\");\n                            element.msSourceLocation = uri;\n                            that.uri = uri;\n                            that.selfhost = selfhost(uri);\n                            element.winControl = that;\n                            that.parentedComplete = parentedPromise;\n                            pageLifeCycle(that, uri, element, options, complete, parentedPromise);\n                            return that;\n                        }, _mixinBase);\n                        base = _Base.Class.mix(base, WinJS.UI.DOMEventMixin);\n                        //inject default behaviors to page constructor\n                        WinJSContrib.UI.Pages.defaultFragmentMixins.forEach(function (mixin) {\n                            injectMixin(base, mixin);\n                        });\n                        //WinJSContrib.UI.Pages.fragmentMixin(base);\n                        viewMap[refUri] = base;\n                    }\n                    base = addMembers(base, members);\n                    base.selfhost = selfhost(uri);\n                    return base;\n                }\n                function Pages_define(uri, members) {\n                    /// <signature helpKeyword=\"WinJS.UI.Pages.define\">\n                    /// <summary locid=\"WinJS.UI.Pages.define\">\n                    /// Creates a new page control from the specified URI that contains the specified members.\n                    /// Multiple calls to this method for the same URI are allowed, and all members will be\n                    /// merged.\n                    /// </summary>\n                    /// <param name=\"uri\" locid=\"WinJS.UI.Pages.define_p:uri\">\n                    /// The URI for the content that defines the page.\n                    /// </param>\n                    /// <param name=\"members\" locid=\"WinJS.UI.Pages.define_p:members\">\n                    /// Additional members that the control will have.\n                    /// </param>\n                    /// <returns type=\"Function\" locid=\"WinJS.UI.Pages.define_returnValue\">\n                    /// A constructor function that creates the page.\n                    /// </returns>\n                    /// </signature>\n                    var ctor = viewMap[uri];\n                    if (!ctor) {\n                        ctor = getPageConstructor(uri);\n                    }\n                    if (members) {\n                        ctor = addMembers(ctor, members);\n                    }\n                    if (ctor.selfhost) {\n                        WinJS.Utilities.ready(function () {\n                            render(abs(uri), _Global.document.body);\n                        }, true);\n                    }\n                    //in case we are on WinJS<4 we reference members on WinJS Core Pages\n                    if (!_CorePages.viewMap && !_CorePages._viewMap && typeof members !== 'function')\n                        _Pages._corePages.define(uri, members);\n                    return ctor;\n                }\n                function render(uri, element, options, parentedPromise) {\n                    var Ctor = _CorePages.get(uri);\n                    loadedPages[abs(uri)] = true;\n                    var control = new Ctor(element, options, null, parentedPromise);\n                    return control.renderComplete.then(null, function (err) {\n                        return Promise.wrapError({\n                            error: err,\n                            page: control\n                        });\n                    });\n                }\n                function get(uri) {\n                    var ctor = viewMap[uri];\n                    if (!ctor) {\n                        ctor = Pages_define(uri);\n                    }\n                    return ctor;\n                }\n                function remove(uri) {\n                    Fragments.clearCache(abs(uri));\n                    delete viewMap[uri.toLowerCase()];\n                }\n                _Pages._corePages = {\n                    get: _CorePages.get,\n                    render: _CorePages.render,\n                    define: _CorePages.define,\n                    _remove: _CorePages._remove,\n                    _viewMap: viewMap,\n                };\n                var pageOverride = {\n                    define: Pages_define,\n                    get: get,\n                    render: render,\n                    _remove: remove,\n                    _viewMap: viewMap\n                };\n                var source = WinJS.UI.Pages;\n                WinJS.Namespace._moduleDefine(_Pages, null, pageOverride);\n                source.get = pageOverride.get;\n                source.define = pageOverride.define;\n                source.render = pageOverride.render;\n                source._remove = pageOverride._remove;\n                //replaces HtmlControl, otherwise it does not use proper Page constructor\n                WinJS.UI.HtmlControl = WinJS.Class.define(function HtmlControl_ctor(element, options, complete) {\n                    /// <signature helpKeyword=\"WinJS.UI.HtmlControl.HtmlControl\">\n                    /// <summary locid=\"WinJS.UI.HtmlControl.constructor\">\n                    /// Initializes a new instance of HtmlControl to define a new page control.\n                    /// </summary>\n                    /// <param name=\"element\" locid=\"WinJS.UI.HtmlControl.constructor_p:element\">\n                    /// The element that hosts the HtmlControl.\n                    /// </param>\n                    /// <param name=\"options\" locid=\"WinJS.UI.HtmlControl.constructor_p:options\">\n                    /// The options for configuring the page. The uri option is required in order to specify the source\n                    /// document for the content of the page.\n                    /// </param>\n                    /// </signature>\n                    WinJS.UI.Pages.render(options.uri, element, options).\n                        then(complete, function () { complete(); });\n                });\n            })(WinJSContrib.UI.Pages, __global, WinJS, WinJS.UI.Pages, WinJS.Utilities, WinJS.Utilities, profiler, WinJS.Promise, WinJS.UI.Fragments, WinJS.UI);\n        })(Pages = UI.Pages || (UI.Pages = {}));\n    })(UI = WinJSContrib.UI || (WinJSContrib.UI = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\n//# sourceMappingURL=winjscontrib.core.js.map","/* \r\n * WinJS Contrib v2.1.0.4\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/*\r\nWARNING: this feature is experimental\r\nYou must add winjscontrib.core.js before this file\r\n*/\r\n\r\n/// <reference path=\"winjscontrib.core.js\" />\r\nvar WinJSContrib = WinJSContrib || {};\r\nWinJSContrib.UI = WinJSContrib.UI || {};\r\n\r\n/**\r\n * @namespace\r\n */\r\nWinJSContrib.UI.WebComponents = WinJSContrib.UI.WebComponents || {};\r\n\r\n(function (global) {\r\n\t'use strict';\r\n\tvar registered = {};\r\n\tWinJSContrib.UI.WebComponents.registered = registered;\r\n\tWinJSContrib.UI.WebComponents.polyfill = false;\r\n\r\n\tif (!global.document.registerElement && global.MutationObserver) {\r\n\t\tWinJSContrib.UI.WebComponents.polyfill = true;\r\n\t}\r\n\r\n\tfunction inspect(node) {\r\n\t\tvar customElement = null;\r\n\t\tvar ctrlName = node.nodeName;\r\n\t\tvar promises = [];\r\n\r\n\t\tif (node.nodeName !== '#text') {\r\n\t\t\tif (node.attributes) {\r\n\t\t\t\tvar ctrlName = node.getAttribute(\"is\");\r\n\t\t\t\tif (ctrlName) {\r\n\t\t\t\t\t//we uppercase because node names are uppercase\r\n\t\t\t\t\tcustomElement = registered[ctrlName.toUpperCase()];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!customElement && node.nodeName !== 'DIV' && node.nodeName !== 'SPAN') {\r\n\t\t\t\tcustomElement = registered[node.nodeName];\r\n\t\t\t}\r\n\r\n\t\t\tif (customElement && !node.mcnComponent) {\r\n\t\t\t\t//createElement(node, customElement);\r\n\t\t\t\tpromises.push(createElement(node, customElement));\r\n\t\t\t}\r\n\r\n\t\t\tif (node.msParentSelectorScope && node.winControl && node.winControl.pageLifeCycle && node.winControl.pageLifeCycle.observer) {\r\n\t\t\t\t//element is a fragment with its own mutation observer, no need to inspect childs\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//if (node.nodeName === 'WIN-TEMPLATE') {\r\n\t\t\t//    return;\r\n\t\t\t//}\r\n\r\n\t\t\tfor (var i = 0, l = node.childNodes.length; i < l; i++) {\r\n\t\t\t\tpromises.push(inspect(node.childNodes[i]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn WinJS.Promise.join(promises);\r\n\t}\r\n\r\n\t/**\r\n\t * inspect current DOM element and create webcomponents found on that element and on its child.\r\n\t * @function\r\n\t * @param {HTMLElement} element DOM element to inspect\r\n\t */\r\n\tWinJSContrib.UI.WebComponents.processAll = function (element) { };\r\n\tif (WinJSContrib.UI.WebComponents.polyfill) {\r\n\t\tWinJSContrib.UI.WebComponents.processAll = inspect;\r\n\t}\r\n\r\n\tfunction observeMutations(element) {\r\n\t\tvar observer = null;\r\n\t\tif (WinJSContrib.UI.WebComponents.polyfill) {\r\n\t\t\tobserver = new MutationObserver(function (mutations) {\r\n\t\t\t\t//console.time('check mutation');\r\n\t\t\t\tmutations.forEach(function (mutation) {\r\n\t\t\t\t\tif (mutation.addedNodes.length) {\r\n\t\t\t\t\t\tfor (var i = 0, l = mutation.addedNodes.length; i < l ; i++) {\r\n\t\t\t\t\t\t\tinspect(mutation.addedNodes[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//console.timeEnd('check mutation');\r\n\t\t\t});\r\n\r\n\t\t\tobserver.observe(element, { childList: true, subtree: true });\r\n\t\t}\r\n\r\n\t\treturn observer;\r\n\t}\r\n\tWinJSContrib.UI.WebComponents.watch = observeMutations;\r\n\r\n\tfunction createElement(element, definition) {\r\n\t\tvar ctrl = element.winControl;\r\n\t\telement.mcnComponent = true;\r\n\t\tvar scope = WinJSContrib.Utils.getScopeControl(element);\r\n\t\tvar p = WinJS.Promise.wrap();\r\n\t\tvar process = function () {\r\n\t\t\tgetControlInstance(definition.ctor, element);\r\n\t\t}\r\n\r\n\t\tif (scope && scope.pageLifeCycle) {\r\n\t\t\t//if the component is owned by a page/fragment, we process the control according to page lifecycle\r\n\t\t\tp = scope.pageLifeCycle.steps.render.attach(process);\r\n\t\t} else {\r\n\t\t\tprocess();\r\n\t\t}\r\n\r\n\t\t//put a proxy on setAttribute to detect changes in attributes\r\n\t\tvar setAttribute = element.setAttribute;\r\n\t\telement.setAttribute = function (name, val) {\r\n\t\t\tif (element.winControl) {\r\n\t\t\t\tsetAttribute.call(this, name, val);\r\n\t\t\t\tvar definition = element.winControl.constructor.mcnWebComponent;\r\n\t\t\t\tif (definition) {\r\n\t\t\t\t\tvar map = definition[name.toUpperCase()];\r\n\t\t\t\t\tif (map) {\r\n\t\t\t\t\t\tvar ctx = { control: element.winControl, name: map.property, data: {} }\r\n\t\t\t\t\t\tdefinition.applyAttribute(name, this, ctx);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn p;\r\n\t}\r\n\r\n\tfunction getControlInstance(ctor, element) {\r\n\t\telement.mcnComponent = true;\r\n\t\tvar definition = ctor.mcnWebComponent;\r\n\t\t//console.time('building ' + definition.name);\r\n\t\tvar options = {};\r\n\t\tif (element.dataset.winOptions) {\r\n\t\t\toptions = getWinJSOptions(element);\r\n\t\t}\r\n\r\n\t\tif (definition && definition.optionsCallback) {\r\n\t\t\toptions = definition.optionsCallback(element, options, scope);\r\n\t\t}\r\n\r\n\t\tvar ctrl = new ctor(element, options);\r\n\t\telement.winControl = ctrl;\r\n\t\tif (definition) {\r\n\t\t\tdefinition.applyAll(element);\r\n\t\t}\r\n\t\t//console.timeEnd('building ' + definition.name);\t\t\r\n\t}\r\n\r\n\tfunction applyMapping(tagname, ctor, mapping) {\r\n\t\tif (typeof mapping == 'function')\r\n\t\t\treturn;\r\n\t\tmapping = mapping || {};\r\n\r\n\t\tctor.mcnWebComponent = {\r\n\t\t\tname: tagname,\r\n\t\t\tmap: mapping.map || {},\r\n\t\t\toptionsCallback: mapping.optionsCallback,\r\n\t\t\tapplyAll: function (element) {\r\n\t\t\t\tvar contextData = {};\r\n\t\t\t\tfor (var item in this.map) {\r\n\t\t\t\t\tvar attrcontext = { control: element.winControl, name: this.map[item].property, data: contextData };\r\n\t\t\t\t\tthis.applyAttribute(item, element, null, attrcontext);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tapplyAttribute: function (name, element, attrvalue, context) {\r\n\t\t\t\tvar map = this.map[name.toUpperCase()];\r\n\t\t\t\tif (map) {\r\n\t\t\t\t\tvar val = attrvalue || element.getAttribute(map.attribute);\r\n\t\t\t\t\tvar ctrl = element.winControl;\r\n\t\t\t\t\tif (val && ctrl) {\r\n\t\t\t\t\t\tif (!map.type || map.type === 'property') {\r\n\t\t\t\t\t\t\tif (map.resolve) {\r\n\t\t\t\t\t\t\t\tWinJSContrib.Utils.applyValue(element, val, ctrl, map.property, context);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tWinJSContrib.Utils.writeProperty(ctrl, map.property, val);\r\n\t\t\t\t\t\t} else if (map.type === 'event') {\r\n\t\t\t\t\t\t\tWinJSContrib.Utils.resolveValue(element, val, context);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (mapping.properties) {\r\n\t\t\tmapping.properties.forEach(function (p) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tctor.mcnWebComponent.map[p.toUpperCase()] = { attribute: p, property: p, resolve: true, type: 'property' };\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (mapping.events) {\r\n\t\t\tmapping.events.forEach(function (p) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tctor.mcnWebComponent.map[p.toUpperCase()] = { attribute: p, property: p, resolve: true, type: 'event' };\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (mapping.controls) {\r\n\t\t\tfor (var ctKey in mapping.controls) {\r\n\t\t\t\tvar control = mapping.controls[ctKey];\r\n\t\t\t\tvar controlDefinition = control.mcnWebComponent;\r\n\t\t\t\tfor (var mapKey in controlDefinition.map) {\r\n\t\t\t\t\tvar key = ctKey + '.' + mapKey;\r\n\t\t\t\t\tvar controlmap = controlDefinition.map[mapKey];\r\n\t\t\t\t\tctor.mcnWebComponent.map[key.toUpperCase()] = {\r\n\t\t\t\t\t\tattribute: ctKey + '.' + controlmap.attribute,\r\n\t\t\t\t\t\tproperty: ctKey + '.' + controlmap.property,\r\n\t\t\t\t\t\tresolve: controlmap.resolve\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Register a control to be used as a webcomponent. If a tagname has already been registered, \r\n\t* the function will throw an error unless you specify the override flag\r\n\t* @function\r\n\t* @param {string} tagname name for DOM element for the component\r\n\t* @param {function} ctor constructor for the WinJS control\r\n\t* @param {Object} mapping definition for mapping between control and DOM element\r\n\t* @param {boolean} override indicate that you want to override an existing component definition\r\n\t* @example\r\n\t* WinJSContrib.UI.WebComponents.register('mcn-semanticlistviews', WinJSContrib.UI.SemanticListViews, {\r\n\t*\tproperties: ['nameOfProperty'],\r\n\t*   events : ['nameOfEvent'],\r\n\t*\tcontrols: {\r\n\t*\t\t\"listview\": WinJS.UI.ListView,\r\n\t*\t\t\"zoomedOutListview\": WinJS.UI.ListView,\r\n\t*\t\t\"semanticZoom\": WinJS.UI.SemanticZoom\r\n\t*\t},\r\n\t*\tmap: {\r\n\t*\t\t\"DEFAULTGROUPLIMIT\": { attribute: 'defaultGroupLimit', property: '_dataManager.defaultGroupLimit', resolve: true },\r\n\t*\t\t\"GROUPKIND\": { attribute: 'groupKind', property: '_dataManager.groupKind', resolve: true },\r\n\t*\t\t\"FIELD\": { attribute: 'field', property: '_dataManager.field', resolve: true },\r\n\t*\t\t\"ITEMS\": { attribute: 'items', property: '_dataManager.items', resolve: true },\r\n\t*\t}\r\n\t*});\r\n\t*/\r\n\tWinJSContrib.UI.WebComponents.register = function register(tagname, ctor, mapping, override) {\r\n\t\tvar existing = registered[tagname.toUpperCase()];\r\n\t\tif (existing && !override) {\r\n\t\t\tthrow 'component ' + tagname + ' already exists';\r\n\t\t}\r\n\r\n\t\tapplyMapping(tagname, ctor, mapping);\r\n\r\n\t\tif (WinJSContrib.UI.WebComponents.polyfill) {\r\n\t\t\tglobal.document.createElement(tagname);\r\n\t\t\t//we uppercase because node names are uppercase\r\n\t\t\tregistered[tagname.toUpperCase()] = { ctor: ctor };\r\n\t\t} else if (global.document.registerElement) {\r\n\t\t\t//register component with \"real\" webcomponent\r\n\t\t\tvar proto = Object.create(HTMLElement.prototype);\r\n\t\t\tproto.createdCallback = function () {\r\n\t\t\t}\r\n\r\n\t\t\tproto.attachedCallback = function () {\r\n\t\t\t\tvar element = this;\r\n\t\t\t\tvar scope = WinJSContrib.Utils.getScopeControl(element);\r\n\t\t\t\tvar process = function () {\r\n\t\t\t\t\tgetControlInstance(ctor, element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (scope && scope.pageLifeCycle) {\r\n\t\t\t\t\t//if the component is owned by a page/fragment, we process the control according to page lifecycle\r\n\t\t\t\t    scope.pageLifeCycle.steps.render.attach(process);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocess();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\r\n\r\n\t\t\tproto.attributeChangedCallback = function (attrName, oldValue, newValue) {\r\n\t\t\t\tvar element = this;\r\n\t\t\t\tif (element.winControl) {\r\n\t\t\t\t\tvar definition = element.winControl.constructor.mcnWebComponent;\r\n\t\t\t\t\tif (definition) {\r\n\t\t\t\t\t\tvar map = definition.map[attrName.toUpperCase()];\r\n\t\t\t\t\t\tif (map) {\r\n\t\t\t\t\t\t\tdefinition.applyAttribute(attrName, element, newValue, { control: element.winControl, name: map.property, data: {} });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t};\r\n\r\n\t\t\tglobal.document.registerElement(tagname, { prototype: proto });\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getWinJSOptions(elt) {\r\n\t\treturn WinJS.UI.optionsParser(elt.dataset.winOptions, window, {\r\n\t\t\tselect: WinJS.Utilities.markSupportedForProcessing(function (text) {\r\n\t\t\t\tvar parent = WinJSContrib.Utils.getScopeControl(elt);\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\treturn parent.element.querySelector(text);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn document.querySelector(text);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\tif (WinJS.Binding && WinJS.Binding.Template) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-template', WinJS.Binding.Template, {\r\n\t\t\tproperties: ['extractChild']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.AppBar) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-appbar', WinJS.UI.AppBar, {\r\n\t\t\tproperties: ['closedDisplayMode', 'disabled', 'hidden', 'layout', 'placement', 'sticky', 'commands', \r\n\t\t\t\t'onafterhide', 'onaftershow', 'onbeforehide', 'onbeforeshow'],\r\n\t\t\tevents: ['afterhide', 'aftershow', 'beforehide', 'beforeshow']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.AutoSuggestBox) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-autosuggestbox', WinJS.UI.AutoSuggestBox, {\r\n\t\t\tproperties: ['chooseSuggestionOnEnter', 'disabled', 'onquerychanged', 'onquerysubmitted', \r\n\t\t\t\t'onresultsuggestionchosen', 'onsuggestionsrequested', 'placeholderText', 'queryText', \r\n\t\t\t\t'searchHistoryContext', 'searchHistoryDisabled'],\r\n\t\t\tevents: ['querychanged', 'querysubmitted', 'resultsuggestionchosen', 'suggestionsrequested']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.BackButton) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-backbutton', WinJS.UI.BackButton);\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ContentDialog) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-contentdialog', WinJS.UI.ContentDialog, {\r\n\t\t\tproperties: ['hidden', 'primaryCommandDisabled', 'primaryCommandText', 'secondaryCommandDisabled',\r\n\t\t\t\t'secondaryCommandText', 'title', 'onafterhide', 'onaftershow', 'onbeforehide', 'onbeforeshow'],\r\n\t\t\tevents: ['afterhide', 'aftershow', 'beforehide', 'beforeshow']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.DatePicker) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-datepicker', WinJS.UI.DatePicker, {\r\n\t\t\tproperties: ['calendar', 'datePattern', 'disabled', 'maxYear', 'minYear', \r\n\t\t\t\t'monthPattern', 'yearPattern', 'onchange', 'current'],\r\n\t\t\tevents: ['change']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.FlipView) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-flipview', WinJS.UI.FlipView, {\r\n\t\t\tproperties: ['currentPage', 'orientation', 'itemTemplate', 'itemDataSource', 'itemSpacing', 'ondatasourcecountchanged', 'onpagevisibilitychanged', 'onpageselected', 'onpagecompleted'],\r\n\t\t\tevents: ['datasourcecountchanged', 'pagevisibilitychanged', 'pageselected', 'pagecompleted']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Flyout) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-flyout', WinJS.UI.Flyout, {\r\n\t\t\tproperties: ['alignment', 'anchor', 'disabled', 'hidden', 'placement', \r\n\t\t\t\t'onafterhide', 'onaftershow', 'onbeforehide', 'onbeforeshow'],\r\n\t\t\tevents: ['afterhide', 'aftershow', 'beforehide', 'beforeshow']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Hub) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-hub', WinJS.UI.Hub, {\r\n\t\t\tproperties: ['headerTemplate', 'indexOfFirstVisible', 'indexOfLastVisible', 'loadingState', \r\n\t\t\t\t'oncontentanimating', 'onheaderinvoked', 'onloadingstatechanged', \r\n\t\t\t\t'orientation', 'scrollPosition', 'sectionOnScreen', 'sections', 'zoomableView'],\r\n\t\t\tevents: ['contentanimating', 'headerinvoked', 'loadingstatechanged']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.HubSection) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-hubsection', WinJS.UI.HubSection, {\r\n\t\t\tproperties: ['contentElement', 'header', 'isHeaderStatic']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ItemContainer) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-itemcontainer', WinJS.UI.ItemContainer, {\r\n\t\t\tproperties: ['draggable', 'oninvoked', 'onselectionchanged', 'onselectionchanging', 'selected', 'selectionDisabled', \r\n\t\t\t\t'swipeBehavior', 'swipeOrientation', 'tapBehavior'],\r\n\t\t\tevents: ['invoked', 'selectionchanged', 'selectionchanging']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ListView) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-listview', WinJS.UI.ListView, {\r\n\t\t\tproperties: [\r\n\t\t\t\t'itemTemplate', 'itemDataSource', 'itemsDraggable', 'itemsReorderable',\r\n\t\t\t\t'oniteminvoked', 'groupHeaderTemplate', 'groupDataSource', 'swipeBehavior',\r\n\t\t\t\t'selectBehavior', 'tapBehavior', 'header', 'footer'\r\n\t\t\t],\r\n\t\t\tevents: ['iteminvoked']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Menu) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-menu', WinJS.UI.Menu, {\r\n\t\t\tproperties: ['alignment', 'anchor', 'commands', 'disabled', 'hidden', 'placement', \r\n\t\t\t\t'onafterhide', 'onaftershow', 'onbeforehide', 'onbeforeshow'],\r\n\t\t\tevents: ['afterhide', 'aftershow', 'beforehide', 'beforeshow']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Pivot) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-pivot', WinJS.UI.Pivot, {\r\n\t\t\tproperties: ['items', 'locked', 'onitemanimationend', 'onitemanimationstart', 'onselectionchanged', \r\n\t\t\t\t'selectedIndex', 'selectedItem', 'title'],\r\n\t\t\tevents: ['itemanimationend', 'itemanimationstart', 'selectionchanged']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.PivotItem) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-pivotitem', WinJS.UI.PivotItem, {\r\n\t\t\tproperties: ['contentElement', 'header']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Rating) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-rating', WinJS.UI.Rating, {\r\n\t\t\tproperties: ['averageRating', 'disabled', 'enableClear', 'maxRating', \r\n\t\t\t\t'oncancel', 'onchange', 'onpreviewchange', 'tooltipStrings', 'userRating'],\r\n\t\t\tevents: ['cancel', 'change', 'previewchange']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Repeater) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-repeater', WinJS.UI.Repeater, {\r\n\t\t\tproperties: ['data', 'length', 'onitemchanged', 'onitemchanging', 'oniteminserted', 'oniteminserting', \r\n\t\t\t\t'onitemmoved', 'onitemmoving', 'onitemremoved', 'onitemremoving', 'onitemsloaded', \r\n\t\t\t\t'onitemsreloaded', 'onitemsreloading', 'template'],\r\n\t\t\tevents: ['itemchanged', 'itemchanging', 'iteminserted', 'iteminserting',\r\n\t\t\t\t'itemmoved', 'itemmoving', 'itemremoved', 'itemremoving', 'itemsloaded',\r\n\t\t\t\t'itemsreloaded', 'itemsreloading']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.SearchBox) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-searchbox', WinJS.UI.SearchBox, {\r\n\t\t\tproperties: ['chooseSuggestionOnEnter', 'disabled', 'focusOnKeyboardInput', 'onquerychanged', 'onquerysubmitted', \r\n\t\t\t\t'onresultsuggestionchosen', 'onsuggestionsrequested', 'placeholderText', 'queryText', \r\n\t\t\t\t'searchHistoryContext', 'searchHistoryDisabled'],\r\n\t\t\tevents: ['querychanged', 'querysubmitted', 'resultsuggestionchosen', 'suggestionsrequested']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.SemanticZoom) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-semanticzoom', WinJS.UI.SemanticZoom, {\r\n\t\t\tproperties: ['enableButton', 'locked', 'onzoomchanged', 'zoomedInItem', 'zoomedOut', 'zoomedOutItem', 'zoomFactor'],\r\n\t\t\tevents: ['zoomchanged']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.SplitView) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-splitview', WinJS.UI.SplitView, {\r\n\t\t\tproperties: ['contentElement', 'hiddenDisplayMode', 'paneElement', 'paneHidden', 'panePlacement', 'shownDisplayMode',\r\n\t\t\t\t'onafterhide', 'onaftershow', 'onbeforehide', 'onbeforeshow'],\r\n\t\t\tevents: ['afterhide', 'aftershow', 'beforehide', 'beforeshow']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.TimePicker) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-timepicker', WinJS.UI.TimePicker, {\r\n\t\t\tproperties: ['onchange', 'clock', 'current', 'disabled', 'hourPattern',\r\n\t\t\t\t'minuteIncrement', 'minutePattern', 'periodPattern'],\r\n\t\t\tevents: ['onchange']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ToggleSwitch) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-toggleswitch', WinJS.UI.ToggleSwitch, {\r\n\t\t\tproperties: ['onchange', 'checked', 'disabled', 'labelOff', 'labelOn', 'title'],\r\n\t\t\tevents: ['onchange']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ToolBar) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-toolbar', WinJS.UI.ToolBar);\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.Tooltip) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-tooltip', WinJS.UI.Tooltip, {\r\n\t\t\tproperties: ['contentElement', 'extraClass', 'infotip', 'innerHTML', 'onbeforeclose', \r\n\t\t\t\t'onbeforeopen', 'onclosed', 'onopened', 'placement'],\r\n\t\t\tevents: ['beforeclose', 'beforeopen', 'closed', 'opened']\r\n\t\t});\r\n\t}\r\n\r\n\tif (WinJS.UI && WinJS.UI.ViewBox) {\r\n\t\tWinJSContrib.UI.WebComponents.register('win-viewbox', WinJS.UI.ViewBox);\r\n\t}\r\n\r\n\r\n\t/*\r\n\t\t\t\tWinJS.UI.MenuCommand\r\n\t\t\t\tWinJS.UI.NavBar\r\n\t\t\t\tWinJS.UI.NavBarCommand\r\n\t\t\t\tWinJS.UI.NavBarContainer\r\n\t\t\t\tToolbar\r\n\t*/\r\n})(this);","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var WinRT;\n    (function (WinRT) {\n        /**\n         * read protocol arguments from application activation event arguments\n         * @function WinJSContrib.WinRT.readProtocol\n         * @param {Object} args WinJS application activation argument\n         * @returns {Object} protocol arguments\n         */\n        function readProtocol(args) {\n            if (args.detail.kind === Windows.ApplicationModel.Activation.ActivationKind.protocol && args.detail.uri) {\n                var navArgs = { action: undefined };\n                var protocolArgs = {};\n                var queryargs = args.detail.uri.query;\n                if (queryargs[0] == '?') {\n                    queryargs = queryargs.substr(1);\n                }\n                if (queryargs) {\n                    queryargs.split('&').forEach(function (item) {\n                        var arg = item.split('=');\n                        protocolArgs[arg[0]] = decodeURIComponent(arg[1]);\n                    });\n                }\n                navArgs.protocol = {\n                    action: args.detail.uri.host,\n                    args: protocolArgs\n                };\n                return navArgs;\n            }\n        }\n        WinRT.readProtocol = readProtocol;\n        ;\n        /**\n         * Indicate if a valid internet connection is available, even with constrained access\n         * @function WinJSContrib.WinRT.isConnected\n         * @returns {boolean}\n         */\n        function isConnected() {\n            var nlvl = Windows.Networking.Connectivity.NetworkConnectivityLevel;\n            var profile = Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();\n            if (profile !== null) {\n                var level = profile.getNetworkConnectivityLevel();\n                return level === nlvl.constrainedInternetAccess || level === nlvl.internetAccess;\n            }\n            return false;\n        }\n        WinRT.isConnected = isConnected;\n        ;\n        /**\n         * Indicate if a valid internet connection is available\n         * @function WinJSContrib.WinRT.hasInternetAccess\n         * @returns {boolean}\n         */\n        function hasInternetAccess() {\n            var nlvl = Windows.Networking.Connectivity.NetworkConnectivityLevel;\n            var profile = Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();\n            if (profile !== null) {\n                var level = profile.getNetworkConnectivityLevel();\n                return level === nlvl.internetAccess;\n            }\n            return false;\n        }\n        WinRT.hasInternetAccess = hasInternetAccess;\n        ;\n        /**\n         * trigger callback when internet connection status is changing\n         * @function WinJSContrib.WinRT.onInternetStatusChanged\n         * @param {function} callback callback for internet status change notification\n         * @returns {function} function to call for unregistering the callback\n         */\n        function onInternetStatusChanged(callback) {\n            var handler = function (arg) {\n                var e = arg;\n                callback(WinJSContrib.WinRT.hasInternetAccess());\n            };\n            var network = Windows.Networking.Connectivity.NetworkInformation;\n            network.addEventListener('networkstatuschanged', handler);\n            return function () {\n                network.removeEventListener('networkstatuschanged', handler);\n            };\n        }\n        WinRT.onInternetStatusChanged = onInternetStatusChanged;\n    })(WinRT = WinJSContrib.WinRT || (WinJSContrib.WinRT = {}));\n})(WinJSContrib || (WinJSContrib = {}));\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var Alerts;\n    (function (Alerts) {\n        /**\n         * show system alert box\n         * @function WinJSContrib.Alerts.messageBox\n         * @param {Object} opt message options\n         * @returns {WinJS.Promise}\n         */\n        function messageBox(opt) {\n            var _global = window;\n            if (opt) {\n                if (_global.Windows) {\n                    var md = new Windows.UI.Popups.MessageDialog(opt.content);\n                    if (opt.title) {\n                        md.title = opt.title;\n                    }\n                    if (opt.commands && opt.commands.forEach) {\n                        opt.commands.forEach(function (command, index) {\n                            var cmd = new Windows.UI.Popups.UICommand();\n                            if (command.id)\n                                cmd.id = command.id;\n                            cmd.label = command.label;\n                            if (command.callback) {\n                                cmd.invoked = command.callback;\n                            }\n                            ((md.commands)).append(cmd);\n                            if (command.isDefault) {\n                                md.defaultCommandIndex = index;\n                            }\n                        });\n                    }\n                    return (md.showAsync());\n                }\n                else {\n                    return new WinJS.Promise(function (complete, error) {\n                        var title = \"\";\n                        if (opt.title) {\n                            title = opt.title;\n                        }\n                        var commands = [];\n                        if (opt.commands && opt.commands.forEach) {\n                            //if (opt.commands.length > 2) {\n                            //    return WinJS.Promise.wrapError(\"you must specify maximum 2 commands on Cordova platforms\");\n                            //}\n                            opt.commands.forEach(function (command, index) {\n                                commands.push(command.label);\n                            });\n                        }\n                        else\n                            commands = ['Ok'];\n                        if (_global.navigator && _global.navigator.notification && _global.navigator.notification.confirm) {\n                            _global.navigator.notification.confirm(opt.content, function (res) {\n                                if (opt.commands && opt.commands[res - 1] && opt.commands[res - 1].callback) {\n                                    var c = opt.commands[res - 1].callback();\n                                    if (c && c.then) {\n                                        c.then(function () {\n                                            complete(true);\n                                        });\n                                    }\n                                    else {\n                                        complete(true);\n                                    }\n                                }\n                                else if (res != 0)\n                                    complete(true);\n                                else\n                                    complete(false);\n                            }, title, commands // buttonLabels\n                            );\n                        }\n                        else {\n                            if (window.confirm(title))\n                                complete(true);\n                            else\n                                complete(false);\n                        }\n                    });\n                }\n            }\n            return WinJS.Promise.wrapError(\"you must specify commands as an array of objects with properties text and callback such as {text: '', callback: function(c){}}\");\n        }\n        Alerts.messageBox = messageBox;\n        ;\n        /**\n         * show system alert box\n         * @function WinJSContrib.Alerts.message\n         * @param {string} title title of the alert\n         * @param {string} content text for the alert\n         * @returns {WinJS.Promise}\n         */\n        function message(title, content) {\n            return WinJSContrib.Alerts.messageBox({ title: title, content: content });\n        }\n        Alerts.message = message;\n        /**\n         * show system alert box\n         * @function WinJSContrib.Alerts.confirm\n         * @param {string} title title of the alert\n         * @param {string} content text for the alert\n         * @param {string} yes text for yes\n         * @param {string} no text for no\n         * @returns {WinJS.Promise}\n         */\n        function confirm(title, content, yes, no) {\n            return new WinJS.Promise(function (complete, error) {\n                WinJSContrib.Alerts.messageBox({\n                    title: title,\n                    content: content,\n                    commands: [\n                        {\n                            label: yes,\n                            callback: function (e) {\n                                complete(true);\n                            },\n                            isDefault: true\n                        },\n                        {\n                            label: no,\n                            callback: function (e) {\n                                complete(false);\n                            }\n                        }\n                    ]\n                });\n            });\n        }\n        Alerts.confirm = confirm;\n        /**\n         * show system toast notification\n         * @function WinJSContrib.Alerts.toastNotification\n         * @param {Object} data toast options\n         */\n        function toastNotification(data) {\n            if (Windows) {\n                var notifications = Windows.UI.Notifications;\n                var template = data.template || (data.picture ? notifications.ToastTemplateType.toastImageAndText01 : notifications.ToastTemplateType.toastText01);\n                //var template = notifications.ToastTemplateType[data.template]; //toastImageAndText01;\n                var toastXml = notifications.ToastNotificationManager.getTemplateContent(template);\n                var toastTextElements = toastXml.getElementsByTagName(\"text\");\n                var toastImageElements = toastXml.getElementsByTagName(\"image\");\n                if (data.launch) {\n                    var toastElements = toastXml.getElementsByTagName(\"toast\");\n                    toastElements[0].setAttribute(\"launch\", JSON.stringify(data.launch));\n                }\n                toastTextElements[0].appendChild(toastXml.createTextNode(data.text));\n                if (data.text2 && toastTextElements.length > 1) {\n                    toastTextElements[1].appendChild(toastXml.createTextNode(data.text2));\n                }\n                if (data.text3 && toastTextElements.length > 1) {\n                    toastTextElements[2].appendChild(toastXml.createTextNode(data.text3));\n                }\n                if (data.picture) {\n                    toastImageElements[0].setAttribute(\"src\", data.picture); //\"ms-appx:///images/logo.png\"\n                }\n                var toast = new notifications.ToastNotification(toastXml);\n                var toastNotifier = notifications.ToastNotificationManager.createToastNotifier();\n                toastNotifier.show(toast);\n            }\n            else {\n                throw \"No notification plugin found\";\n            }\n        }\n        Alerts.toastNotification = toastNotification;\n        /**\n         * show system toast notification\n         * @function WinJSContrib.Alerts.toast\n         * @param {string} text text displayed in the toast\n         * @param {string} picture path to a picture to display in the toast\n         */\n        function toast(text, picture) {\n            WinJSContrib.Alerts.toastNotification({ text: text, picture: picture });\n        }\n        Alerts.toast = toast;\n    })(Alerts = WinJSContrib.Alerts || (WinJSContrib.Alerts = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\n//# sourceMappingURL=../../Sources/WinRT/winjscontrib.winrt.core.js.map","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib = WinJSContrib || {};\r\nWinJSContrib.UPnP = WinJSContrib.UPnP || {};\r\n\r\n(function (global) {\r\n\r\n    WinJSContrib.UPnP.deviceTypes = {\r\n        ContentDirectory1: 'urn:schemas-upnp-org:service:ContentDirectory:1',\r\n        ContentDirectory2: 'urn:schemas-upnp-org:service:ContentDirectory:2',\r\n        ContentDirectory3: 'urn:schemas-upnp-org:service:ContentDirectory:3',\r\n        ContentDirectory4: 'urn:schemas-upnp-org:service:ContentDirectory:4',\r\n        MediaRenderer1: 'urn:schemas-upnp-org:device:MediaRenderer:1',\r\n        MediaRenderer2: 'urn:schemas-upnp-org:device:MediaRenderer:2',\r\n        MediaRenderer3: 'urn:schemas-upnp-org:device:MediaRenderer:3',\r\n        MediaRenderer4: 'urn:schemas-upnp-org:device:MediaRenderer:4',\r\n        MediaServer1: 'urn:schemas-upnp-org:device:MediaServer:1',\r\n        MediaServer2: 'urn:schemas-upnp-org:device:MediaServer:2',\r\n        MediaServer3: 'urn:schemas-upnp-org:device:MediaServer:3',\r\n        MediaServer4: 'urn:schemas-upnp-org:device:MediaServer:4',\r\n        AVTransport1:'urn:schemas-upnp-org:service:AVTransport:1',\r\n        AVTransport2: 'urn:schemas-upnp-org:service:AVTransport:2',\r\n        ConnectionManager1: 'urn:schemas-upnp-org:service:ConnectionManager:1',\r\n        ConnectionManager2: 'urn:schemas-upnp-org:service:ConnectionManager:2',\r\n        ConnectionManager3: 'urn:schemas-upnp-org:service:ConnectionManager:3'\r\n    };\r\n\r\n    WinJSContrib.UPnP.devicesDiscovery = function devicesDiscovery(filter, callback, timeout) {\r\n        var hostName;\r\n        try {\r\n            hostName = new Windows.Networking.HostName(\"239.255.255.250\");\r\n        } catch (ex) {\r\n            error({ message: \"Invalid host name.\" });\r\n            return;\r\n        }\r\n\r\n        var devices = new WinJS.Binding.List();\r\n\r\n        var discovery = {\r\n            devices: devices,\r\n            hasError: null,\r\n            promise: null,\r\n        };\r\n\r\n        function exists(url) {\r\n            var matches = devices.filter(function (d) {\r\n                return (url == d.deviceDescriptionUrl);\r\n            });\r\n            return matches.length > 0;\r\n        }\r\n\r\n        function discover(filter) {\r\n            return new WinJS.Promise(function (complete, error) {\r\n                var clientSocket = new Windows.Networking.Sockets.DatagramSocket();\r\n\r\n                function onsuccess(err) {\r\n                    try {\r\n                        if (clientSocket)\r\n                            clientSocket.close();\r\n                    } catch (ex) {\r\n                    }\r\n                    complete(devices);\r\n                }\r\n\r\n                function onerror(err) {\r\n                    try {\r\n                        if (clientSocket)\r\n                            clientSocket.close();\r\n                    } catch (ex) {\r\n                    }\r\n                    error(err);\r\n                }\r\n\r\n                clientSocket.onmessagereceived = function (args) {\r\n                    var e = args;\r\n                    var reader = args.getDataReader();\r\n                    var count = reader.unconsumedBufferLength;\r\n                    var data = reader.readString(count);\r\n                    var completed = false;\r\n\r\n                    if (data) {\r\n                        var items = data.split('\\n');\r\n                        items.forEach(function (item) {\r\n                            if (!completed && item.toLowerCase().indexOf('location:') == 0) {\r\n                                var url = item.substr(9, item.length - 9);\r\n                                completed = true;\r\n                                if (!exists(url)) {\r\n                                    WinJS.xhr({ url: url }).then(function (r) {\r\n\r\n                                        var rawdevice = xmlToJson(r.responseXML);\r\n                                        var device = rawdevice.root.device;\r\n\r\n                                        device.deviceDescriptionUrl = url;\r\n                                        device.rootUrl = url.substr(0, url.indexOf('/', 8));\r\n                                        if (!exists(url)) {\r\n                                            devices.push(new WinJSContrib.UPnP.UPnPDevice(device));\r\n                                        }\r\n\r\n                                        if (callback)\r\n                                            callback(device, url);\r\n                                    }, function (err) {\r\n                                        console.error('calling device failed');\r\n                                        console.error(err);\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                }\r\n\r\n                clientSocket.getOutputStreamAsync(hostName, \"1900\").then(function (outputStream) {\r\n                    var message = \"M-SEARCH * HTTP/1.1\\r\\n\" +\r\n                                        \"HOST: 239.255.255.250:1900\\r\\n\" +\r\n                                          \"ST:\" + (filter || \"upnp:rootdevice\") + \"\\r\\n\" +\r\n                                          \"MAN:\\\"ssdp:discover\\\"\\r\\n\" +\r\n                                          \"MX:3\\r\\n\\r\\n\";\r\n\r\n\r\n                    var writer = new Windows.Storage.Streams.DataWriter(outputStream);\r\n                    writer.unicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;\r\n                    writer.writeString(message);\r\n                    return writer.storeAsync();\r\n                }).then(function () {\r\n                    return WinJS.Promise.timeout(timeout || 20000);\r\n                }).then(onsuccess, onerror);\r\n            }).then(function (res) {\r\n                discovery.hasError = false;\r\n            }, function (err) {\r\n                discovery.hasError = true;\r\n                discovery.error = err;\r\n            });\r\n        }\r\n\r\n        var promises = [];\r\n\r\n        if (!filter || (typeof filter == 'string')) {\r\n            promises.push(discover(filter));\r\n        }\r\n        else if (filter && typeof filter != 'string' && filter.length) {\r\n            for (var i = 0 ; i < filter.length; i++) {\r\n                promises.push(discover(filter[i]));\r\n            }\r\n        }\r\n\r\n        discovery.promise = WinJS.Promise.join(promises);\r\n\r\n        return discovery;\r\n    }\r\n\r\n    function endsWith(text, search) {\r\n        return text.indexOf(search) == text.length - search.length;\r\n    }\r\n\r\n    WinJSContrib.UPnP.getContentType = function (url, extension) {\r\n        var lowerUrl = url.toLowerCase();\r\n\r\n        if (extension == \"mp3\" || endsWith(lowerUrl, \".mp3\"))\r\n            return \"audio/mp3\";\r\n\r\n        if (extension == \"mp4\" || endsWith(lowerUrl, \".mp4\"))\r\n            return \"video/mp4\";\r\n\r\n        if (extension == \"avi\" || endsWith(lowerUrl, \".avi\"))\r\n            return \"video/avi\";\r\n\r\n        if (extension == \"mkv\" || endsWith(lowerUrl, \".mkv\"))\r\n            return \"video/x-matroska\";\r\n    }\r\n\r\n    function xmlToJson(xml) {\r\n\r\n        // Create the return object\r\n        var obj = {};\r\n\r\n        if (xml.nodeType == 1) { // element\r\n            // do attributes\r\n            if (xml.attributes.length > 0) {\r\n                obj[\"@attributes\"] = {};\r\n                for (var j = 0; j < xml.attributes.length; j++) {\r\n                    var attribute = xml.attributes.item(j);\r\n\r\n                    obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\r\n                }\r\n            }\r\n        } else if (xml.nodeType == 3) { // text\r\n            obj = xml.nodeValue;\r\n        }\r\n\r\n        // do children\r\n        if (xml.hasChildNodes()) {\r\n            var properties = 0;\r\n            for (var i = 0; i < xml.childNodes.length; i++) {\r\n                var item = xml.childNodes.item(i);\r\n                var nodeName = item.nodeName;\r\n                if (typeof (obj[nodeName]) == \"undefined\") {\r\n                    var tmp = xmlToJson(item);\r\n                    var colonIdx = nodeName.indexOf(':');\r\n                    if (colonIdx > 0) {\r\n                        var clearNode = nodeName.substr(colonIdx + 1, nodeName.length - colonIdx - 1);\r\n\r\n                    }\r\n\r\n                    if (clearNode && !obj[clearNode]) {\r\n                        obj[clearNode] = tmp;\r\n                    } else {\r\n                        obj[nodeName] = tmp;\r\n                    }\r\n\r\n                    properties++;\r\n                } else {\r\n                    if (typeof (obj[nodeName].push) == \"undefined\") {\r\n                        var old = obj[nodeName];\r\n                        obj[nodeName] = [];\r\n                        obj[nodeName].push(old);\r\n                    }\r\n                    obj[nodeName].push(xmlToJson(item));\r\n                    properties++;\r\n                }\r\n            }\r\n\r\n            if (obj['#text'] && typeof obj['#text'] == 'string') {\r\n                obj['#text'] = obj['#text'].trim();\r\n            }\r\n            if (properties == 1 && obj['#text'] && typeof obj['#text'] == 'string') {\r\n                obj = obj['#text'];\r\n            }\r\n        }\r\n\r\n        for (var e in obj[\"@attributes\"]) {\r\n            if (!obj[e])\r\n                obj[e] = obj[\"@attributes\"][e];\r\n        }\r\n\r\n        return obj;\r\n    };\r\n\r\n    /**\r\n     * UPnP device\r\n     * @class\r\n     */\r\n    WinJSContrib.UPnP.UPnPDevice = function (deviceObj) {\r\n        for (var p in deviceObj) {\r\n            this[p] = deviceObj[p];\r\n        }\r\n    }\r\n\r\n    WinJSContrib.UPnP.UPnPDevice.prototype.getService = function (serviceType) {\r\n        var device = this;\r\n        var service = null;\r\n\r\n        if (typeof serviceType == 'string')\r\n            serviceType = [serviceType];\r\n\r\n        if (device.serviceList && device.serviceList.service) {\r\n            service = device.serviceList.service.filter(function (s) {\r\n                return serviceType.indexOf(s.serviceType) >= 0;\r\n            })[0];\r\n\r\n            if (!service && device.deviceList) {\r\n                device.deviceList.device.forEach(function (childdevice) {\r\n                    var childService = childdevice.serviceList.service.filter(function (s) {\r\n                        return serviceType.indexOf(s.serviceType) >= 0;\r\n                    })[0];\r\n\r\n                    if (childService)\r\n                        service = childService;\r\n                });\r\n            }\r\n        }\r\n\r\n        if (service) {\r\n            service.rootUrl = device.rootUrl;\r\n            service.url = device.rootUrl + service.controlURL;\r\n        }\r\n\r\n        return service;\r\n    }\r\n\r\n    WinJSContrib.UPnP.UPnPDevice.prototype.getAVTransport = function () {\r\n        var service = this.getService([WinJSContrib.UPnP.deviceTypes.AVTransport1, WinJSContrib.UPnP.deviceTypes.AVTransport2]);\r\n        if (service) {\r\n            return new WinJSContrib.UPnP.UPnPAVTransport(service);\r\n        }\r\n    }\r\n\r\n    WinJSContrib.UPnP.UPnPDevice.prototype.getContentDirectory = function () {\r\n        var service = this.getService([WinJSContrib.UPnP.deviceTypes.ContentDirectory1, WinJSContrib.UPnP.deviceTypes.ContentDirectory2, WinJSContrib.UPnP.deviceTypes.ContentDirectory3, WinJSContrib.UPnP.deviceTypes.ContentDirectory4]);\r\n        if (service) {\r\n            return new WinJSContrib.UPnP.UPnPContentDirectory(service);\r\n        }\r\n    }\r\n\r\n    WinJSContrib.UPnP.UPnPDevice.prototype.getConnectionManager = function () {\r\n        var service = this.getService([WinJSContrib.UPnP.deviceTypes.ConnectionManager1, WinJSContrib.UPnP.deviceTypes.ConnectionManager2, WinJSContrib.UPnP.deviceTypes.ConnectionManager3]);\r\n        if (service) {\r\n            return new WinJSContrib.UPnP.UPnPConnectionManager(service);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Code largely from https://github.com/richtr/plug.play.js\r\n     */\r\n\r\n    WinJSContrib.UPnP.UPnPService = function (serviceObj, opts) {\r\n\r\n        this.options = opts || { debug: false };\r\n        this.svc = serviceObj;\r\n\r\n        // API stub\r\n        this.action = function () { };\r\n\r\n        //if (!this.svc || !(this.svc instanceof NetworkService)) {\r\n\r\n        //    this.debugLog('First argument provided in constructor MUST be a valid NetworkService object');\r\n\r\n        //    return this;\r\n        //}\r\n\r\n        //if (!this.svc.type || this.svc.type.indexOf('upnp:') !== 0) {\r\n\r\n        //    this.debugLog('First argument provided in constructor MUST be a _UPnP_ NetworkService object');\r\n\r\n        //    return this;\r\n\r\n        //}\r\n\r\n        //this.svcType = this.svc.type.replace('upnp:', '');\r\n        this.svcType = this.svc.serviceType;\r\n        this.svcUrl = this.svc.url;\r\n\r\n        var self = this;\r\n\r\n        // Full API\r\n        this.action = function (upnpAction, upnpParameters, callback) {\r\n\r\n            return new WinJS.Promise(function (promiseComplete, promiseError) {\r\n\r\n                // Handle .action( name, callback )\r\n                if (!callback && Object.prototype.toString.call(upnpParameters) == '[object Function]') {\r\n                    callback = upnpParameters;\r\n                    upnpParameters = {};\r\n                }\r\n\r\n                // Generate a callback stub if a Function has not been provided\r\n                if (!callback || Object.prototype.toString.call(callback) !== '[object Function]') {\r\n                    callback = function (e, response) { };\r\n                }\r\n\r\n                // Create a UPnP XML Request message\r\n                var svcMsg = self.createRequest(self.svcType, upnpAction, upnpParameters);\r\n\r\n                // Send the UPnP XML Request message to the current service\r\n                self.sendRequest(self.svcType, upnpAction, self.svcUrl, svcMsg, function (e, xmlResponse) {\r\n\r\n                    if (e !== null) {\r\n                        callback.apply(self, [e, null]);\r\n                        promiseError(e);\r\n                        return;\r\n                    }\r\n\r\n                    // Parse UPnP XML Response message\r\n                    self.handleResponse(upnpAction, xmlResponse.responseXML || \"\", upnpParameters, function (e, upnpResponse) {\r\n\r\n                        // Fire callback\r\n                        callback.apply(self, [e, upnpResponse]);\r\n\r\n                        // Fire promise\r\n                        if (e !== null) {\r\n                            promiseError(e);\r\n                        } else {\r\n                            promiseComplete(upnpResponse);\r\n                        }\r\n\r\n                    });\r\n\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.constructor = WinJSContrib.UPnP.UPnPService;\r\n\r\n    // UPnP XML MESSAGING TEMPLATES\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.requestTemplate = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" +\r\n     \"<s:Envelope s:encodingStyle=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\" \" +\r\n       \"xmlns:s=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\">\\n\" +\r\n       \"\\t<s:Body>\\n\" +\r\n         \"\\t\\t<u:{ACTION_NAME} xmlns:u=\\\"{ACTION_TYPE}\\\">\\n\" +\r\n           \"{ACTION_VARS}\" +\r\n         \"\\t\\t</u:{ACTION_NAME}>\\n\" +\r\n       \"\\t</s:Body>\\n\" +\r\n     \"</s:Envelope>\\n\";\r\n\r\n    // UPNP PRIMITIVE VARIABLE TYPE CHECKERS\r\n    // from http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.0.pdf\r\n    WinJSContrib.UPnP.UPnPService.prototype.types = {\r\n\r\n        \"i1\": function (val, allowedValues, toNative) {\r\n            var i8 = new Int8Array(1);\r\n            i8[0] = val;\r\n\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(i8[0], allowedValues);\r\n\r\n        },\r\n\r\n        \"i2\": function (val, allowedValues, toNative) {\r\n            var i16 = new Int16Array(1);\r\n            i16[0] = val;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(i16[0], allowedValues);\r\n        },\r\n\r\n        \"i4\": function (val, allowedValues, toNative) {\r\n            var i32 = new Int32Array(1);\r\n            i32[0] = val;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(i32[0], allowedValues);\r\n        },\r\n\r\n        \"ui1\": function (val, allowedValues, toNative) {\r\n            var ui8 = new Uint8Array(1);\r\n            ui8[0] = val;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(ui8[0], allowedValues);\r\n        },\r\n\r\n        \"ui2\": function (val, allowedValues, toNative) {\r\n            var ui16 = new Uint16Array(1);\r\n            ui16[0] = val;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(ui16[0], allowedValues);\r\n        },\r\n\r\n        \"ui4\": function (val, allowedValues, toNative) {\r\n            var ui32 = new Uint32Array(1);\r\n            ui32[0] = val;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(ui32[0], allowedValues);\r\n        },\r\n\r\n        \"int\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || isNaN(val)) {\r\n                val = 0;\r\n            } else if (typeof val !== 'number') {\r\n                if (val === true) {\r\n                    val = 1;\r\n                } else {\r\n                    val = parseInt(val + \"\", 10);\r\n                }\r\n            }\r\n            if (!toNative) {\r\n                val = expandExponential(val + \"\");\r\n            }\r\n            if (isNaN(val)) val = 0;\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n        },\r\n\r\n        \"r4\": function (val, allowedValues, toNative) {\r\n            var f32 = new Float32Array(1);\r\n            f32[0] = val;\r\n            if (!toNative) {\r\n                return f32[0] ? expandExponential(f32[0] + \"\") : \"0\";\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(f32[0], allowedValues);\r\n        },\r\n\r\n        \"r8\": function (val, allowedValues, toNative) {\r\n            var f64 = new Float64Array(1);\r\n            f64[0] = val;\r\n            if (!toNative) {\r\n                return f64[0] ? expandExponential(f64[0] + \"\") : \"0\";\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(f64[0], allowedValues);\r\n        },\r\n\r\n        \"number\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['r8'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"fixed_14_4\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['float'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"float\": function (val, allowedValues, toNative) {\r\n            var _float = parseFloat(val);\r\n            if (!toNative) {\r\n                return _float ? expandExponential(_float + \"\") : \"0\";\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(_float, allowedValues);\r\n        },\r\n\r\n        \"char\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || val === \"\" || (val + \"\") == \"NaN\" || val instanceof RegExp) {\r\n                val = \"\";\r\n            } else if (val === false || val === true || val == \"true\" || val == \"yes\" || val == \"false\" || val == \"no\") {\r\n                val = (val === true || val == \"true\" || val == \"yes\") ? \"1\" : \"0\";\r\n            } else {\r\n                val = val.toString();\r\n            }\r\n            if (val.length > 0) {\r\n                val = WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n                return val.charAt(0);\r\n            }\r\n            return val;\r\n        },\r\n\r\n        \"string\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || val === \"\" || (val + \"\") == \"NaN\" || val instanceof RegExp) {\r\n                val = \"\";\r\n            }\r\n            val = val + \"\";\r\n\r\n            val = WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n            return val;\r\n        },\r\n\r\n        \"xmlObj\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || val === \"\" || (val + \"\") == \"NaN\" || val instanceof RegExp) {\r\n                val = \"\";\r\n            }\r\n            val = val + \"\";\r\n\r\n            val = WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n            try {\r\n                var s = '';\r\n\r\n                var currentPos = val.indexOf('&');\r\n                while (currentPos > 0) {\r\n                    var idx = val.indexOf(';', currentPos);\r\n                    if (idx < 0 || (idx - currentPos) > 5) {\r\n                        val = val.substr(0, currentPos) + \"&amp;\" + val.substr(currentPos + 1, val.length - (currentPos + 1));\r\n                    }\r\n                    currentPos = val.indexOf('&', currentPos + 1);\r\n                }\r\n\r\n                var xml = parseXML(val);\r\n                return xmlToJson(xml);\r\n            } catch (exception) {\r\n                console.error(exception);\r\n                return val;\r\n            }\r\n        },\r\n\r\n        \"date\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['dateTime'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"dateTime\": function (val, allowedValues, toNative) {\r\n            if (toNative) { // Parse to ECMA Date object\r\n                if (Object.prototype.toString.call(val) == '[object String]') {\r\n                    val = new Date(parseDate(val));\r\n                    if (isNaN(val)) val = \"\";\r\n                } else if (Object.prototype.toString.call(val) == '[object Date]') {\r\n                    val = val;\r\n                }\r\n            } else { // Parse to ISO-8601 string\r\n                if (Object.prototype.toString.call(val) == '[object String]') {\r\n                    val = val + \"\";\r\n                } else if (Object.prototype.toString.call(val) == '[object Date]') {\r\n                    if (val.toString() == \"Invalid Date\") { // opera specific functionality\r\n                        val = \"\";\r\n                    } else {\r\n                        val = val.toISOString();\r\n                    }\r\n                }\r\n            }\r\n            val = WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n            return val;\r\n        },\r\n\r\n        \"dateTime_tz\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['dateTime'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"time\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['dateTime'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"time_tz\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['dateTime'](val, allowedValues, toNative);\r\n        },\r\n\r\n        \"boolean\": function (val, allowedValues, toNative) {\r\n            if (val == 'false' || val == 'f' || val == 'no' || val == 'n' || val instanceof RegExp || val <= 0 || !val) {\r\n                if (toNative) {\r\n                    val = false;\r\n                } else {\r\n                    val = \"0\";\r\n                }\r\n            } else {\r\n                if (toNative) {\r\n                    val = true;\r\n                } else {\r\n                    val = \"1\";\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n\r\n        \"bin_base64\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || val === \"\" || (val + \"\") == \"NaN\" || val instanceof RegExp) {\r\n                val = \"\";\r\n            }\r\n            if (val === true || val === false) {\r\n                val = val === true ? \"1\" : \"0\";\r\n            }\r\n            if (toNative) { // convert to string\r\n                val = atob(val + \"\");\r\n            } else { // convert to base64\r\n                val = btoa(val + \"\");\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n        },\r\n\r\n        \"bin_hex\": function (val, allowedValues, toNative) {\r\n            if (val === undefined || val === null || val === \"\" || (val + \"\") == \"NaN\" || val instanceof RegExp) {\r\n                val = \"\";\r\n            }\r\n            if (val === true || val === false) {\r\n                val = val === true ? \"1\" : \"0\";\r\n            }\r\n            if (toNative) { // convert to string\r\n                val = htoa(val + \"\");\r\n            } else { // convert to hex\r\n                val = atoh(val + \"\");\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues(val, allowedValues);\r\n        },\r\n\r\n        \"uri\": function (val, allowedValues, toNative) {\r\n            if (toNative) {\r\n                val = decodeURI(val + \"\");\r\n            }\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['string'](val, allowedValues); // No URI syntax checking\r\n        },\r\n\r\n        \"uuid\": function (val, allowedValues, toNative) {\r\n            return WinJSContrib.UPnP.UPnPService.prototype.types['string'](val, allowedValues); // No UUID syntax checking\r\n        }\r\n\r\n    };\r\n\r\n    // Override .types toString function\r\n    for (var type in WinJSContrib.UPnP.UPnPService.prototype.types) {\r\n        WinJSContrib.UPnP.UPnPService.prototype.types[type]._name = type;\r\n        WinJSContrib.UPnP.UPnPService.prototype.types[type][\"toString\"] = function () { return this._name; };\r\n    }\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.createRequest = function (upnpServiceType, upnpActionName, parameters) {\r\n\r\n        parameters = this.formatParameters(parameters);\r\n\r\n        this.debugLog('Creating UPnP XML Control Message for [' + upnpActionName + '] with parameters:');\r\n        this.debugLog(JSON ? JSON.stringify(parameters) : null);\r\n\r\n        // Build basic part of XML request\r\n        var svcMsg = this.requestTemplate.replace(/\\{ACTION_TYPE\\}/g, encodeXML(trim(upnpServiceType)));\r\n\r\n        svcMsg = svcMsg.replace(/\\{ACTION_NAME\\}/g, encodeXML(trim(upnpActionName)));\r\n\r\n        var svcInParams = parameters['request'],\r\n            svcInParams_xml = \"\";\r\n\r\n        if (svcInParams) {\r\n\r\n            // Generate XML parameters syntax\r\n            for (var svcParam in svcInParams) {\r\n\r\n                // Perform type checking sanitization\r\n                if (svcInParams[svcParam]['type'] !== undefined && svcInParams[svcParam]['type'] !== null) {\r\n\r\n                    // get the primitive sanitization function\r\n                    var typeCheck = this.types[svcInParams[svcParam]['type']];\r\n\r\n                    if (typeCheck) {\r\n                        svcInParams[svcParam]['value'] = typeCheck(svcInParams[svcParam]['value'], svcInParams[svcParam]['allowedValueList'], false);\r\n                    }\r\n\r\n                }\r\n\r\n                if (svcInParams[svcParam]['value'] === null || svcInParams[svcParam]['value'] === undefined) {\r\n\r\n                    svcInParams[svcParam]['value'] = \"\"; // pass through empty value\r\n\r\n                }\r\n\r\n                svcInParams_xml += \"\\t\\t\\t<\" + svcParam + \">\" + encodeXML(trim(svcInParams[svcParam]['value'] + \"\")) + \"</\" + svcParam + \">\\n\";\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Add ACTION_VARS, if any\r\n        svcMsg = svcMsg.replace(/\\{ACTION_VARS\\}/g, svcInParams_xml);\r\n\r\n        // DEBUG\r\n        this.debugLog('[REQUEST] (SOAPAction: ' + upnpServiceType + '#' + upnpActionName + ') ' + svcMsg);\r\n\r\n        return svcMsg;\r\n\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.sendRequest = function (upnpServiceType, upnpActionName, upnpEndpointURL, upnpRequestXML, onUPnPResponse) {\r\n\r\n        var soapaction = '\\\"' + upnpServiceType.replace(/[\\\"\\#]/g, '') + '#' + upnpActionName.replace(/[\\\"\\#]/g, '') + '\\\"'\r\n        var httpClient = new Windows.Web.Http.HttpClient();\r\n        var uri = new Windows.Foundation.Uri(upnpEndpointURL);\r\n        var request = new Windows.Web.Http.HttpRequestMessage(Windows.Web.Http.HttpMethod.post, uri);\r\n        request.headers.append('SOAPACTION', soapaction);\r\n        //request.headers.append('Content-Type', 'text/xml; charset=\"utf-8\";');        \r\n\r\n        request.content = new Windows.Web.Http.HttpStringContent(upnpRequestXML, Windows.Storage.Streams.UnicodeEncoding.utf8, \"text/xml\");\r\n\r\n        httpClient.sendRequestAsync(request).then(function (r) {\r\n            var content = r.content.readAsStringAsync().then(function (text) {\r\n                var xml = parseXML(text);\r\n                var r = {\r\n                    status: 200,\r\n                    responseText: text,\r\n                    responseXML: xml\r\n                };\r\n                onUPnPResponse.apply(this, [null, r]);\r\n            });\r\n\r\n        }, function (err) {\r\n            onUPnPResponse.apply(undefined, [new UPnPError('XmlHttpRequest failed'), null]);\r\n        });\r\n\r\n        return this;\r\n\r\n        try {\r\n\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            xhr.open('POST', upnpEndpointURL);\r\n            xhr.setRequestHeader('Content-Type', 'text/xml; charset=\"utf-8\";');\r\n            xhr.setRequestHeader('action', soapaction);\r\n            xhr.setRequestHeader('zurgl', soapaction);\r\n            xhr.setRequestHeader('SOAPAction', soapaction);\r\n\r\n            xhr.onabort = xhr.onerror = function () {\r\n\r\n                onUPnPResponse.apply(undefined, [new UPnPError('XmlHttpRequest failed'), null]);\r\n\r\n                //xhrManager.release(xhr);\r\n\r\n            };\r\n\r\n            var self = this;\r\n\r\n            xhr.onreadystatechange = function () {\r\n\r\n                if (this.readyState < 4) return;\r\n\r\n                if (this.status !== 200) {\r\n\r\n                    onUPnPResponse.apply(undefined, [new UPnPError('XmlHttpRequest expected 200 OK. Received ' + this.status + ' response.'), null]);\r\n\r\n                    self.debugLog(\"[ERROR-RESPONSE] \" + this.responseText);\r\n\r\n                    //xhrManager.release(xhr);\r\n\r\n                    return;\r\n\r\n                }\r\n\r\n                self.debugLog(\"[SUCCESS-RESPONSE] \" + this.responseText);\r\n\r\n                onUPnPResponse.apply(this, [null, this]);\r\n\r\n                //xhrManager.release(xhr);\r\n\r\n            };\r\n\r\n            xhr.send(upnpRequestXML);\r\n\r\n        } catch (e) {\r\n\r\n            onUPnPResponse.apply(undefined, [new UPnPError(e), null]);\r\n\r\n        }\r\n\r\n        return this; // allow method chaining\r\n\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.handleResponse = function (upnpActionName, upnpResponseXML, parameters, onUPnPResolved) {\r\n\r\n        parameters = this.formatParameters(parameters);\r\n\r\n        var svcOutParams = parameters['response'];\r\n\r\n        var responseJSON = {};\r\n\r\n        // Process all XML response variables\r\n        var responseContainer = upnpResponseXML.getElementsByTagName ?\r\n                                  upnpResponseXML.getElementsByTagName(upnpActionName + \"Response\") : null;\r\n\r\n        // If we don't have any response variables, try again with the namespace attached (required for lib to work in Firefox)\r\n        if (responseContainer === null || responseContainer.length <= 0) {\r\n            responseContainer = upnpResponseXML.getElementsByTagName ?\r\n                                      upnpResponseXML.getElementsByTagName(\"u:\" + upnpActionName + \"Response\") : null;\r\n        }\r\n\r\n        if (responseContainer !== null && responseContainer.length > 0) {\r\n\r\n            var responseVars = responseContainer[0].childNodes;\r\n\r\n            if (responseVars && responseVars.length > 0) {\r\n\r\n                for (var i = 0, l = responseVars.length; i < l; i++) {\r\n\r\n                    var varName = responseVars[i].nodeName;\r\n                    var varVal = responseVars[i].firstChild ? trim(decodeXML(responseVars[i].firstChild.nodeValue + \"\")) : null;\r\n\r\n                    // Perform type checking sanitization if requested\r\n                    if (svcOutParams[varName] && svcOutParams[varName]['type'] !== undefined && svcOutParams[varName]['type'] !== null) {\r\n\r\n                        // get the primitive sanitization function\r\n                        var typeCheck = this.types[svcOutParams[varName]['type']];\r\n\r\n                        if (typeCheck) {\r\n                            varVal = typeCheck(varVal, svcOutParams[varName]['allowedValueList'] || null, true);\r\n                        }\r\n\r\n                    }\r\n\r\n                    responseJSON[varName] = (varVal !== undefined && varVal !== null) ? varVal : \"\";\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Fire callback with the parsed action response data\r\n        onUPnPResolved.apply(undefined, [null, { data: responseJSON }]);\r\n\r\n        return this; // allow method chaining\r\n\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.formatParameter = function (parameter) {\r\n\r\n        var param = {};\r\n\r\n        if (parameter['type'] !== undefined || parameter['value'] !== undefined || parameter['allowedValueList'] !== undefined) {\r\n\r\n            param = parameter;\r\n\r\n            if (parameter['allowedValueList'] !== undefined && typeof parameter['allowedValueList'] !== 'array') {\r\n                parameter['allowedValueList'] = [];\r\n            }\r\n\r\n        } else {\r\n\r\n            param = { value: parameter };\r\n\r\n        }\r\n\r\n        // check type is valid, otherwise discard requested type\r\n        if (param['type'] !== undefined && param['type'] !== null) {\r\n\r\n            if (!this.types[(param['type'] + \"\")]) {\r\n\r\n                delete param['type'];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return param;\r\n\r\n    };\r\n\r\n    // Normalize the input parameters argument\r\n    WinJSContrib.UPnP.UPnPService.prototype.formatParameters = function (parameters) {\r\n\r\n        if (parameters === undefined || parameters === null) {\r\n            parameters = {};\r\n        }\r\n\r\n        if (!parameters['request']) {\r\n            parameters['request'] = {};\r\n        }\r\n\r\n        if (!parameters['response']) {\r\n            parameters['response'] = {};\r\n        }\r\n\r\n        for (var param in parameters) {\r\n\r\n            if (param === 'request' || param === 'response') {\r\n\r\n                for (var processParam in parameters[param]) {\r\n\r\n                    parameters[param][processParam] = this.formatParameter(parameters[param][processParam]);\r\n\r\n                }\r\n\r\n            } else { // append as 'request' parameter and remove from root object\r\n\r\n                parameters['request'][param] = this.formatParameter(parameters[param]);\r\n\r\n                delete parameters[param];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return parameters;\r\n\r\n    };\r\n\r\n    // ALLOWED VALUE LIST CHECKER\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.checkAllowedValues = function (val, allowedValueList) {\r\n\r\n        // Check against allowedValues if provided\r\n        if (val && allowedValueList && Object.prototype.toString.call(allowedValueList) == '[object Array]') {\r\n\r\n            var matchFound = false;\r\n\r\n            for (var i = 0, l = allowedValueList.length; i < l; i++) {\r\n\r\n                if (val == allowedValueList[i]) {\r\n\r\n                    matchFound = true;\r\n                    break;\r\n\r\n                }\r\n            }\r\n\r\n            if (!matchFound) {\r\n                return \"\";\r\n            }\r\n        }\r\n\r\n        return val;\r\n\r\n    };\r\n\r\n    // UPnP DEBUGGER\r\n\r\n    WinJSContrib.UPnP.UPnPService.prototype.debugLog = function (msg, level) {\r\n        if ((this.options && this.options.debug)) {\r\n            console[level || 'log'](\"Plug.UPnP: \" + msg);\r\n        }\r\n    };\r\n\r\n    // UPnP ERROR OBJECT\r\n\r\n    var UPnPError = function (description) {\r\n        return {\r\n            'description': description\r\n        };\r\n    };\r\n\r\n    function parseXML(text) {\r\n        return (new DOMParser()).parseFromString(text, \"text/xml\");\r\n    }\r\n\r\n    // *** CUSTOM TYPE FUNCTIONS ***\r\n\r\n    // BASE64 FUNCTIONS\r\n    // (forked from https://github.com/dankogai/js-base64/blob/master/base64.js)\r\n\r\n    var b64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n    var b64tab = (function (bin) {\r\n        var t = {};\r\n        for (var i = 0, l = bin.length; i < l; i++) t[bin.charAt(i)] = i;\r\n        return t;\r\n    })(b64chars);\r\n\r\n    var cb_encode = function (ccc) {\r\n        var padlen = [0, 2, 1][ccc.length % 3],\r\n            ord = ccc.charCodeAt(0) << 16\r\n                | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)\r\n                | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0)),\r\n            chars = [\r\n                b64chars.charAt(ord >>> 18),\r\n                b64chars.charAt((ord >>> 12) & 63),\r\n                padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\r\n                padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\r\n            ];\r\n        return chars.join('');\r\n    };\r\n\r\n    var cb_decode = function (cccc) {\r\n        var len = cccc.length,\r\n            padlen = len % 4,\r\n            n = (len > 0 ? b64tab[cccc.charAt(0)] << 18 : 0)\r\n              | (len > 1 ? b64tab[cccc.charAt(1)] << 12 : 0)\r\n              | (len > 2 ? b64tab[cccc.charAt(2)] << 6 : 0)\r\n              | (len > 3 ? b64tab[cccc.charAt(3)] : 0),\r\n            chars = [\r\n                String.fromCharCode(n >>> 16),\r\n                String.fromCharCode((n >>> 8) & 0xff),\r\n                String.fromCharCode(n & 0xff)\r\n            ];\r\n        chars.length -= [0, 0, 2, 1][padlen];\r\n        return chars.join('');\r\n    };\r\n\r\n    var btoa = global.btoa || function (b) {\r\n        return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\r\n    };\r\n\r\n    var atob = global.atob || function (a) {\r\n        return a.replace(/[\\s\\S]{1,4}/g, cb_decode);\r\n    };\r\n\r\n    // HEX FUNCTIONS\r\n\r\n    var hexChars = '0123456789abcdef';\r\n\r\n    var hextab = (function (bin) {\r\n        var t = {};\r\n        for (var i = 0, l = bin.length; i < l; i++) t[i] = bin.charAt(i);\r\n        return t;\r\n    })(hexChars);\r\n\r\n    function toHex(n) {\r\n        var result = ''\r\n        var start = true;\r\n        for (var i = 32; i > 0;) {\r\n            i -= 4;\r\n            var digit = (n >> i) & 0xf;\r\n            if (!start || digit != 0) {\r\n                start = false;\r\n                result += hextab[digit];\r\n            }\r\n        }\r\n        return (result == '' ? '0' : result);\r\n    }\r\n\r\n    function pad(str, len, pad) {\r\n        var result = str;\r\n        for (var i = str.length; i < len; i++) {\r\n            result = pad + result;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function ntos(n) {\r\n        n = n.toString(16);\r\n        if (n.length == 1) n = \"0\" + n;\r\n        n = \"%\" + n;\r\n        return unescape(n);\r\n    }\r\n\r\n    function htoa(str) {\r\n        str = str.toUpperCase().replace(new RegExp(\"s/[^0-9A-Z]//g\"));\r\n        var result = \"\";\r\n        var nextchar = \"\";\r\n        for (var i = 0; i < str.length; i++) {\r\n            nextchar += str.charAt(i);\r\n            if (nextchar.length == 2) {\r\n                result += ntos(parseInt(nextchar, 16));\r\n                nextchar = \"\";\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function atoh(str) {\r\n        var result = \"\";\r\n        for (var i = 0; i < str.length; i++) {\r\n            result += pad(toHex(str.charCodeAt(i) & 0xff), 2, '0');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // NUMBER FUNCTIONS\r\n\r\n    function expandExponential(str) {\r\n        return str.replace(/^([+-])?(\\d+).?(\\d*)[eE]([-+]?\\d+)$/, function (x, s, n, f, c) {\r\n            var l = +c < 0, i = n.length + +c, x = (l ? n : f).length,\r\n            c = ((c = Math.abs(c)) >= x ? c - x + l : 0),\r\n            z = (new Array(c + 1)).join(\"0\"), r = n + f;\r\n            return (s || \"\") + (l ? r = z + r : r += z).substr(0, i += l ? z.length : 0) + (i < r.length ? \".\" + r.substr(i) : \"\");\r\n        });\r\n    };\r\n\r\n    // STRING FUNCTIONS\r\n\r\n    var trim = function (str) {\r\n        if (String.prototype.trim) {\r\n            return str.trim();\r\n        } else {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n    };\r\n\r\n    var encodeXML = function (str) {\r\n        return str.replace(/\\&/g, '&amp;')\r\n                   .replace(/</g, '&lt;')\r\n                   .replace(/>/g, '&gt;')\r\n                   .replace(/'/g, '&#39;')\r\n                   .replace(/\"/g, '&quot;');\r\n    };\r\n\r\n    var decodeXML = function (str) {\r\n        return str.replace(/\\&quot;/g, '\"')\r\n                   .replace(/\\&\\#39;/g, '\\'')\r\n                   .replace(/\\&gt;/g, '>')\r\n                   .replace(/\\&lt;/g, '<')\r\n                   .replace(/\\&amp;/g, '&');\r\n    };\r\n\r\n    /**\r\n     * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>\r\n     * © 2011 Colin Snover <http://zetafleet.com>\r\n     * Released under MIT license.\r\n     *\r\n     * 2012 - Modifications to accept times without dates - by Rich Tibbett\r\n     */\r\n\r\n    var parseDate = function (date) {\r\n        var timestamp, struct, minutesOffset = 0, numericKeys = [1, 4, 5, 6, 7, 10, 11];\r\n\r\n        if (typeof date !== 'string') date += \"\";\r\n\r\n        if ((struct = /^((\\d{4}|[+\\-]\\d{6})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:[T\\s]?(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:(Z)|([+\\-])(\\d{4}))?)?$/.exec(date))) {\r\n\r\n            struct = struct.slice(1, struct.length);\r\n\r\n            // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\r\n            for (var i = 0, k; (k = numericKeys[i]) ; ++i) {\r\n                struct[k] = +struct[k] || 0;\r\n            }\r\n\r\n            // allow undefined days and months\r\n            struct[2] = (+struct[2] || 1) - 1;\r\n            struct[3] = +struct[3] || 1;\r\n\r\n            if (struct[8] !== 'Z' && struct[9] !== undefined) {\r\n                minutesOffset = ((struct[10] / 100) - ((struct[10] / 100) % 1)) * 60 + (struct[10] % 100);\r\n\r\n                if (struct[9] === '+') {\r\n                    minutesOffset = 0 - minutesOffset;\r\n                }\r\n            }\r\n\r\n            timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\r\n        }\r\n        else {\r\n            timestamp = Date.parse ? Date.parse(date) : NaN;\r\n        }\r\n\r\n        return timestamp;\r\n    };\r\n\r\n    var allowedContentDirectoryTypes = {\r\n        'urn:schemas-upnp-org:service:ContentDirectory:1': true,\r\n        'urn:schemas-upnp-org:service:ContentDirectory:2': true,\r\n        'urn:schemas-upnp-org:service:ContentDirectory:3': true,\r\n        'urn:schemas-upnp-org:service:ContentDirectory:4': true\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPContentDirectory = function (serviceObj, opts) {\r\n\r\n        WinJSContrib.UPnP.UPnPService.apply(this, [serviceObj, opts]);\r\n\r\n        this.upnpType = serviceObj.serviceType;\r\n        //if (serviceObj.type.indexOf('upnp:') === 0) {\r\n        //    this.upnpType = this.upnpType.replace('upnp:', '');\r\n        //}\r\n\r\n        if (!allowedContentDirectoryTypes[this.upnpType]) {\r\n            console.error(\"Provided service is not a UPnP Media Server Service\");\r\n            return;\r\n        }\r\n\r\n        // *** ContentDirectory:1 methods\r\n\r\n        this.getSystemUpdateId = function (callback) {\r\n\r\n            return this.action('GetSystemUpdateID', {\r\n                request: {},\r\n                response: {\r\n                    Id: {\r\n                        type: this.types.ui4\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getSearchCapabilities = function (callback) {\r\n\r\n            return this.action('GetSearchCapabilities', {\r\n                request: {},\r\n                response: {\r\n                    SearchCaps: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getSortCapabilities = function (callback) {\r\n\r\n            return this.action('GetSortCapabilities', {\r\n                request: {},\r\n                response: {\r\n                    SortCaps: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.browse = function (objectId, browseFlag, filter, startingIndex, requestedCount, sortCriteria, callback) {\r\n\r\n            return this.action('Browse', {\r\n                request: {\r\n                    ObjectID: {\r\n                        value: objectId || '0',\r\n                        type: this.types.string\r\n                    },\r\n                    BrowseFlag: {\r\n                        value: browseFlag || 'BrowseDirectChildren',\r\n                        type: this.types.string\r\n                    },\r\n                    Filter: {\r\n                        value: filter || '*',\r\n                        type: this.types.string\r\n                    },\r\n                    StartingIndex: {\r\n                        value: startingIndex || '0',\r\n                        type: this.types.ui4\r\n                    },\r\n                    RequestedCount: {\r\n                        value: requestedCount || '0',\r\n                        type: this.types.ui4\r\n                    },\r\n                    SortCriteria: {\r\n                        value: sortCriteria,\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    Result: {\r\n                        type: this.types.xmlObj\r\n                    },\r\n                    NumberReturned: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    TotalMatches: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    UpdateID: {\r\n                        type: this.types.ui4\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.search = function (objectId, browseFlag, filter, startingIndex, requestedCount, sortCriteria, callback) {\r\n\r\n            return this.action('Search', {\r\n                request: {\r\n                    ObjectID: {\r\n                        value: objectId || '0',\r\n                        type: this.types.string\r\n                    },\r\n                    BrowseFlag: {\r\n                        value: browseFlag || 'BrowseDirectChildren',\r\n                        type: this.types.string\r\n                    },\r\n                    Filter: {\r\n                        value: filter || '*',\r\n                        type: this.types.string\r\n                    },\r\n                    StartingIndex: {\r\n                        value: startingIndex || '0',\r\n                        type: this.types.ui4\r\n                    },\r\n                    RequestedCount: {\r\n                        value: requestedCount || '0',\r\n                        type: this.types.ui4\r\n                    },\r\n                    SortCriteria: {\r\n                        value: sortCriteria,\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    Result: {\r\n                        type: this.types.xmlObj\r\n                    },\r\n                    NumberReturned: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    TotalMatches: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    UpdateID: {\r\n                        type: this.types.ui4\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n\r\n        // *** ContentDirectory:2 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:ContentDirectory:2') {\r\n\r\n            // TODO: GetFeatureList, GetSortExtensionCapabilities, MoveObject\r\n\r\n        }\r\n\r\n\r\n        // *** ContentDirectory:3 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:ContentDirectory:3') {\r\n\r\n            // TODO\r\n\r\n        }\r\n\r\n        // *** ContentDirectory:4 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:ContentDirectory:4') {\r\n            // TODO\r\n        }\r\n    };\r\n    WinJSContrib.UPnP.UPnPContentDirectory.prototype = Object.create(WinJSContrib.UPnP.UPnPService.prototype);\r\n\r\n    var allowedConnectionManagerTypes = {\r\n        'urn:schemas-upnp-org:service:ConnectionManager:1': true,\r\n        'urn:schemas-upnp-org:service:ConnectionManager:2': true,\r\n        'urn:schemas-upnp-org:service:ConnectionManager:3': true\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPConnectionManager = function (serviceObj, opts) {\r\n\r\n        WinJSContrib.UPnP.UPnPService.apply(this, [serviceObj, opts]);\r\n\r\n        this.upnpType = serviceObj.serviceType;\r\n        //if (serviceObj.type.indexOf('upnp:') === 0) {\r\n        //    this.upnpType = this.upnpType.replace('upnp:', '');\r\n        //}\r\n\r\n        if (!allowedConnectionManagerTypes[this.upnpType]) {\r\n            console.error(\"Provided service is not a UPnP Service\");\r\n            return;\r\n        }\r\n\r\n        // *** ConnectionManager:1 methods\r\n\r\n        this.getCurrentConnectionIDs = function (callback) {\r\n\r\n            return this.action('GetCurrentConnectionIDs', {\r\n                request: {},\r\n                response: {\r\n                    ConnectionIDs: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getCurrentConnectionInfo = function (connectionId, callback) {\r\n\r\n            return this.action('GetCurrentConnectionInfo', {\r\n                request: {\r\n                    ConnectionID: {\r\n                        value: connectionId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    RcsID: {\r\n                        type: this.types.i4\r\n                    },\r\n                    AVTransportID: {\r\n                        type: this.types.i4\r\n                    },\r\n                    ProtocolInfo: {\r\n                        type: this.types.string\r\n                    },\r\n                    PeerConnectionManager: {\r\n                        type: this.types.string\r\n                    },\r\n                    PeerConnectionID: {\r\n                        type: this.types.i4\r\n                    },\r\n                    Direction: {\r\n                        type: this.types.string\r\n                    },\r\n                    Status: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getProtocolInfo = function (callback) {\r\n\r\n            return this.action('GetProtocolInfo', {\r\n                request: {},\r\n                response: {\r\n                    Source: {\r\n                        type: this.types.string\r\n                    },\r\n                    Sink: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        // *** ConnectionManager:2 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:ConnectionManager:2') {\r\n            // TODO\r\n        }\r\n\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPConnectionManager.prototype = Object.create(WinJSContrib.UPnP.UPnPService.prototype);\r\n\r\n    var allowedAVTransportTypes = {\r\n        'urn:schemas-upnp-org:service:AVTransport:1': true,\r\n        'urn:schemas-upnp-org:service:AVTransport:2': true\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPAVTransport = function (serviceObj, opts) {\r\n\r\n        WinJSContrib.UPnP.UPnPService.apply(this, [serviceObj, opts]);\r\n\r\n        this.upnpType = serviceObj.serviceType;\r\n        //if (serviceObj.type.indexOf('upnp:') === 0) {\r\n        //    this.upnpType = this.upnpType.replace('upnp:', '');\r\n        //}\r\n\r\n        if (!allowedAVTransportTypes[this.upnpType]) {\r\n            console.error(\"Provided service is not a UPnP Media Renderer Service\");\r\n            return;\r\n        }\r\n\r\n        // *** AVTransport:1 methods\r\n\r\n        this.getDeviceCapabilities = function (instanceId, callback) {\r\n\r\n            return this.action('GetDeviceCapabilities', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    PlayMedia: {\r\n                        type: this.types.string\r\n                    },\r\n                    RecMedia: {\r\n                        type: this.types.string\r\n                    },\r\n                    RecQualityModes: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getMediaInfo = function (instanceId, callback) {\r\n\r\n            return this.action('GetMediaInfo', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    NrTracks: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    MediaDuration: {\r\n                        type: this.types.string\r\n                    },\r\n                    CurrentURI: {\r\n                        type: this.types.string\r\n                    },\r\n                    CurrentURIMetaData: {\r\n                        type: this.types.string\r\n                    },\r\n                    NextURI: {\r\n                        type: this.types.string\r\n                    },\r\n                    NextURIMetaData: {\r\n                        type: this.types.string\r\n                    },\r\n                    PlayMedium: {\r\n                        type: this.types.string\r\n                    },\r\n                    RecordMedium: {\r\n                        type: this.types.string\r\n                    },\r\n                    WriteStatus: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getPositionInfo = function (instanceId, callback) {\r\n\r\n            return this.action('GetPositionInfo', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    Track: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    TrackDuration: {\r\n                        type: this.types.string\r\n                    },\r\n                    TrackMetaData: {\r\n                        type: this.types.xmlObj\r\n                    },\r\n                    TrackURI: {\r\n                        type: this.types.string\r\n                    },\r\n                    RelTime: {\r\n                        type: this.types.string\r\n                    },\r\n                    AbsTime: {\r\n                        type: this.types.string\r\n                    },\r\n                    RelCount: {\r\n                        type: this.types.i4\r\n                    },\r\n                    AbsCount: {\r\n                        type: this.types.i4\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getTransportInfo = function (instanceId, callback) {\r\n\r\n            return this.action('GetTransportInfo', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentTransportState: {\r\n                        type: this.types.string\r\n                    },\r\n                    CurrentTransportStatus: {\r\n                        type: this.types.string\r\n                    },\r\n                    CurrentSpeed: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getTransportSettings = function (instanceId, callback) {\r\n\r\n            return this.action('GetTransportSettings', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    PlayMode: {\r\n                        type: this.types.ui4\r\n                    },\r\n                    RecQualityMode: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setAVTransportURI = function (instanceId, currentURI, currentURIMetaData, callback) {\r\n\r\n            return this.action('SetAVTransportURI', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    CurrentURI: {\r\n                        value: currentURI,\r\n                        type: this.types.string\r\n                    },\r\n                    CurrentURIMetaData: {\r\n                        value: currentURIMetaData,\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.play = function (instanceId, speed, callback) {\r\n\r\n            return this.action('Play', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Speed: {\r\n                        value: speed || '1',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.pause = function (instanceId, callback) {\r\n\r\n            return this.action('Pause', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.stop = function (instanceId, callback) {\r\n\r\n            return this.action('Stop', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.next = function (instanceId, callback) {\r\n\r\n            return this.action('Next', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.previous = function (instanceId, callback) {\r\n\r\n            return this.action('Previous', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.seek = function (instanceId, unit, target, callback) {\r\n\r\n            return this.action('Seek', {\r\n                request: {\r\n                    InstanceID: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Unit: {\r\n                        value: unit,\r\n                        type: this.types.string\r\n                    },\r\n                    Target: {\r\n                        value: target,\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {}\r\n            }, callback);\r\n\r\n        };\r\n\r\n        // *** AVTransport:2 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:AVTransport:2') {\r\n\r\n            // TODO\r\n\r\n        }\r\n    };\r\n    WinJSContrib.UPnP.UPnPAVTransport.prototype = Object.create(WinJSContrib.UPnP.UPnPService.prototype);\r\n\r\n    var allowedRenderingControlTypes = {\r\n        'urn:schemas-upnp-org:service:RenderingControl:1': true,\r\n        'urn:schemas-upnp-org:service:RenderingControl:2': true,\r\n        'urn:schemas-upnp-org:service:RenderingControl:3': true\r\n    };\r\n\r\n    WinJSContrib.UPnP.UPnPRenderingControl = function (serviceObj, opts) {\r\n\r\n        WinJSContrib.UPnP.UPnPService.apply(this, [serviceObj, opts]);\r\n\r\n        this.upnpType = serviceObj.serviceType;\r\n        //if (serviceObj.type.indexOf('upnp:') === 0) {\r\n        //    this.upnpType = this.upnpType.replace('upnp:', '');\r\n        //}\r\n\r\n        if (!allowedRenderingControlTypes[this.upnpType]) {\r\n            console.error(\"Provided service is not a UPnP Media Renderer Service\");\r\n            return;\r\n        }\r\n\r\n        // *** RenderingControl:1 methods\r\n\r\n        this.listPresets = function (instanceId, callback) {\r\n\r\n            return this.action('ListPresets', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentPresetNameList: {\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.selectPreset = function (instanceId, presetName, callback) {\r\n\r\n            return this.action('SelectPreset', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    PresetName: {\r\n                        value: presetName || \"FactoryDefaults\",\r\n                        type: this.types.string\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getBrightness = function (instanceId, callback) {\r\n\r\n            return this.action('GetBrightness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentBrightness: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setBrightness = function (instanceId, desiredBrightness, callback) {\r\n\r\n            return this.action('SetBrightness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredBrightness: {\r\n                        value: desiredBrightness,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getContrast = function (instanceId, callback) {\r\n\r\n            return this.action('GetContrast', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentContrast: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setContrast = function (instanceId, desiredContrast, callback) {\r\n\r\n            return this.action('SetContrast', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredContrast: {\r\n                        value: desiredContrast,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getSharpness = function (instanceId, callback) {\r\n\r\n            return this.action('GetSharpness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentSharpness: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setSharpness = function (instanceId, desiredSharpness, callback) {\r\n\r\n            return this.action('SetSharpness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredSharpness: {\r\n                        value: desiredSharpness,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getRedVideoGain = function (instanceId, callback) {\r\n\r\n            return this.action('GetRedVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentRedVideoGain: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setRedVideoGain = function (instanceId, desiredRedVideoGain, callback) {\r\n\r\n            return this.action('SetRedVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredRedVideoGain: {\r\n                        value: desiredRedVideoGain,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getGreenVideoGain = function (instanceId, callback) {\r\n\r\n            return this.action('GetGreenVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentGreenVideoGain: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setGreenVideoGain = function (instanceId, desiredGreenVideoGain, callback) {\r\n\r\n            return this.action('SetGreenVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredGreenVideoGain: {\r\n                        value: desiredGreenVideoGain,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getBlueVideoGain = function (instanceId, callback) {\r\n\r\n            return this.action('GetBlueVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentBlueVideoGain: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setBlueVideoGain = function (instanceId, desiredBlueVideoGain, callback) {\r\n\r\n            return this.action('SetBlueVideoGain', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredBlueVideoGain: {\r\n                        value: desiredBlueVideoGain,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getRedVideoBlackLevel = function (instanceId, callback) {\r\n\r\n            return this.action('GetRedVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentRedVideoBlackLevel: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setRedVideoBlackLevel = function (instanceId, desiredRedVideoBlackLevel, callback) {\r\n\r\n            return this.action('SetRedVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredRedVideoBlackLevel: {\r\n                        value: desiredRedVideoBlackLevel,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getGreenVideoBlackLevel = function (instanceId, callback) {\r\n\r\n            return this.action('GetGreenVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentGreenVideoBlackLevel: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setGreenVideoBlackLevel = function (instanceId, desiredGreenVideoBlackLevel, callback) {\r\n\r\n            return this.action('SetGreenVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredGreenVideoBlackLevel: {\r\n                        value: desiredGreenVideoBlackLevel,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getBlueVideoBlackLevel = function (instanceId, callback) {\r\n\r\n            return this.action('GetBlueVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentBlueVideoBlackLevel: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setBlueVideoBlackLevel = function (instanceId, desiredBlueVideoBlackLevel, callback) {\r\n\r\n            return this.action('SetBlueVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredBlueVideoBlackLevel: {\r\n                        value: desiredBlueVideoBlackLevel,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getBlueVideoBlackLevel = function (instanceId, callback) {\r\n\r\n            return this.action('GetBlueVideoBlackLevel', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentBlueVideoBlackLevel: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getColorTemperature = function (instanceId, callback) {\r\n\r\n            return this.action('GetColorTemperature', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentColorTemperature: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setColorTemperature = function (instanceId, desiredColorTemperature, callback) {\r\n\r\n            return this.action('SetColorTemperature', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredColorTemperature: {\r\n                        value: desiredColorTemperature,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getHorizontalKeystone = function (instanceId, callback) {\r\n\r\n            return this.action('GetHorizontalKeystone', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentHorizontalKeystone: {\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setHorizontalKeystone = function (instanceId, desiredHorizontalKeystone, callback) {\r\n\r\n            return this.action('SetHorizontalKeystone', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredHorizontalKeystone: {\r\n                        value: desiredHorizontalKeystone,\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getVerticalKeystone = function (instanceId, callback) {\r\n\r\n            return this.action('GetVerticalKeystone', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentVerticalKeystone: {\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setVerticalKeystone = function (instanceId, desiredVerticalKeystone, callback) {\r\n\r\n            return this.action('SetVerticalKeystone', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    DesiredVerticalKeystone: {\r\n                        value: desiredVerticalKeystone,\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getMute = function (instanceId, channel, callback) {\r\n\r\n            return this.action('GetMute', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentMute: {\r\n                        type: this.types.boolean\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setMute = function (instanceId, channel, desiredMute, callback) {\r\n\r\n            return this.action('SetMute', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    },\r\n                    DesiredMute: {\r\n                        value: desiredMute,\r\n                        type: this.types.boolean\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getVolume = function (instanceId, channel, callback) {\r\n\r\n            return this.action('GetVolume', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentVolume: {\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setVolume = function (instanceId, channel, desiredVolume, callback) {\r\n\r\n            return this.action('SetVolume', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    },\r\n                    DesiredVolume: {\r\n                        value: desiredVolume,\r\n                        type: this.types.ui2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getVolumeDB = function (instanceId, channel, callback) {\r\n\r\n            return this.action('GetVolumeDB', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentVolume: {\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setVolumeDB = function (instanceId, channel, desiredVolume, callback) {\r\n\r\n            return this.action('SetVolumeDB', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    },\r\n                    DesiredVolume: {\r\n                        value: desiredVolume,\r\n                        type: this.types.i2\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getVolumeDBRange = function (instanceId, channel, callback) {\r\n\r\n            return this.action('GetVolumeDBRange', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    MinValue: {\r\n                        type: this.types.i2\r\n                    },\r\n                    MaxValue: {\r\n                        type: this.types.i2\r\n                    },\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.getLoudness = function (instanceId, channel, callback) {\r\n\r\n            return this.action('GetLoudness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    }\r\n                },\r\n                response: {\r\n                    CurrentLoudness: {\r\n                        type: this.types.boolean\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        this.setLoudness = function (instanceId, channel, desiredLoudness, callback) {\r\n\r\n            return this.action('SetLoudness', {\r\n                request: {\r\n                    InstanceId: {\r\n                        value: instanceId,\r\n                        type: this.types.ui4\r\n                    },\r\n                    Channel: {\r\n                        value: channel || 'Master',\r\n                        type: this.types.string\r\n                    },\r\n                    DesiredLoudness: {\r\n                        value: desiredLoudness,\r\n                        type: this.types.boolean\r\n                    }\r\n                }\r\n            }, callback);\r\n\r\n        };\r\n\r\n        // *** RenderingControl:2 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:RenderingControl:2' ||\r\n              this.upnpType === 'urn:schemas-upnp-org:service:RenderingControl:3') {\r\n\r\n            this.getStateVariables = function (instanceId, stateVariableList, callback) {\r\n\r\n                return this.action('GetStateVariables', {\r\n                    request: {\r\n                        InstanceId: {\r\n                            value: instanceId,\r\n                            type: this.types.ui4\r\n                        },\r\n                        StateVariableList: {\r\n                            value: stateVariableList,\r\n                            type: this.types.string\r\n                        }\r\n                    },\r\n                    response: {\r\n                        StateVariableValuePairs: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.setStateVariables = function (instanceId, renderingControlUDN, serviceType, serviceId, stateVariableValuePairs, callback) {\r\n\r\n                return this.action('SetStateVariables', {\r\n                    request: {\r\n                        InstanceId: {\r\n                            value: instanceId,\r\n                            type: this.types.ui4\r\n                        },\r\n                        RenderingControlUDN: {\r\n                            value: renderingControlUDN,\r\n                            type: this.types.string\r\n                        },\r\n                        ServiceType: {\r\n                            value: serviceType,\r\n                            type: this.types.string\r\n                        },\r\n                        ServiceId: {\r\n                            value: serviceId,\r\n                            type: this.types.string\r\n                        },\r\n                        StateVariableValuePairs: {\r\n                            value: stateVariableValuePairs,\r\n                            type: this.types.string\r\n                        }\r\n                    },\r\n                    response: {\r\n                        StateVariableList: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n        }\r\n\r\n        // *** RenderingControl:3 methods\r\n\r\n        if (this.upnpType === 'urn:schemas-upnp-org:service:RenderingControl:3') {\r\n\r\n            this.getAllowedTransforms = function (instanceId, callback) {\r\n\r\n                return this.action('GetAllowedTransforms', {\r\n                    request: {\r\n                        InstanceId: {\r\n                            value: instanceId,\r\n                            type: this.types.ui4\r\n                        }\r\n                    },\r\n                    response: {\r\n                        CurrentAllowedTransformSettings: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.getTransforms = function (instanceId, callback) {\r\n\r\n                return this.action('GetTransforms', {\r\n                    request: {\r\n                        InstanceId: {\r\n                            value: instanceId,\r\n                            type: this.types.ui4\r\n                        }\r\n                    },\r\n                    response: {\r\n                        CurrentTransformValues: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.setTransforms = function (instanceId, desiredTransformValues, callback) {\r\n\r\n                return this.action('SetTransforms', {\r\n                    request: {\r\n                        InstanceId: {\r\n                            value: instanceId,\r\n                            type: this.types.ui4\r\n                        },\r\n                        DesiredTransformValues: {\r\n                            value: desiredTransformValues,\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.getAllAvailableTransforms = function (instanceId, callback) {\r\n\r\n                return this.action('GetAllAvailableTransforms', {\r\n                    response: {\r\n                        AllAllowedTransformSettings: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.getAllowedDefaultTransforms = function (instanceId, callback) {\r\n\r\n                return this.action('GetAllowedDefaultTransforms', {\r\n                    response: {\r\n                        AllowedDefaultTransformSettings: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.getDefaultTransforms = function (instanceId, callback) {\r\n\r\n                return this.action('GetDefaultTransforms', {\r\n                    response: {\r\n                        CurrentDefaultTransformSettings: {\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n            this.setDefaultTransforms = function (instanceId, desiredDefaultTransformSettings, callback) {\r\n\r\n                return this.action('SetDefaultTransforms', {\r\n                    request: {\r\n                        DesiredDefaultTransformSettings: {\r\n                            value: desiredDefaultTransformSettings,\r\n                            type: this.types.string\r\n                        }\r\n                    }\r\n                }, callback);\r\n\r\n            };\r\n\r\n        }\r\n\r\n    };\r\n    WinJSContrib.UPnP.UPnPRenderingControl.prototype = Object.create(WinJSContrib.UPnP.UPnPService.prototype);\r\n\r\n})(window);","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib;\r\n(function (WinJSContrib) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Custom WinJS Bindings\r\n     * @namespace WinJSContrib.Bindings\r\n     */\r\n    (function (Bindings) {\r\n\r\n        /**\r\n         * path for default picture\r\n         */\r\n        WinJSContrib.Bindings.pictureUnavailable = '/images/unavailable.png';\r\n\r\n        /**\r\n         * Helper for reading arguments for an element\r\n         * @param {HTMLElement} element\r\n         * @param {string} argument name\r\n         */\r\n        WinJSContrib.Bindings.bindingArguments = function bindingArguments(elt, argname) {\r\n            var data;\r\n            if (WinJS.UI._optionsParser) {\r\n                var text = elt.getAttribute(\"data-win-bind-args\");\r\n                if (text) {\r\n                    data = WinJS.UI.optionsParser(text, window);\r\n                }\r\n            } else {\r\n                data = elt.dataset.winBindArgs;\r\n            }\r\n\r\n            if (data) {\r\n                if (argname) {\r\n                    return data[argname];\r\n                } else {\r\n                    return data;\r\n                }\r\n            }\r\n        };\r\n        var bindingArguments = WinJSContrib.Bindings.bindingArguments;\r\n\r\n        /**\r\n         * Binding function to remove HTML from data and add it to destination\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.removeHTML = WinJS.Binding.initializer(function (source, sourceProperty, dest, destProperty) {\r\n            var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            var elt = document.createElement('DIV');\r\n            elt.innerHTML = data;\r\n            WinJS.Binding.oneTime({ value: elt.innerText }, ['value'], dest, [destProperty]);\r\n        });\r\n\r\n        /**\r\n         * Binding function to remove HTML from data and add it to destination with an ellipse after X characters. The number of characters is specified with \"ellipsisize\" argument\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.removeHTMLAndEllipsisize = WinJS.Binding.initializer(function (source, sourceProperty, dest, destProperty) {\r\n            var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            var elt = document.createElement('DIV');\r\n            elt.innerHTML = data;\r\n            var textRes = elt.innerText;\r\n            var size = bindingArguments(dest, 'ellipsisize');\r\n\r\n            if (size)\r\n                textRes = toStaticHTML(WinJSContrib.Utils.ellipsisizeString(elt.innerText, size, true));\r\n            WinJS.Binding.oneTime({ value: textRes }, ['value'], dest, [destProperty]);\r\n        });\r\n\r\n        /**\r\n         * Binding function to remove HTML from data and add it to destination with an ellipse after X characters. The number of characters is specified with \"ellipsisize\" argument\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.staticHTML = WinJS.Binding.initializer(function (source, sourceProperty, dest, destProperty) {\r\n            var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            dest[destProperty] = toStaticHTML(data);\r\n        });\r\n\r\n        /**\r\n         * Binding function to add a data-* attribute to the element. Use the destination name to specifiy attribute name\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         * @example\r\n         * //assuming object is { myproperty: 42 }\r\n         * <div data-win-bind=\"foo : myproperty WinJSContrib.Bindings.dataAttr\"></div>\r\n         * //will result to\r\n         * <div data-foo=\"42\" data-win-bind=\"foo : myproperty WinJSContrib.Bindings.dataAttr\"></div>\r\n         */\r\n        WinJSContrib.Bindings.dataAttr = WinJS.Binding.initializer(function dataAttrBinding(source, sourceProperty, dest, destProperty) {\r\n        \tvar data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n        \tdest.setAttribute('data-' + destProperty, data)\r\n        });\r\n\r\n        /**\r\n         * Binding function to add css class named after object property. You could format class by using a \"format\" argument\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.addClass = WinJS.Binding.initializer(function addClassBinding(source, sourceProperty, dest, destProperty) {\r\n            function setClass(newval, oldval) {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                var formatParameter = bindingArguments(dest, 'format');\r\n                if (formatParameter) {\r\n                    dest.classList.remove(formatParameter.format(oldval));\r\n                    dest.classList.add(formatParameter.format(data));\r\n                }\r\n                else {\r\n                    dest.classList.remove(oldval);\r\n                    dest.classList.add(data);\r\n                }\r\n            }\r\n\r\n            var bindingDesc = {};\r\n            bindingDesc[sourceProperty] = setClass;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * add css class based on a prefix defined with destProperty and the value from the source object\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.asClass = WinJS.Binding.initializer(function asClassBinding(source, sourceProperty, dest, destProperty) {\r\n            function setClass(newval, oldval) {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                dest.classList.remove(destProperty + '-' + oldval);\r\n                dest.classList.add(destProperty + '-' + data);\r\n            }\r\n            var bindingDesc = {};\r\n            bindingDesc[sourceProperty] = setClass;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * add css class based on truthy/falsy value from the source object\r\n         * css class has to be precised through data-win-bind-args='{\"className\": \"\"}' attribute\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.showClassIf = WinJS.Binding.initializer(function showClassIfBinding(source, sourceProperty, dest, destProperty) {\r\n            function setClass(newval, oldval) {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                var className = bindingArguments(dest, 'className');\r\n                dest.classList.remove(className);\r\n                if (data)\r\n                    dest.classList.add(className);\r\n            }\r\n            var bindingDesc = {};\r\n            bindingDesc[sourceProperty] = setClass;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * convert a url string for use as a background image url\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.toBgImage = WinJS.Binding.initializer(function toBgImageBinding(source, sourceProperty, dest, destProperty) {\r\n            function setImage() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data || !data.length) {\r\n                    dest.style.backgroundImage = '';\r\n                    return;\r\n                }\r\n                dest.style.backgroundImage = 'url(\"' + data + '\")';\r\n            }\r\n\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setImage;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n\r\n        WinJSContrib.Bindings.ToRealDate = WinJS.Binding.initializer(function ToRealDateBinding(source, sourceProperty, dest, destProperty) {\r\n            var date = new Date(source.date * 1000);\r\n            dest.innerHTML = date.toLocaleDateString();\r\n        });\r\n\r\n        function _setPic(dest, url) {\r\n            if (dest.nodeName.toLowerCase() == 'img') {\r\n                dest.src = url;\r\n            }\r\n            else {\r\n                dest.style.backgroundImage = 'url(\"' + url + '\")';\r\n            }\r\n            dest.classList.add('imageLoaded');\r\n        }\r\n\r\n        /**\r\n         * Asynchronously load a picture (using src for image tag and background-image for other elements) from url path, and add 'imageLoaded' css class once picture is ready. \r\n         * You could rely on '.imageLoaded' to add transitions for image loading\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.picture = WinJS.Binding.initializer(function toSmartBgImageBinding(source, sourceProperty, dest, destProperty) {\r\n            function setImage() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data || !data.length) {\r\n                    data = Bindings.pictureUnavailable;\r\n                }\r\n\r\n                dest.classList.remove('imageLoaded');\r\n                setTimeout(function () {\r\n                    WinJSContrib.UI.loadImage(data).done(function () {\r\n                        _setPic(dest, data);\r\n                    }, function () {\r\n                        _setPic(dest, Bindings.pictureUnavailable);\r\n                        WinJS.Utilities.addClass(dest, 'imageLoaded');\r\n                    });\r\n                }, 200);\r\n            }\r\n\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setImage;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n        WinJSContrib.Bindings.toSmartBgImage = WinJSContrib.Bindings.picture; //deprecated method name\r\n\r\n        /**\r\n         * show element if property is filled or true. The dest property can be used to choose what to use for showing/hiding object (opacity, visibility, or display)\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.showIf = WinJS.Binding.initializer(function hideUndefined(source, sourceProperty, dest, destProperty) {\r\n            function setVisibility() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data) {\r\n                    dest.classList.remove('mcn-show');\r\n                    dest.classList.add('mcn-hide');\r\n                    if (destProperty[0] === 'opacity' || destProperty[1] === 'opacity') {\r\n                        dest.style.opacity = '0';\r\n                    } else if (destProperty[0] === 'visibility' || destProperty[1] === 'visibility') {\r\n                        dest.style.visibility = 'hidden';\r\n                    } else {\r\n                        dest.style.display = 'none';\r\n                    }\r\n                } else {\r\n                    dest.classList.remove('mcn-hide');\r\n                    dest.classList.add('mcn-show');\r\n                    if (destProperty[0] === 'opacity' || destProperty[1] === 'opacity') {\r\n                        dest.style.opacity = '';\r\n                    } else if (destProperty[0] === 'visibility' || destProperty[1] === 'visibility') {\r\n                        dest.style.visibility = '';\r\n                    } else {\r\n                        dest.style.display = '';\r\n                    }\r\n                }\r\n            }\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setVisibility;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * Alias for {@link WinJSContrib.Bindings.showIf}, just for semantic purpose\r\n         * @function\r\n         * @see WinJSContrib.Bindings.showIf\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.hideIfNot = WinJSContrib.Bindings.showIf;\r\n        WinJSContrib.Bindings.hideIfNotDefined = WinJSContrib.Bindings.showIf;//warning, deprecated\r\n\r\n        /**\r\n         * hide element if property is filled or true. The dest property can be used to choose what to use for showing/hiding object (opacity, visibility, or display)\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.hideIf = WinJS.Binding.initializer(function showUndefined(source, sourceProperty, dest, destProperty) {\r\n            function setVisibility() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data) {\r\n                    dest.classList.remove('mcn-hide');\r\n                    dest.classList.add('mcn-show');\r\n                    if (destProperty[0] === 'opacity' || destProperty[1] === 'opacity') {\r\n                        dest.style.opacity = '';\r\n                    } else if (destProperty[0] === 'visibility' || destProperty[1] === 'visibility') {\r\n                        dest.style.visibility = '';\r\n                    } else {\r\n                        dest.style.display = '';\r\n                    }\r\n                } else {\r\n                    dest.classList.remove('mcn-show');\r\n                    dest.classList.add('mcn-hide');\r\n                    if (destProperty[0] === 'opacity' || destProperty[1] === 'opacity') {\r\n                        dest.style.opacity = '0';\r\n                    } else if (destProperty[0] === 'visibility' || destProperty[1] === 'visibility') {\r\n                        dest.style.visibility = 'hidden';\r\n                    } else {\r\n                        dest.style.display = 'none';\r\n                    }\r\n                }\r\n            }\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setVisibility;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * Alias for {@link WinJSContrib.Bindings.hideIf}, just for semantic purpose\r\n         * @function\r\n         * @see WinJSContrib.Bindings.hideIf\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.showIfNot = WinJSContrib.Bindings.hideIf; //warning, deprecated\r\n\r\n        WinJSContrib.Bindings.showIfNotDefined = WinJSContrib.Bindings.hideIf; //warning, deprecated\r\n\r\n        /**\r\n         * enable element if property is filled or true\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.enableIf = WinJS.Binding.initializer(function disableUndefined(source, sourceProperty, dest, destProperty) {\r\n            function setVisibility() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data) {\r\n                    dest.disabled = true;\r\n                } else {\r\n                    dest.disabled = false;\r\n                }\r\n            }\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setVisibility;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n        WinJSContrib.Bindings.disableIfNot = WinJSContrib.Bindings.enableIf;\r\n\r\n        /**\r\n         * disable element if property is filled or true\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.disableIf = WinJS.Binding.initializer(function enableUndefined(source, sourceProperty, dest, destProperty) {\r\n            function setVisibility() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data) {\r\n                    dest.disabled = false;\r\n                } else {\r\n                    dest.disabled = true;\r\n                }\r\n            }\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setVisibility;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n        WinJSContrib.Bindings.enableIfNot = WinJSContrib.Bindings.disableIf;\r\n\r\n        /**\r\n         * apply a percent number as width (in percent) on the element\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.toWidth = WinJS.Binding.initializer(function progressToWidth(source, sourceProperty, dest, destProperty) {\r\n            function setWidth() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (!data) {\r\n                    dest.style.width = '';\r\n                } else {\r\n                    dest.style.width = data + '%';\r\n                }\r\n            }\r\n            var bindingDesc = {\r\n            };\r\n            bindingDesc[sourceProperty] = setWidth;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * truncate a string and add ellipse to the text if string is longer than a limit. The max size of text is determined by a 'ellipsisize' argument\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         * @example {@lang xml}\r\n         * <p data-win-bind=\"innerText : someLongText WinJSContrib.Bindings.ellipsisize\" data-win-bind-args='{ \"ellipsisize\" : 50}'></p>\r\n         */\r\n        WinJSContrib.Bindings.ellipsisize = WinJS.Binding.initializer(function toEllipsisizedBinding(source, sourceProperty, dest, destProperty) {\r\n            var sourcedata = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            var size = bindingArguments(dest, 'ellipsisize');\r\n            dest[destProperty] = toStaticHTML(WinJSContrib.Utils.ellipsisizeString(sourcedata, size, true));\r\n        });\r\n        WinJSContrib.Bindings.toEllipsisized = WinJSContrib.Bindings.ellipsisize; //deprecated name\r\n\r\n        WinJSContrib.Bindings.emptyIfNull = WinJS.Binding.initializer(function emptyIfNull(source, sourceProperty, dest, destProperty) {\r\n            var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            if (typeof data === \"undefined\" || data === null) {\r\n                dest[destProperty] = \"\";\r\n            } else {\r\n                dest[destProperty] = data;\r\n            }\r\n        });\r\n\r\n\r\n        /**\r\n         * Two way binding triggered by \"change\" event on inputs\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.twoWayOnChange = WinJS.Binding.initializer(function twoWayOnChangeBinding(source, sourceProperty, dest, destProperty) {\r\n            function setVal() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                WinJSContrib.Utils.writeProperty(dest, destProperty, data || '');\r\n            }\r\n\r\n            function getVal() {\r\n                var val = WinJSContrib.Utils.getProperty(dest, destProperty);\r\n                WinJSContrib.Utils.writeProperty(source, sourceProperty, val.propValue);\r\n            }\r\n\r\n            dest.addEventListener('change', getVal, false);\r\n            if (!dest.winControl) {\r\n                dest.classList.add('win-disposable');\r\n                dest.winControl = {\r\n                    dispose: function () {\r\n                        dest.removeEventListener('change', getVal);\r\n                    }\r\n                };\r\n            }\r\n\r\n            var bindingDesc = {\r\n            };\r\n\r\n            bindingDesc[sourceProperty] = setVal;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        });\r\n\r\n        /**\r\n         * Add tap by looking for a function in parent scope control, and add binded item to tap callback\r\n         * @function\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        WinJSContrib.Bindings.itemTap = WinJS.Binding.initializer(function twoWayOnChangeBinding(source, sourceProperty, dest, destProperty) {\r\n            //defer tap binding to let element being appended to DOM\r\n            setImmediate(function () {\r\n                var scope = WinJSContrib.Utils.getScopeControl(dest);\r\n                if (scope) {\r\n                    var tapCallback = WinJSContrib.Utils.readProperty(scope, destProperty);\r\n                    var lockpointer = dest.hasAttribute(\"lockpointer\");\r\n                    if (tapCallback && typeof tapCallback == \"function\") {\r\n                        WinJSContrib.UI.tap(dest, function (arg) {\r\n                            var item = WinJSContrib.Utils.readProperty(source, sourceProperty);                            \r\n                            tapCallback.call(scope, { target : arg, detail: { element: arg, item: item } });\r\n                        }, { lock: lockpointer });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        /** \r\n         * cleans up a binding list by returning its items as non-observable \r\n         * @function \r\n         * @param {Object[]} bindingList binding list to clean up \r\n         * @returns {Object[]} array containing the cleaned up items \r\n         */\r\n        Bindings.cleanUpBindingList = function (bindingList) {\r\n            var result = [];\r\n\r\n            bindingList.forEach(function (item) {\r\n                var unwrappedItem = WinJS.Binding.unwrap(item);\r\n                result.push(unwrappedItem);\r\n            });\r\n\r\n            return result;\r\n        };\r\n\r\n\r\n    })(WinJSContrib.Bindings || (WinJSContrib.Bindings = {}));\r\n    var Bindings = WinJSContrib.Bindings;\r\n})(WinJSContrib || (WinJSContrib = {}));\r\n","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/// <reference path=\"WinJSContrib.binding.utils.js\" />\r\n/// <reference path=\"moment.min.js\" />\r\n\r\nvar WinJSContrib;\r\nWinJSContrib.Utils = WinJSContrib.Utils || {};\r\nWinJSContrib.Bindings = WinJSContrib.Bindings || {};\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    /** \r\n     * format date using binding argument 'formatDate'\r\n     * @function\r\n     * @param {Object} source object owning data\r\n     * @param {string[]} sourceProperty path to object data\r\n     * @param {HTMLElement} dest DOM element targeted by binding\r\n     * @param {string[]} destProperty path to DOM element property targeted by binding\r\n     */\r\n    WinJSContrib.Bindings.formatDate = WinJS.Utilities.markSupportedForProcessing(function formatDateBinding(source, sourceProperty, dest, destProperty) {\r\n        function setDate() {\r\n            var sourcedata = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            if (!sourcedata) {\r\n                dest.innerText = '';\r\n            } else {\r\n                var arg = WinJSContrib.Bindings.bindingArguments(dest, 'formatDate') || 'L';\r\n                dest.innerText = moment(sourcedata).format(arg);\r\n            }\r\n        }\r\n\r\n        var bindingDesc = {\r\n        };\r\n        bindingDesc[sourceProperty] = setDate;\r\n        return WinJS.Binding.bind(source, bindingDesc);\r\n    });\r\n\r\n    /** \r\n     * format date using calendar function\r\n     * @function\r\n     * @param {Object} source object owning data\r\n     * @param {string[]} sourceProperty path to object data\r\n     * @param {HTMLElement} dest DOM element targeted by binding\r\n     * @param {string[]} destProperty path to DOM element property targeted by binding\r\n     */\r\n    WinJSContrib.Bindings.calendar = WinJS.Utilities.markSupportedForProcessing(function formatDateBinding(source, sourceProperty, dest, destProperty) {\r\n        function setDate() {\r\n            var sourcedata = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            if (!sourcedata) {\r\n                dest.innerText = '';\r\n            } else {\r\n                dest.innerText = moment(sourcedata).calendar();\r\n            }\r\n        }\r\n\r\n        var bindingDesc = {\r\n        };\r\n        bindingDesc[sourceProperty] = setDate;\r\n        return WinJS.Binding.bind(source, bindingDesc);\r\n    });\r\n\r\n    function daysSince(m, d, y) {\r\n        if (d == '' || m == '' || y == '') {\r\n            //alert(\"All fields must be entered\");\r\n            return;\r\n        }\r\n\r\n        if (isNaN(m) || isNaN(y) || isNaN(d)) {\r\n            //alert(\"Only numbers .\");\r\n            return;\r\n        }\r\n\r\n        var myDate = new Date();\r\n        var yourDate = new Date(y, m - 1, d);\r\n\r\n        var secondsInADay = 1000 * 60 * 60 * 24;\r\n        var diff = Math.floor((myDate.getTime() - yourDate.getTime()) / secondsInADay);\r\n        return diff;\r\n    }\r\n\r\n\r\n    /**\r\n     * display number of days since a date\r\n     * @function\r\n     * @param {Object} source object owning data\r\n     * @param {string[]} sourceProperty path to object data\r\n     * @param {HTMLElement} dest DOM element targeted by binding\r\n     * @param {string[]} destProperty path to DOM element property targeted by binding\r\n     */\r\n    WinJSContrib.Bindings.daysSinceDate = WinJS.Utilities.markSupportedForProcessing(function daysSinceDateBinding(source, sourceProperty, dest, destProperty) {\r\n        function setDate() {\r\n            var sourcedata = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            if (!sourcedata) {\r\n                dest.innerText = '';\r\n            } else {\r\n                sourcedata = new Date(sourcedata);\r\n                var m = sourcedata.getMonth() + 1, d = sourcedata.getDate(), y = sourcedata.getFullYear();\r\n                var fromdate = daysSince(m, d, y);\r\n                dest.innerText = fromdate;\r\n            }\r\n        }\r\n\r\n        var bindingDesc = {\r\n        };\r\n        bindingDesc[sourceProperty] = setDate;\r\n        return WinJS.Binding.bind(source, bindingDesc);\r\n    });\r\n\r\n    /**\r\n     * apply moment.js humanize formatting on a date. Use 'humanizeFormat' and 'addSuffix' arguments to configure binding\r\n     * @function\r\n     * @param {Object} source object owning data\r\n     * @param {string[]} sourceProperty path to object data\r\n     * @param {HTMLElement} dest DOM element targeted by binding\r\n     * @param {string[]} destProperty path to DOM element property targeted by binding\r\n     */\r\n    WinJSContrib.Bindings.humanizeDate = WinJS.Utilities.markSupportedForProcessing(function humanizeDate(source, sourceProperty, dest, destProperty) {\r\n        function setDate() {\r\n            var sourcedata = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n            if (!sourcedata) {\r\n                dest.innerText = '';\r\n            } else {\r\n                var arg = WinJSContrib.Bindings.bindingArguments(dest, \"humanizeFormat\"),\r\n                    addSuffix = WinJSContrib.Bindings.bindingArguments(dest, \"addSuffix\");\r\n                dest.innerText = moment.duration(sourcedata, arg).humanize(addSuffix);\r\n            }\r\n        }\r\n\r\n        var bindingDesc = {\r\n        };\r\n        bindingDesc[sourceProperty] = setDate;\r\n        return WinJS.Binding.bind(source, bindingDesc);\r\n    });\r\n\r\n\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib = WinJSContrib || {};\r\n\r\n(function () {\r\n\r\n    function Messenger(receiver, sender) {\r\n        var messenger = this;\r\n        messenger.isWorker = receiver.document === undefined;\r\n        messenger._pendings = {};\r\n        messenger._receiver = receiver;\r\n        messenger._sender = sender || receiver;\r\n        messenger._bindedProcessEvent = messenger._processEvent.bind(messenger);\r\n\r\n        if (messenger._receiver)\r\n            messenger._receiver.addEventListener('message', messenger._bindedProcessEvent);\r\n    };\r\n\r\n    /**\r\n     * @classdesc\r\n     * Wrapper for messaging between main code and iframe or web worker. All returns are wrapped as WinJS.Promise to enable asynchronous scenarios     \r\n     * @class\r\n     * @param {DOMElement} receiver element that will receive messages\r\n     * @param {DOMElement} sender element that will send messages\r\n     */\r\n    WinJSContrib.Messenger = WinJS.Class.mix(Messenger, WinJS.Utilities.eventMixin);\r\n\r\n    /**\r\n     * default path for smart worker js file\r\n     */\r\n    WinJSContrib.Messenger.SmartWorkerPath = '/scripts/winjscontrib/winjscontrib.messenger.worker.js';\r\n\r\n    /**\r\n     * @classdesc\r\n     * Wrapper for {@link WinJSContrib.Messenger} when using it with a webworker\r\n     * @class\r\n     * @param {string} [path] path to web worker file\r\n     */\r\n    WinJSContrib.Messenger.SmartWorker = function (path) {\r\n        if (window.Worker) {\r\n            var w = new window.Worker(path || WinJSContrib.Messenger.SmartWorkerPath);\r\n            return new WinJSContrib.Messenger(w, w);\r\n        }\r\n\r\n        return new WinJSContrib.Messenger(null, null);\r\n    }\r\n\r\n\r\n    WinJSContrib.Messenger.prototype._send = function (obj) {\r\n        if (this.isWorker) {\r\n            this._sender.postMessage(JSON.stringify(obj));\r\n        }\r\n        else {\r\n            this._sender.postMessage(JSON.stringify(obj), '*');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * import script files\r\n     * @param {Array} scriptPaths an array of string paths to js files\r\n     */\r\n    WinJSContrib.Messenger.prototype.importScripts = function (scriptPaths) {\r\n        if (!this._receiver)\r\n            return WinJS.Promise.wrap();\r\n\r\n        return this.start('_doImportScripts', scriptPaths);\r\n    }\r\n\r\n    WinJSContrib.Messenger.prototype._doImportScripts = function (scriptPaths) {\r\n        return new WinJS.Promise(function (c) {\r\n            if (typeof scriptPaths == 'string') {\r\n                importScripts(scriptPaths);\r\n            } else if (scriptPaths.length) {\r\n                for (var i = 0 ; i < scriptPaths.length ; i++) {\r\n                    importScripts(scriptPaths[i]);\r\n                }\r\n            }\r\n            c();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * run the callback in the web worker. The callback is serialized to string so you must pass all variable used inside the function as arguments\r\n     * @param {function} func function callback\r\n     * @param {...Object} args\r\n     * @returns {WinJS.Promise}\r\n     */\r\n    WinJSContrib.Messenger.prototype.execute = function (func) {\r\n        var messenger = this;\r\n        var args = [];\r\n        if (arguments.length > 1) {\r\n            for (var i = 1 ; i < arguments.length; i++) {\r\n                args.push(arguments[i]);\r\n            }\r\n        }\r\n\r\n        if (messenger._receiver) {\r\n            var f = 'var messengerFunction=' + func;\r\n\r\n            return this.start('_runFunction', { f: f, args: args });\r\n        }\r\n        else {\r\n            return WinJS.Promise.timeout(0).then(function () {\r\n                return func.apply(null, args);\r\n            });\r\n        }\r\n    }\r\n\r\n    WinJSContrib.Messenger.prototype._runFunction = function (functionArgs) {\r\n        var messenger = this;\r\n        return new WinJS.Promise(function (c, e) {\r\n            try {\r\n                eval(functionArgs.f);\r\n                var res = messengerFunction.apply(null, functionArgs.args);\r\n                c(res);\r\n            } catch (exception) {\r\n                e(exception);\r\n            }\r\n        });\r\n    }\r\n\r\n    WinJSContrib.Messenger.prototype.map = function (object, functions) {\r\n        var messenger = this;\r\n        functions.forEach(function (name) {\r\n            messenger[name] = function () {\r\n                var f = object[name];\r\n                return f.apply(object, arguments);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * start an operation within iframe or worker and get a promise for completion\r\n     * @param {string} eventName name of the event/function to call\r\n     * @param {Object} data event/function passed as argument\r\n     * @returns {WinJS.Promise}\r\n     */\r\n    WinJSContrib.Messenger.prototype.start = function (eventName, data, asArgs) {\r\n        var messenger = this;\r\n\r\n        if (!messenger._receiver)\r\n            return WinJS.Promise.wrapError('worker not supported');\r\n\r\n        var wrapper = {\r\n            id: WinJSContrib.Utils.guid(),\r\n            complete: null, error: null, progress: null, promise: null\r\n        }\r\n\r\n        var event = {\r\n            name: eventName,\r\n            id: wrapper.id,\r\n            type: 'run',\r\n            data: data,\r\n            asArgs: asArgs,\r\n            sender: 'WinJSContrib.WinJSContrib.Messenger'\r\n        };\r\n\r\n        wrapper.promise = new WinJS.Promise(function (c, e, p) {\r\n            wrapper.complete = c;\r\n            wrapper.error = e;\r\n            wrapper.progress = p;\r\n        }, function oncancel() {\r\n            console.warn('message canceled');\r\n            event.type = 'cancel';\r\n            messenger._send(event);\r\n        });\r\n\r\n        messenger._pendings[wrapper.id] = wrapper;\r\n        var cleanUp = function () {\r\n            delete messenger._pendings[wrapper.id];\r\n        }\r\n        wrapper.promise.done(cleanUp, cleanUp);\r\n        messenger._send(event);\r\n\r\n        return wrapper.promise;\r\n    };\r\n\r\n    WinJSContrib.Messenger.prototype._processEvent = function (arg) {\r\n        var messenger = this;\r\n       \r\n        var details = typeof (arg.data) == 'string' ? JSON.parse(arg.data) : arg.data;\r\n        var name = details.name;\r\n        var data = details.data;\r\n        var asArgs = details.asArgs;\r\n\r\n        if (details.id) {\r\n            var wrapper = messenger._pendings[details.id];\r\n            if (wrapper && wrapper[details.type]) {\r\n                wrapper[details.type](data);\r\n                return;\r\n            }\r\n\r\n            if (details.type === 'cancel') {\r\n                var current = messenger._pendings[details.id];\r\n                if (current) {\r\n                    current.promise.cancel();\r\n                    delete messenger._pendings[details.id];\r\n                }\r\n            }\r\n            else if (details.type==='run' && name && messenger[name]) {\r\n                try {\r\n                    var p = null;\r\n                    if (asArgs) {\r\n                        p = WinJS.Promise.as(messenger[name].apply(messenger[name], data));\r\n                    } else {\r\n                        p = WinJS.Promise.as(messenger[name](data));\r\n                    }\r\n\r\n                   messenger._pendings[details.id] = { promise: p, details: details };\r\n\r\n                    p.then(function (arg) {\r\n                        messenger._send({ name: name, id: details.id, type: 'complete', sender: 'WinJSContrib.WinJSContrib.Messenger', data: arg });\r\n                    }, function (arg) {\r\n                        messenger._send({ name: name, id: details.id, type: 'error', sender: 'WinJSContrib.WinJSContrib.Messenger', data: arg });\r\n                    }, function (arg) {\r\n                        messenger._send({ name: name, id: details.id, type: 'progress', sender: 'WinJSContrib.WinJSContrib.Messenger', data: arg });\r\n                    }).then(function () {\r\n                        delete messenger._pendings[details.id];\r\n                    });\r\n                } catch (exception) {\r\n                    delete messenger._pendings[details.id];\r\n                    messenger._send({ name: name, id: details.id, type: 'error', sender: 'WinJSContrib.WinJSContrib.Messenger', data: { description: exception.description, message: exception.message, stack: exception.stack } });\r\n                }\r\n\r\n                return;\r\n            }\r\n            else {\r\n                messenger._send({ name: name, id: details.id, type: 'error', sender: 'WinJSContrib.WinJSContrib.Messenger', data: { message: 'callback function not found' } });\r\n            }\r\n        } else {\r\n            if (name && messenger[name]) {\r\n                messenger[name](data);\r\n                return;\r\n            }\r\n            messenger.dispatchEvent(name, data);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * release messenger and associated resources (if using webworker, worker is terminated\r\n     */\r\n    WinJSContrib.Messenger.prototype.dispose = function () {\r\n        var messenger = this;\r\n        if (messenger._receiver) {\r\n            if (messenger._receiver.terminate)\r\n                messenger._receiver.terminate();\r\n\r\n            messenger._receiver.removeEventListener('message', messenger._bindedProcessEvent);\r\n        }\r\n    };\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar __global = this;\r\nvar WinJSContrib;\r\n(function (WinJSContrib) {\r\n    var DataContainer;\r\n    (function (DataContainer) {\r\n        DataContainer.current = WinJSContrib.DataContainer.current || null;\r\n        var containerLogger = WinJSContrib.Logs.getLogger(\"WinJSContrib.DataContainer.WinRT\");\r\n        var WinRTFilesContainer = (function () {\r\n            function WinRTFilesContainer(key, options, parent) {\r\n                var container = this;\r\n                container.key = key;\r\n                container.options = options || {};\r\n                container.parent = parent;\r\n                container.folderPromise;\r\n                container.useDataCache = container.options.useDataCache || false;\r\n                container.dataCache = {};\r\n                container.childs = {};\r\n                if (!__global.Windows)\r\n                    throw \"WinRT is required !\";\r\n                if (!key) {\r\n                    container.folder = Windows.Storage.ApplicationData.current.localFolder;\r\n                    container.folderPromise = WinJS.Promise.wrap(container.folder);\r\n                }\r\n                else if (parent) {\r\n                    container.folderPromise = parent.folderPromise.then(function (parentfolder) {\r\n                        if (container.options.logger)\r\n                            container.options.logger.debug(\"open folder \" + key);\r\n                        return parentfolder.createFolderAsync(key, Windows.Storage.CreationCollisionOption.openIfExists);\r\n                    }).then(function (folder) {\r\n                        container.folder = folder;\r\n                        return folder;\r\n                    });\r\n                }\r\n            }\r\n            WinRTFilesContainer.makeCurrent = function (key, options) {\r\n                WinJSContrib.DataContainer.current = new WinRTFilesContainer(key, options);\r\n            };\r\n            WinRTFilesContainer.prototype.read = function (itemkey) {\r\n                var container = this;\r\n                if (container.useDataCache) {\r\n                    var data = container.dataCache[itemkey];\r\n                    if (data) {\r\n                        //clone object to avoid unintended object alteration\r\n                        var clone = JSON.parse(JSON.stringify(data));\r\n                        return WinJS.Promise.wrap(clone);\r\n                    }\r\n                }\r\n                return container.folderPromise.then(function (folder) {\r\n                    return readFileAsync(folder, itemkey, container.options.encrypted, Windows.Storage.CreationCollisionOption.openIfExists, 0, container.options.logger).then(function (data) {\r\n                        if (container.useDataCache) {\r\n                            container.dataCache[itemkey] = data;\r\n                        }\r\n                        return data;\r\n                    });\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.save = function (itemkey, obj) {\r\n                var container = this;\r\n                if (container.useDataCache) {\r\n                    container.dataCache[itemkey] = obj;\r\n                }\r\n                return container.folderPromise.then(function (folder) {\r\n                    return writeFileAsync(folder, itemkey, obj, container.options.encrypted, Windows.Storage.CreationCollisionOption.replaceExisting, 0, container.options.logger);\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.remove = function (itemkey) {\r\n                var container = this;\r\n                return container.folderPromise.then(function (folder) {\r\n                    return deleteItemIfExistsAsync(folder, itemkey, container.options.logger);\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.listKeys = function () {\r\n                var container = this;\r\n                return container.folderPromise.then(function (folder) {\r\n                    return folder.getFilesAsync().then(function (files) {\r\n                        return files.map(function (f) {\r\n                            var key = f.path.substr(folder.path.length + 1);\r\n                            var ext = key.indexOf('.json');\r\n                            if (ext > 0) {\r\n                                key = key.substr(0, ext);\r\n                            }\r\n                            return key;\r\n                        });\r\n                    });\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.list = function () {\r\n                var container = this;\r\n                return container.folderPromise.then(function (folder) {\r\n                    return folder.getFilesAsync();\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.child = function (key) {\r\n                if (this.childs[key])\r\n                    return this.childs[key];\r\n                var res = new WinRTFilesContainer(key, this.options, this);\r\n                this.childs[key] = res;\r\n                return res;\r\n            };\r\n            WinRTFilesContainer.prototype.childWithTransaction = function (key, process) {\r\n                var current = this;\r\n                return this.child(key + \"-tmp\").folderPromise.then(function (winrtfolder) {\r\n                    return winrtfolder.deleteAsync().then(function () {\r\n                        return current.child(key + \"-tmp\");\r\n                    });\r\n                }).then(function (folder) {\r\n                    return process(folder).then(function (data) {\r\n                        return folder.folderPromise.then(function (winrtfolder) {\r\n                            return winrtfolder.renameAsync(key, Windows.Storage.NameCollisionOption.replaceExisting).then(function () {\r\n                                current.childs[key] = null;\r\n                                current.childs[key + \"-tmp\"] = null;\r\n                                return current.child(key);\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.deleteContainer = function () {\r\n                var container = this;\r\n                return container.folderPromise.then(function (folder) {\r\n                    return folder.deleteAsync();\r\n                });\r\n            };\r\n            WinRTFilesContainer.prototype.clearAllCache = function () {\r\n                var container = this;\r\n                container.clearCache();\r\n                container.clearDataCache();\r\n            };\r\n            WinRTFilesContainer.prototype.clearCache = function () {\r\n                var container = this;\r\n                container.childs = {};\r\n                for (var k in container.childs) {\r\n                    if (container.childs.hasOwnProperty(k)) {\r\n                        container.childs[k].clearCache();\r\n                    }\r\n                }\r\n            };\r\n            WinRTFilesContainer.prototype.clearDataCache = function () {\r\n                var container = this;\r\n                container.dataCache = {};\r\n                for (var k in container.childs) {\r\n                    if (container.childs.hasOwnProperty(k)) {\r\n                        container.childs[k].clearDataCache();\r\n                    }\r\n                }\r\n            };\r\n            return WinRTFilesContainer;\r\n        })();\r\n        DataContainer.WinRTFilesContainer = WinRTFilesContainer;\r\n        function toJSONFileName(fileName) {\r\n            return encodeURIComponent(fileName) + \".json\";\r\n        }\r\n        function deleteItemIfExistsAsync(folder, itemName, logger) {\r\n            return folder.getItemAsync(toJSONFileName(itemName)).then(function (item) {\r\n                return item;\r\n            }, function () {\r\n            }).then(function (item) {\r\n                if (item) {\r\n                    return item.deleteAsync().then(function () {\r\n                        if (logger)\r\n                            logger.debug(\"item deleted \" + item.path);\r\n                    }, function (err) {\r\n                        if (logger)\r\n                            logger.error(\"cannot delete item \" + item.path);\r\n                    });\r\n                }\r\n                else {\r\n                    return WinJS.Promise.wrap([]);\r\n                }\r\n            });\r\n        }\r\n        function getFileContentAsJSONAsync(file, encrypted) {\r\n            return Windows.Storage.FileIO.readBufferAsync(file).then(function (cypheredText) {\r\n                if (!encrypted)\r\n                    return cypheredText;\r\n                // On vérifie que le fichier n'est pas vide\r\n                if (cypheredText.length) {\r\n                    var provider = new Windows.Security.Cryptography.DataProtection.DataProtectionProvider();\r\n                    return provider.unprotectAsync(cypheredText);\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }).then(function (unprotectedData) {\r\n                var obj = null;\r\n                if (unprotectedData !== null && unprotectedData !== undefined) {\r\n                    var rawText = Windows.Security.Cryptography.CryptographicBuffer.convertBinaryToString(Windows.Security.Cryptography.BinaryStringEncoding.utf8, unprotectedData);\r\n                    if (rawText) {\r\n                        try {\r\n                            obj = JSON.parse(rawText);\r\n                        }\r\n                        catch (exception) { }\r\n                    }\r\n                }\r\n                return obj;\r\n            });\r\n        }\r\n        function readFileAsync(folder, fileName, encrypted, creationCollisionOption, retry, logger) {\r\n            logger = logger || containerLogger;\r\n            return new WinJS.Promise(function (readComplete, readError) {\r\n                retry = retry || 0;\r\n                creationCollisionOption = creationCollisionOption || Windows.Storage.CreationCollisionOption.openIfExists;\r\n                var filename = toJSONFileName(fileName);\r\n                //folder.getFilesAsync(filename).then(function(file){})\r\n                folder.getFileAsync(filename).then(function (file) {\r\n                    return getFileContentAsJSONAsync(file, encrypted);\r\n                }).then(function (res) {\r\n                    logger.verbose(\"read \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                    readComplete(res);\r\n                }, function (err) {\r\n                    if (err.number == -2147024894) {\r\n                        logger.debug(\"read empty \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                        readComplete();\r\n                        return;\r\n                    }\r\n                    logger.warn(\"error reading \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                    if (retry < 2) {\r\n                        setImmediate(function () {\r\n                            logger.info(\"retry reading \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                            readFileAsync(folder, fileName, encrypted, creationCollisionOption, retry + 1, logger).then(readComplete, readError);\r\n                        });\r\n                    }\r\n                    else {\r\n                        readError({ message: 'fatal error reading ' + folder.path + '\\\\' + toJSONFileName(fileName), exception: err });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        function writeFileAsync(folder, fileName, objectGraph, encrypt, creationCollisionOption, retry, logger) {\r\n            logger = logger || containerLogger;\r\n            return new WinJS.Promise(function (writeComplete, writeError) {\r\n                retry = retry || 0;\r\n                creationCollisionOption = creationCollisionOption || Windows.Storage.CreationCollisionOption.replaceExisting;\r\n                var bufferedText = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(JSON.stringify(objectGraph), Windows.Security.Cryptography.BinaryStringEncoding.utf8);\r\n                if (encrypt) {\r\n                    var provider = new Windows.Security.Cryptography.DataProtection.DataProtectionProvider(\"Local=user\");\r\n                }\r\n                function manageError(err) {\r\n                    logger.warn(\"error writing \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                    if (retry < 2) {\r\n                        setImmediate(function () {\r\n                            logger.info(\"retry writing \" + folder.path + '\\\\' + toJSONFileName(fileName));\r\n                            writeFileAsync(folder, fileName, objectGraph, encrypt, creationCollisionOption, retry + 1, logger).then(writeComplete, writeError);\r\n                        });\r\n                    }\r\n                    else {\r\n                        writeError({ message: \"fatal error writing \" + folder.path + '\\\\' + toJSONFileName(fileName) + '\\r\\n', exception: err });\r\n                    }\r\n                }\r\n                // Ces deux opérations ne sont pas dépendantes l'une de l'autre et peuvent s'exécuter en parallèle\r\n                var filePromise = folder.createFileAsync(toJSONFileName(fileName), creationCollisionOption);\r\n                var protectionPromise = encrypt ? provider.protectAsync(bufferedText) : WinJS.Promise.wrap(bufferedText);\r\n                WinJS.Promise.join([filePromise, protectionPromise]).then(function (data) {\r\n                    var file = data[0];\r\n                    var protectedData = data[1];\r\n                    Windows.Storage.FileIO.writeBufferAsync(file, protectedData).then(function () {\r\n                        logger.verbose(\"file written \" + file.path);\r\n                        //setImmediate(function () {\r\n                        writeComplete(file);\r\n                        //});\r\n                    }, manageError);\r\n                }, manageError);\r\n            });\r\n        }\r\n    })(DataContainer = WinJSContrib.DataContainer || (WinJSContrib.DataContainer = {}));\r\n})(WinJSContrib || (WinJSContrib = {}));\r\n","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/**\r\n * @namespace\r\n */\r\nvar WinJSContrib = WinJSContrib || {};\r\n\r\n/**\r\n * @namespace\r\n */\r\nWinJSContrib.UI = WinJSContrib.UI || {};\r\n\r\n/**\r\n * @namespace\r\n */\r\nWinJSContrib.Utils = WinJSContrib.Utils || {};\r\n\r\n/// <reference path=\"winjscontrib.core.js\" />\r\nfunction HSL(hVal, sVal, lVal) {\r\n    var res = {\r\n        h: hVal,\r\n        s: sVal,\r\n        l: lVal,\r\n        addH: function (increment) {\r\n            this.h = this.h + increment;\r\n        },\r\n        addS: function (increment) {\r\n            this.s = this.s + increment;\r\n        },\r\n        addL: function (increment) {\r\n            this.l = this.l + increment;\r\n        },\r\n        toString: function () {\r\n            return 'hsl(' + this.h + ',' + this.s + '%, ' + this.l + '%)';\r\n        },\r\n        clone: function (hInc, sInc, lInc) {\r\n            var res = new HSL(this.h, this.s, this.l);\r\n            res.addH(hInc);\r\n            res.addS(sInc);\r\n            res.addL(lInc);\r\n            return res;\r\n        }\r\n    };\r\n\r\n    return res;\r\n}\r\n\r\n(function ($) {\r\n    $.fn.winControl = function () {\r\n        return this[0].winControl;\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.tap = function (callback, options) {\r\n        var opt = options || {};\r\n\r\n        return this.each(function () {\r\n        \tWinJSContrib.UI.tap(this, callback, options);\r\n        });\r\n    };\r\n\r\n    $.fn.untap = function (callback) {\r\n        return this.each(function () {\r\n            WinJSContrib.UI.untap(this);            \r\n        });\r\n    };\r\n\r\n    jQuery.fn.hatchShow = function () {\r\n        $('.hsjs').css('visibility', 'hidden').css('font-size', '').css('display', 'inner-block').css('white-space', 'pre').each(function () {\r\n            var t = $(this);\r\n            var parent = t.parent();\r\n            if (parent.hasClass('hatchshow_temp')) {\r\n                //t = parent;\r\n                parent = parent.parent();\r\n            }\r\n            else {\r\n                t.wrap(\"<span class='hatchshow_temp' style='display:block'>\");\r\n            }\r\n            var pw = parent.width();\r\n            var w = t.width();\r\n            while (t.width() < pw) {\r\n                var fsize = t.fontSize();\r\n                if (fsize > 200)\r\n                    break;\r\n                t.css('font-size', (fsize + 1) + \"px\"),\r\n                  function () {\r\n                      while (t.width() > pw) {\r\n                          var fsize = t.fontSize();\r\n                          if (fsize < 8)\r\n                              break;\r\n                          t.css('font-size', (fsize - .1) + \"px\")\r\n                      }\r\n                  };\r\n            };\r\n        }).hide().css('visibility', '').fadeIn();\r\n    };\r\n\r\n\r\n    jQuery.fn.fontSize = function () { return parseInt($(this).css('font-size').replace('px', '')); };\r\n\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.pressEnterDefaultTo = function (eltSelector, scope) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.keypress(function (e) {\r\n                var key = e.which ? e.which : e.keyCode;\r\n                if (key == 13) {\r\n                    var $elt = scope ? $(eltSelector, scope) : $(eltSelector);\r\n                    jQuery(this).blur();\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    if ($elt[0].mcnTapTracking && $elt[0].mcnTapTracking.callback) {\r\n                        $elt[0].mcnTapTracking.callback($elt[0]);\r\n                    }\r\n                    $elt.focus().click();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    $.fn.onPressEnter = function (callback) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.keypress(function (e) {\r\n                var key = e.which ? e.which : e.keyCode;\r\n                if (key == 13) {\r\n                    jQuery(this).blur();\r\n                    e.preventDefault();\r\n                    if (callback) callback();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    $.fn.throttleTextChanged = function (throttling, callback) {\r\n        return this.each(function () {\r\n            var elt = this;\r\n            var $this = $(this);\r\n            var lastval = elt.value;\r\n            $this.keydown(function (e) {\r\n                clearTimeout(elt.mcnTxtThrottling);\r\n                elt.mcnTxtThrottling = setTimeout(function () {\r\n                    lastval = elt.value;\r\n                    callback(elt, elt.value);\r\n                }, throttling);\r\n            });\r\n\r\n            $this.blur(function (e) {\r\n                if (lastval != elt.value) {\r\n                    lastval = elt.value;\r\n                    callback(elt, elt.value);\r\n                }\r\n            });\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.transitionProperties = function (properties, delay, targetValueCallback) {\r\n        var that = $(this);\r\n        //-ms-transition: all @transdur ease-in-out;\r\n        return new WinJS.Promise(function (complete, error) {\r\n            var val = properties + ' ' + delay + 'ms ease-out';\r\n            var res = that.css('transition', val);\r\n\r\n            if (targetValueCallback) {\r\n                targetValueCallback(res);\r\n            }\r\n            res.delay(delay + 10).promise().done(function () {\r\n                that.css('-ms-transition', '');\r\n                complete(res);\r\n            },\r\n            function () {\r\n                that.css('-ms-transition', '');\r\n                error(res);\r\n            });\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.toWinJSPromise = function () {\r\n        return new WinJS.Promise(function (complete, error) {\r\n            var res = this.promise().done(function () {\r\n                complete(res);\r\n            },\r\n            function () {\r\n                error(res);\r\n            });\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.renderWith = function (templateSelector, object) {\r\n        var template = $(templateSelector).get(0);\r\n        if (template)\r\n            template = template.winControl;\r\n\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            if (template) {\r\n                template.render(null, object).done(function (elt) {\r\n                    $this.append(elt.children[0]);\r\n                });\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.renderWithEach = function (templateSelector, objectArray, itemCallback) {\r\n        var template = $(templateSelector).get(0);\r\n        if (template)\r\n            template = template.winControl;\r\n\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            if (template) {\r\n                objectArray.forEach(function (element, index) {\r\n                    template.render(null, element).done(function (elt) {\r\n                        var templatedElt = elt.children[0];\r\n                        $this.append(templatedElt);\r\n                        if (itemCallback)\r\n                            itemCallback(element, templatedElt);\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.scrollInView = function (offset, animate) {\r\n        var viewState = Windows.UI.ViewManagement.ApplicationView.value;\r\n        var horizontal = true;\r\n        if (viewState === Windows.UI.ViewManagement.ApplicationViewState.snapped || viewState === Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)\r\n            horizontal = false;\r\n\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            if (horizontal) {\r\n                this.offsetParent.scrollLeft = this.offsetLeft - (offset ? offset : 0);\r\n            } else {\r\n                this.offsetParent.scrollTop = this.offsetTop - (offset ? offset : 0);\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.scrollInParentView = function (offset, animate) {\r\n        var viewState = Windows.UI.ViewManagement.ApplicationView.value;\r\n        var horizontal = true;\r\n        if (viewState === Windows.UI.ViewManagement.ApplicationViewState.snapped || viewState === Windows.UI.ViewManagement.ApplicationViewState.fullScreenPortrait)\r\n            horizontal = false;\r\n\r\n        return this.each(function () {\r\n            if (horizontal) {\r\n                this.offsetParent.offsetParent.scrollLeft = this.offsetLeft - (offset ? offset : 0);\r\n            } else {\r\n                this.offsetParent.offsetParent.scrollTop = this.offsetTop - (offset ? offset : 0);\r\n            }\r\n        });\r\n    };\r\n})(jQuery);\r\n\r\n(function ($) {\r\n    $.fn.loadedPromises = function (callback) {\r\n        var res = [];\r\n        this.each(function () {\r\n            var $this = $(this);\r\n            var that = this;\r\n            var promise = new WinJS.Promise(function (complete, error) {\r\n                function onerror(e) {\r\n                    that.removeEventListener('error', onerror);\r\n                    that.removeEventListener('load', onloaded);\r\n                    error({ message: 'element not loaded', elt: e.currentTarget });\r\n                }\r\n\r\n                function onloaded() {\r\n                    that.removeEventListener('error', onerror);\r\n                    that.removeEventListener('load', onloaded);\r\n                    complete(that);\r\n                    if (callback)\r\n                        callback(that);\r\n                }\r\n\r\n                that.addEventListener('error', onerror);\r\n                that.addEventListener('load', onloaded, false);\r\n\r\n                if (that.naturalWidth > 0) {\r\n                    onloaded();\r\n                }\r\n            });\r\n            res.push(promise);\r\n        });\r\n\r\n        return res;\r\n    };\r\n\r\n    $.fn.whenLoaded = function (callback) {\r\n        var promises = this.loadedPromises();\r\n        if (callback) {\r\n            WinJS.Promise.join(promises).done(function (res) {\r\n                callback(res);\r\n            });\r\n        } else {\r\n            return WinJS.Promise.join(promises);\r\n        }\r\n    };\r\n\r\n    $.fn.afterTransition = function (callback, timeout) {\r\n        var promises = [];\r\n        var completed = false;\r\n\r\n        this.each(function () {\r\n            var currentElement = this;\r\n\r\n            var prom = new WinJS.Promise(function (complete, error) {\r\n                var onaftertransition = function (event) {\r\n                    if (event.srcElement === currentElement) {\r\n                        close();\r\n                    }\r\n                };\r\n                var close = function () {\r\n                    clearTimeout(timeOutRef);\r\n                    currentElement.removeEventListener(\"transitionend\", onaftertransition, false);\r\n                    complete();\r\n                }\r\n\r\n                currentElement.addEventListener(\"transitionend\", onaftertransition, false);\r\n                timeOutRef = setTimeout(close, timeout || 1000);\r\n            });\r\n            promises.push(prom);\r\n        });\r\n\r\n        var success = null, error = null;\r\n        var resultPromise = new WinJS.Promise(function (c, e) {\r\n            success = c;\r\n            error = e;\r\n        });\r\n\r\n        var p = WinJS.Promise.join(promises);\r\n        p.done(function () {\r\n            if (!completed) {\r\n                completed = true;\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n                success();\r\n                return;\r\n            }\r\n            p.cancel();\r\n            error();\r\n        }, error);\r\n\r\n        return resultPromise;\r\n    };\r\n\r\n    $.fn.afterAnimation = function (callback) {\r\n        var promises = [];\r\n        this.each(function () {\r\n            var ctrl = this;\r\n            var prom = new WinJS.Promise(function (complete, error) {\r\n                function ontransition(event) {\r\n                    if (event.srcElement === currentElement) {\r\n                        ctrl.removeEventListener(\"animationend\", ontransition);\r\n                        complete();\r\n                    }\r\n                }\r\n\r\n                ctrl.addEventListener(\"animationend\", ontransition);\r\n            });\r\n            promises.push(prom);\r\n        });\r\n\r\n        WinJS.Promise.join(promises).done(function () {\r\n            if (callback)\r\n                callback();\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    $.fn.classBasedAnimation = function (classname) {\r\n        var promises = [];\r\n        return this.each(function () {\r\n            var ctrl = this;\r\n            $(ctrl).afterAnimation(function () {\r\n                $(ctrl).removeClass(classname);\r\n            });\r\n\r\n            $(ctrl).addClass(classname);\r\n        });\r\n    };\r\n})(jQuery);","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n    \r\n    var DataFormState = WinJS.Class.mix(WinJS.Class.define(function () {\r\n        this._initObservable();\r\n    }, {\r\n    }), WinJS.Binding.mixin, WinJS.Binding.expandProperties({ isValid: false, updated: false }));\r\n\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        DataForm: WinJS.Class.mix(WinJS.Class.define(\r\n            /**\r\n             * @class WinJSContrib.UI.DataForm\r\n             * @classdesc\r\n             * This control enhance data form management by adding validation mecanism and form state helpers. It must be placed on a form element.\r\n             * Input fields must use {@link WinJSContrib.UI.DataFormBinding} to bind object properties to input\r\n             * @param {HTMLElement} element DOM element containing the control\r\n             * @param {Object} options\r\n             */\r\n            function ctor(element, options) {\r\n                var ctrl = this;\r\n                this.element = element || document.createElement('FORM');\r\n                //$(this.element).submit(function (e) {\r\n                //    e.preventDefault()\r\n                //})\r\n                options = options || {};\r\n                this.groups = options.groups;\r\n                this.messages = options.messages;\r\n                this.rules = options.rules;\r\n                /**\r\n                 * state of the form\r\n                 * @field\r\n                 * @type {Object}\r\n                 */\r\n                this.state = new DataFormState();\r\n                this.state.item = {};\r\n                this.allowTooltip = options.allowTooltip || true;\r\n                this.workOnCopy = options.workOnCopy || true;\r\n                this.tooltipDelay = options.tooltipDelay || 4000;\r\n                this.tooltipPosition = options.tooltipPosition || 'right';\r\n                this.tooltipTheme = options.tooltipTheme || 'tooltipster-error';\r\n                this.initValidator();\r\n                this.element.winControl = this;\r\n                this.element.mcnDataForm = true;\r\n                this.element.classList.add('win-disposable');\r\n                if (WinJSContrib.CrossPlatform && WinJSContrib.CrossPlatform.crossPlatformClass)\r\n                    WinJSContrib.CrossPlatform.crossPlatformClass(this.element);\r\n                WinJS.UI.setOptions(this, options);\r\n                WinJS.UI.processAll(this.element).done(function () {\r\n                    WinJS.Binding.processAll(ctrl.element, ctrl.state);\r\n                });\r\n\r\n                $('.mcn-dataform-cancel', this.element).click(function (arg) {\r\n                    arg.preventDefault();\r\n                    ctrl.cancel();\r\n                });\r\n            },\r\n            /**\r\n             * @lends WinJSContrib.UI.DataForm.prototype\r\n             */\r\n        {\r\n            /**\r\n             * @member {Array}\r\n             */\r\n            messages: {\r\n                get: function () {\r\n                    return this._messages;\r\n                },\r\n                set: function (val) {\r\n                    this._messages = val;\r\n                }\r\n            },\r\n            /**\r\n             * @member {Array}\r\n             */\r\n            rules: {\r\n                get: function () {\r\n                    return this._rules;\r\n                },\r\n                set: function (val) {\r\n                    this._rules = val;\r\n                }\r\n            },\r\n            /**\r\n             * @member {Array}\r\n             */\r\n            groups: {\r\n                get: function () {\r\n                    return this._groups;\r\n                },\r\n                set: function (val) {\r\n                    this._groups = val;\r\n                }\r\n            },\r\n            /**\r\n             * object bound to data form\r\n             * @member {Object}\r\n             */\r\n            item: {\r\n                get: function () {\r\n                    return this.state.item;\r\n                },\r\n                set: function (val) {\r\n                    var dataform = this;\r\n                    if (dataform.workOnCopy) {\r\n                        dataform.state.item = $.extend(true, {}, val);\r\n                        dataform.state.refItem = val;\r\n                    }\r\n                    else {\r\n                        dataform.state.item = val;\r\n                    }\r\n\r\n                    \r\n                    dataform.validator.resetForm();\r\n\r\n                    dataform.autobindFields();\r\n                    WinJS.Binding.processAll(this.element, this.state).done(function () {\r\n                        var tooltips = dataform.allowTooltip;\r\n                        dataform.allowTooltip = false;\r\n                        dataform.validator.form();\r\n                        dataform.allowTooltip = tooltips;\r\n                        dataform.checkState();\r\n                        dataform.initValidator();\r\n                        dataform.state.updated = false;\r\n                    });\r\n                    dataform.dispatchEvent(\"itemchanged\", { dataform: this, item: val });\r\n                }\r\n            },\r\n            /**\r\n             * indicate if form has updates\r\n             * @member {boolean}\r\n             */\r\n            updated: {\r\n                get: function () {\r\n                    return this.state.updated;\r\n                },\r\n                set: function (val) {\r\n                    this.state.updated = val;\r\n                    this.dispatchEvent(\"haschanges\");\r\n                }\r\n            },\r\n\r\n            autobindFields: function () {\r\n                var ctrl = this;\r\n                $('[data-formfield]', ctrl.element).each(function () {\r\n                    var fieldElt = this;\r\n                    var srcProperty = $(fieldElt).data('formfield');\r\n                    var destFieldType = 'value';\r\n                    if (fieldElt.type == 'checkbox') {\r\n                        destFieldType = 'checked';\r\n                    }\r\n                    WinJSContrib.UI.DataFormBinding(ctrl.state.item, srcProperty.split('.'), fieldElt, [destFieldType]);\r\n                });\r\n            },\r\n\r\n            /**\r\n             * check form state\r\n             */\r\n            checkState: function () {\r\n                var nbInvalids = this.validator.numberOfInvalids();\r\n                this.state.isValid = nbInvalids == 0;\r\n            },\r\n\r\n            /**\r\n             * cancel updates on form item\r\n             */\r\n            cancel: function () {\r\n                var dataform = this;\r\n                if (dataform.workOnCopy) {\r\n                    dataform.item = $.extend(true, {}, dataform.state.refItem);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * apply changes to source object (relevant only if using workOnCopy)\r\n             */\r\n            save: function () {\r\n                var dataform = this;\r\n                if (dataform.workOnCopy) {\r\n                    dataform.state.updated = false;\r\n                    dataform.state.refItem = $.extend(true, {}, dataform.state.item);\r\n                }\r\n            },\r\n\r\n            initValidator: function () {\r\n                var dataform = this;\r\n\r\n                this.validator = $(this.element).validate({\r\n                    groups: this.groups,\r\n                    rules: this.rules,\r\n                    submitHandler: function (form) {\r\n                        dataform.dispatchEvent('submitted', { item: dataform.state.item });\r\n                    },\r\n\r\n                    invalidHandler: function (form, validator) {\r\n                        dataform.checkState();\r\n                    },\r\n\r\n                    errorPlacement: function (error, element) {\r\n                        dataform.checkState();\r\n                        if (!dataform.allowTooltip)\r\n                            return;\r\n\r\n                        var $e = $(element);\r\n                        $e.tooltipster({\r\n                            trigger: 'custom',\r\n                            onlyOne: false,\r\n                            position: dataform.tooltipPosition,\r\n                            theme: dataform.tooltipTheme\r\n                        });\r\n\r\n                        var lastError = $e.data('lastError'),\r\n                            newError = $(error).text();\r\n\r\n                        $e.data('lastError', newError);\r\n\r\n                        if (newError !== '' && newError !== lastError) {\r\n                            $e.tooltipster('content', newError);\r\n                            $e.tooltipster('show');\r\n                            $e[0].tooltipsterValidationTimeout = setTimeout(function () {\r\n                                $e[0].tooltipsterValidationTimeout = null;\r\n                                if ($e.hasClass('tooltipster'))\r\n                                    $e.tooltipster('hide');\r\n                            }, dataform.tooltipDelay);\r\n                        }\r\n                    },\r\n\r\n                    success: function (label, element) {\r\n                        dataform.checkState();\r\n                        var $e = $(element);\r\n                        if ($e[0].tooltipsterValidationTimeout) {\r\n                            clearTimeout($e[0].tooltipsterValidationTimeout);\r\n                            $e[0].tooltipsterValidationTimeout = null;\r\n                        }\r\n\r\n                        if ($e.hasClass('tooltipstered')) {\r\n                            $e.tooltipster('hide');\r\n                        }\r\n                    }\r\n\r\n                });\r\n            },\r\n\r\n            /**\r\n             * validate form\r\n             */\r\n            validate: function () {\r\n                var res = this.validator.form();\r\n                return res;\r\n            },\r\n\r\n            /**\r\n             * release form\r\n             */\r\n            dispose: function () {\r\n                WinJS.Utilities.disposeSubTree(this.element);\r\n            }\r\n        },\r\n        /**\r\n         * @lends WinJSContrib.UI.DataForm\r\n         */\r\n        {\r\n            /**\r\n             * @namespace WinJSContrib.UI.DataForm.defaultBindingOptions\r\n             */\r\n            DefaultBindingOptions: {\r\n                trimText: true,\r\n                convertEmptyToNull: true,\r\n            },\r\n\r\n            /**\r\n             * @namespace WinJSContrib.UI.DataForm.Converters\r\n             */\r\n            Converters: {\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"none\": {\r\n                    fromObject: function (val, options) {\r\n                        return val.toString();\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        return val;\r\n                    }\r\n                },\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"text\": {\r\n                    fromObject: function (val, options) {\r\n                        if (typeof val === \"undefined\" || val === null)\r\n                            return '';\r\n\r\n                        var res = val.toString();\r\n                        \r\n                        return res;\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        var res = val;\r\n                        if (res && options && options.trimText) {\r\n                            res = res.trim();\r\n                        }\r\n                        if (options && options.convertEmptyToNull) {\r\n                            res = (res === '') ? null : res;\r\n                        }\r\n                        return res;\r\n                    }\r\n                },\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"number\": {\r\n                    fromObject: function (val, options) {\r\n                        if (typeof val !== \"number\")\r\n                            return '';\r\n\r\n                        return val.toString();\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        if (typeof val !== \"undefined\" && val !== null)\r\n                          //return parseFloat(val);\r\n                          return parseFloat(val.toString().replace(',', '.').replace(' ', ''));\r\n\r\n                        return null;\r\n                    }\r\n                },\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"boolean\": {\r\n                    fromObject: function (val, options) {\r\n                        if (typeof val === \"undefined\" || val === null)\r\n                            return '';\r\n\r\n                        return val.toString();\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        if (val === 'true')\r\n                            return true;\r\n                        if (val === 'false')\r\n                            return false;\r\n\r\n                        return null;\r\n                    }\r\n                },\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"object\": {\r\n                    fromObject: function (val, options) {\r\n                        return val;\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        return val;\r\n                    }\r\n                },\r\n                /**\r\n                 * @member\r\n                 */\r\n                \"stringifiedObject\": {\r\n                    fromObject: function (val, options) {\r\n                        return JSON.stringify(val);\r\n                    },\r\n                    fromInput: function (val, options) {\r\n                        return JSON.parse(val);\r\n                    }\r\n                }\r\n            }\r\n        }),\r\n        WinJS.UI.DOMEventMixin,\r\n        WinJS.Utilities.createEventProperties(\"itemchanged\", \"haschanges\", \"submitted\")),\r\n\r\n        parentDataForm: function (element) {\r\n            var current = element.parentNode;\r\n\r\n            while (current) {\r\n                if (current.mcnDataForm) {\r\n                    return current.winControl;\r\n                }\r\n                current = current.parentNode;\r\n            }\r\n        },\r\n\r\n        \r\n\r\n        /**\r\n         * bi-directional binding for working with input fields and custom input controls. This binding expect a {@link WinJSContrib.UI.DataForm} to be found on the parent form\r\n         * @function WinJSContrib.UI.DataFormBinding\r\n         * @param {Object} source object owning data\r\n         * @param {string[]} sourceProperty path to object data\r\n         * @param {HTMLElement} dest DOM element targeted by binding\r\n         * @param {string[]} destProperty path to DOM element property targeted by binding\r\n         */\r\n        DataFormBinding: WinJS.Binding.initializer(function (source, sourceProperty, dest, destProperty) {\r\n            //if (dest.binded && dest.winControl)\r\n            //    dest.winControl.dispose();\r\n\r\n            var dataform = WinJSContrib.UI.parentDataForm(dest);\r\n            var options = WinJSContrib.UI.DataForm.DefaultBindingOptions;\r\n            var optionsText = dest.getAttribute(\"data-formfield-options\");\r\n            if (optionsText) {\r\n                options = WinJS.UI.optionsParser(optionsText, window);\r\n            }\r\n            var inputType = \"\";\r\n            var inputOption = dest.getAttribute(\"data-forminput\");\r\n            if (inputOption) {\r\n                inputType = inputOption;\r\n            }\r\n\r\n            var fieldUpdated = false;\r\n            dest.classList.add('mcn-dataform-field');\r\n\r\n            //si le noeud n'est pas un champ input html, on renseigne la propriété form, sinon plantage de jquery validate\r\n            if (!dest.form) {\r\n                dest.form = dataform.element;\r\n            }\r\n\r\n            var inputType = 'text';\r\n            if ($(dest).data('formfield-type')) {\r\n                inputType = $(dest).data('formfield-type');\r\n            }\r\n            else if (dest.nodeName !== \"TEXTAREA\" && typeof dest.type !== \"undefined\") {\r\n                inputType = dest.type;\r\n            }\r\n            var converter = WinJSContrib.UI.DataForm.Converters[inputType] || WinJSContrib.UI.DataForm.Converters['text'];\r\n\r\n            function updateInputFromObject() {\r\n                var data = WinJSContrib.Utils.readProperty(source, sourceProperty);\r\n                if (typeof data === \"undefined\")\r\n                    data = null;\r\n\r\n                if (dest.nodeName == \"INPUT\" && dest.type == \"radio\") {\r\n                    var fieldname = dest.name;\r\n                    if (dest.value == data) {\r\n                        dest.checked = true;\r\n                    }\r\n                } else {\r\n                    data = converter.fromObject(data, options);\r\n                    WinJSContrib.Utils.writeProperty(dest, destProperty, data);\r\n                }\r\n            }\r\n\r\n            function updateObjectFromInput() {\r\n                dataform.checkState();\r\n                if (!dest.id || dataform.validator.element(dest)) {\r\n                    var val = null;\r\n                    if (dest.nodeName == \"INPUT\" && dest.type == \"radio\") {\r\n                        var fieldname = dest.name;\r\n                        if (dest.form && dest.form[fieldname] && dest.form[fieldname].length) {\r\n                            for (var i = 0, l = dest.form[fieldname].length; i < l ; i++) {\r\n                                var field = dest.form[fieldname][i];\r\n                                if (field.checked){\r\n                                    val = field.value;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        val = WinJSContrib.Utils.getProperty(dest, destProperty).propValue;\r\n                    }\r\n\r\n                    if (val !== undefined)\r\n                        val = converter.fromInput(val, options);\r\n\r\n                    WinJSContrib.Utils.writeProperty(source, sourceProperty, val);\r\n                }\r\n                dataform.updated = true;\r\n            }\r\n\r\n            function validateObjectOnBlur() {\r\n                if (fieldUpdated)\r\n                    dataform.validator.element(dest);\r\n            }\r\n            if (!dest.binded)\r\n                dest.binded = true;\r\n\r\n\r\n            if (!dest.winControl) {\r\n                dest.classList.add('win-disposable');\r\n                dest.winControl = {\r\n                    dispose: function () {\r\n                        dest.removeEventListener(\"change\", dest.winControl.updateObjectFromInput);\r\n                        dest.removeEventListener(\"blur\", dest.winControl.validateObjectOnBlur);\r\n                        if (inputType) {\r\n                            dest.removeEventListener(inputType, dest.winControl.updateObjectFromInput);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            dest.winControl.updateObjectFromInput = updateObjectFromInput;\r\n            dest.winControl.validateObjectOnBlur = validateObjectOnBlur;\r\n\r\n            if (inputType) {\r\n                dest.addEventListener(inputType, dest.winControl.updateObjectFromInput);\r\n            }\r\n            dest.addEventListener(\"change\", dest.winControl.updateObjectFromInput);\r\n            if (dest.id) {\r\n                dest.addEventListener(\"blur\", validateObjectOnBlur);\r\n            }\r\n\r\n            var bindingDesc = {\r\n            };\r\n\r\n            bindingDesc[sourceProperty] = updateInputFromObject;\r\n            return WinJS.Binding.bind(source, bindingDesc);\r\n        })\r\n    });\r\n})();\r\n","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/// <reference path=\"WinJSContrib.core.js\" />\r\n\r\n(function () {\r\n    \"use strict\";\r\n\r\n    var appView = null;\r\n    if (window.Windows && window.Windows.UI && window.Windows.UI.ViewManagement && window.Windows.UI.ViewManagement.ApplicationView)\r\n        appView = window.Windows.UI.ViewManagement.ApplicationView;\r\n\r\n    var nav = WinJS.Navigation;\r\n\r\n    var defaultExitPageAnimation = function (elt) {\r\n        return WinJS.UI.Animation.exitPage(elt)\r\n    }\r\n\r\n    var defaultEnterPageAnimation = function (elt) {\r\n        return WinJS.UI.Animation.enterPage(elt);\r\n    }\r\n\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        parentNavigator: function (element) {\r\n            var current = element.parentNode;\r\n\r\n            while (current) {\r\n                if (current.mcnNavigator) {\r\n                    return current.winControl;\r\n                }\r\n                current = current.parentNode;\r\n            }\r\n        },\r\n\r\n        PageControlNavigator: WinJS.Class.mix(WinJS.Class.define(\r\n            /**\r\n             * @class WinJSContrib.UI.PageControlNavigator\r\n             * @param {HTMLElement} element DOM element containing the control\r\n             * @param {Object} options\r\n             */\r\n            function PageControlNavigator(element, options) {\r\n                var options = options || {};\r\n                var navigator = this;\r\n                this.element = element || document.createElement(\"div\");\r\n                this.element.winControl = this;\r\n                this.element.mcnNavigator = true;\r\n                this.element.classList.add('mcn-navigator');\r\n                this.element.classList.add('mcn-navigation-ctrl');\r\n                this.eventTracker = new WinJSContrib.UI.EventTracker();\r\n                this.delay = options.delay || 0;\r\n                this.disableHistory = options.disableHistory || false;\r\n                this.animationWaitForPreviousPageClose = options.animationWaitForPreviousPageClose || true;\r\n                this.animations = {};\r\n                this.locks = 0;\r\n\r\n                if (options.enterPageAnimation) {\r\n                    this.animations.enterPage = WinJSContrib.Utils.resolveMethod(element, options.enterPageAnimation);\r\n                }\r\n                if (!this.animations.enterPage)\r\n                    this.animations.enterPage = defaultEnterPageAnimation;\r\n\r\n                if (options.exitPageAnimation) {\r\n                    this.animations.exitPage = WinJSContrib.Utils.resolveMethod(element, options.exitPageAnimation);\r\n                }\r\n                if (!this.animations.exitPage)\r\n                    this.animations.exitPage = defaultExitPageAnimation;\r\n                this.home = options.home;\r\n                if (appView)\r\n                    this._lastViewstate = appView.value;\r\n\r\n                this.global = options.global !== undefined ? options.global : true;\r\n                if (this.global) { //navigation classique \r\n                    document.body.onkeyup = this._keyupHandler.bind(this);\r\n                    document.body.onkeypress = this._keypressHandler.bind(this);\r\n                    document.body.onmspointerup = this._mspointerupHandler.bind(this);\r\n\r\n                    WinJSContrib.UI.Application = WinJSContrib.UI.Application || {};\r\n                    WinJSContrib.UI.Application.navigator = this;\r\n\r\n                    this.eventTracker.addEvent(nav, 'beforenavigate', this._beforeNavigate.bind(this));\r\n                    this.eventTracker.addEvent(nav, 'navigated', this._navigated.bind(this));\r\n\r\n                    var systemNavigationManager = null;\r\n                    if (WinJSContrib.UI.enableSystemBackButton && window.Windows && window.Windows.UI && window.Windows.UI.Core && window.Windows.UI.Core.SystemNavigationManager) {\r\n                        systemNavigationManager = window.Windows.UI.Core.SystemNavigationManager.getForCurrentView();\r\n                    }\r\n\r\n                    if (systemNavigationManager && WinJSContrib.UI.enableSystemBackButton) {\r\n                        this.eventTracker.addEvent(systemNavigationManager, 'backrequested', function (arg) {\r\n                            if (WinJS.Navigation.canGoBack) {\r\n                                navigator.back();\r\n                                arg.handled = true;\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n                else {\r\n                    if (options.navigationEvents) {\r\n                        this.addNavigationEvents();\r\n                    }\r\n                    this._history = { backstack: [] };\r\n                }\r\n\r\n                this.eventTracker.addEvent(window, 'resize', function (args) {\r\n                    if (navigator.resizeHandler)\r\n                        cancelAnimationFrame(navigator.resizeHandler);\r\n\r\n                    navigator.resizeHandler = requestAnimationFrame(function () {\r\n                        navigator.resizeHandler = null;\r\n                        navigator._resized(args);\r\n                    });\r\n                });\r\n            },\r\n                /**\r\n                 * @lends WinJSContrib.UI.PageControlNavigator.prototype\r\n                 */\r\n                {\r\n                    home: \"\",\r\n                    /// <field domElement=\"true\" />\r\n                    element: null,\r\n                    _lastNavigationPromise: WinJS.Promise.as(),\r\n                    _lastViewstate: 0,\r\n\r\n                    // This is the currently loaded Page object.\r\n                    pageControl: {\r\n                        get: function () {\r\n                            return this.pageElement ? this.pageElement.winControl : null;\r\n                        }\r\n                    },\r\n\r\n                    // This is the root element of the current page.\r\n                    pageElement: {\r\n                        get: function () {\r\n                            var elt = this.element.lastElementChild;\r\n                            while (elt && elt.winControl && elt.winControl.mcnPageClosing) {\r\n                                elt = elt.previousSibling;\r\n                            }\r\n                            return elt;\r\n                        }\r\n                    },\r\n\r\n                    history: {\r\n                        get: function () {\r\n                            if (this.global)\r\n                                return WinJS.Navigation.history;\r\n                            else\r\n                                return this._history;\r\n                        }\r\n                    },\r\n\r\n                    addLock: function () {\r\n                        this.locks++;\r\n                    },\r\n\r\n                    removeLock: function () {\r\n                        this.locks--;\r\n                    },\r\n\r\n                    // Creates a container for a new page to be loaded into.\r\n                    _createPageElement: function () {\r\n                        var element = document.createElement(\"div\");\r\n                        element.setAttribute(\"dir\", window.getComputedStyle(this.element, null).direction);\r\n                        //element.style.width = \"100%\";\r\n                        //element.style.height = \"100%\";\r\n                        //element.style.position = 'relative';\r\n                        return element;\r\n                    },\r\n\r\n                    // This function disposes the page navigator and its contents.\r\n                    dispose: function () {\r\n                        if (this._disposed) {\r\n                            return;\r\n                        }\r\n                        this._disposed = true;\r\n                        this.removeNavigationEvents();\r\n                        if (WinJS.Utilities.disposeSubTree)\r\n                            WinJS.Utilities.disposeSubTree(this.element);\r\n\r\n                        this.eventTracker.dispose();\r\n                    },\r\n\r\n                    //check back navigation in the context of navigation events.\r\n                    _checkBackNavigation: function (arg) {\r\n                        var navigator = this;\r\n                        var currentPage = navigator.pageControl;\r\n                        var confirm = function () {\r\n                            arg.handled = true;\r\n                            if (arg.preventDefault)\r\n                                arg.preventDefault();\r\n                        }\r\n                        var check = function () {\r\n                            if (navigator.canGoBack) {\r\n                                navigator.back();\r\n                                confirm();\r\n                                return true;\r\n                            };\r\n                        }\r\n\r\n                        if (currentPage.canClose) {\r\n                            var res = currentPage.canClose();\r\n                            if (WinJS.Promise.is(res)) {\r\n                                res.then(function (canClose) {\r\n                                    if (!canClose) {\r\n                                        confirm();\r\n                                        return true;\r\n                                    }\r\n                                    return check();\r\n                                });\r\n                            } else {\r\n                                if (!res) {\r\n                                    confirm();\r\n                                    return true;\r\n                                }\r\n                                return check();\r\n                            }\r\n\r\n                        } else {\r\n                            return check();\r\n                        }\r\n                    },\r\n\r\n                    //register hardware backbutton. unecessary if navigator is global\r\n                    addNavigationEvents: function () {\r\n                        var navigator = this;\r\n                        this.navigationEvents = WinJSContrib.UI.registerNavigationEvents(this, function (arg) {\r\n                            navigator._checkBackNavigation(arg);\r\n                        });\r\n                    },\r\n\r\n                    removeNavigationEvents: function () {\r\n                        if (this.navigationEvents) {\r\n                            this.navigationEvents();\r\n                            this.navigationEvents = null;\r\n                        }\r\n                    },\r\n\r\n                    // Retrieves a list of animation elements for the current page.\r\n                    // If the page does not define a list, animate the entire page.\r\n                    _getAnimationElements: function (isExit) {\r\n                        if (this.pageControl && this.pageControl.getAnimationElements) {\r\n                            return this.pageControl.getAnimationElements(isExit);\r\n                        }\r\n                        return this.pageElement;\r\n                    },\r\n\r\n                    // Navigates back whenever the backspace key is pressed and\r\n                    // not captured by an input field.\r\n                    _keypressHandler: function (args) {\r\n                        if (this.locks > 0)\r\n                            return;\r\n\r\n                        if (args.key === \"Backspace\") {\r\n                            this.back();\r\n                        }\r\n                    },\r\n\r\n                    // Navigates back or forward when alt + left or alt + right\r\n                    // key combinations are pressed.\r\n                    _keyupHandler: function (args) {\r\n                        if (this.locks > 0)\r\n                            return;\r\n\r\n                        if ((args.key === \"Left\" && args.altKey) || (args.key === \"BrowserBack\")) {\r\n                            this.back();\r\n                        }/* else if ((args.key === \"Right\" && args.altKey) || (args.key === \"BrowserForward\")) {\r\n                        nav.forward();\r\n                    }*/\r\n                    },\r\n\r\n                    // This function responds to clicks to enable navigation using\r\n                    // back and forward mouse buttons.\r\n                    _mspointerupHandler: function (args) {\r\n                        if (args.button === 3) {\r\n                            nav.back();\r\n                        } else if (args.button === 4) {\r\n                            nav.forward();\r\n                        }\r\n                    },\r\n\r\n                    navigate: function (location, initialState, skipHistory, isback, stacked) {\r\n                        var nav = this;\r\n                        if (this.global) {\r\n                            return WinJS.Navigation.navigate(location, initialState);\r\n                        } else {\r\n                            var arg = {\r\n                                skipHistory: skipHistory,\r\n                                detail: {\r\n                                    location: location,\r\n                                    state: initialState,\r\n                                    navigateStacked: stacked,\r\n                                    setPromise: function (promise) {\r\n                                        this.pagePromise = promise;\r\n                                    }\r\n                                }\r\n                            };\r\n                            nav._beforeNavigate(arg);\r\n                            arg.detail.pagePromise = arg.detail.pagePromise || WinJS.Promise.wrap();\r\n                            nav._history.current = { state: initialState, location: location };\r\n                            return arg.detail.pagePromise.then(function () {\r\n                                if (isback) {\r\n                                    nav._history.backstack.splice(nav._history.backstack.length - 1, 1);\r\n                                }\r\n                                nav._navigated(arg);\r\n                                return arg.detail.pagePromise;\r\n                            });\r\n                        }\r\n                    },\r\n\r\n                    clearHistory: function () {\r\n                        if (this.global) {\r\n                            WinJS.Navigation.history.backStack = [];\r\n                        } else {\r\n                            this._history.backstack = [];\r\n                            this._history.current = null;\r\n                        }\r\n                    },\r\n\r\n                    closeAllPages: function () {\r\n                        var navigator = this;\r\n                        var pages = navigator.element.children;\r\n\r\n                        for (var i = pages.length - 1 ; i >= 0 ; i--) {\r\n                            var page = pages[i];\r\n                            if (page && page.classList.contains(\"pagecontrol\")) {\r\n                                navigator.element.removeChild(page);\r\n                                page.winControl.dispose();\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    clear: function () {\r\n                        this.clearHistory();\r\n                        this.closeAllPages();\r\n                        this.element.innerHTML = '';\r\n                    },\r\n\r\n                    //warning, deprecated...\r\n                    open: function (uri, options) {\r\n                        return this.navigate(uri, options);\r\n                    },\r\n\r\n                    pick: function (uri, options) {\r\n                        options = options || {};\r\n                        options.navigateStacked = true;\r\n                        return this.navigate(uri, options);\r\n                    },\r\n\r\n                    canGoBack: {\r\n                        get: function () {\r\n                            if (this.global)\r\n                                return nav.canGoBack;\r\n                            else\r\n                                return this._history.backstack.length > 0;\r\n                        }\r\n                    },\r\n\r\n                    _handleStackedBack: function () {\r\n                        var navigator = this;\r\n                        if (navigator.global) {\r\n                            var isStacked = navigator.stackNavigation == true || (WinJS.Navigation.history.current.state && WinJS.Navigation.history.current.state.navigateStacked);\r\n                            if (isStacked) {\r\n                                var previousPage = navigator.element.children[navigator.element.children.length - 2];\r\n                                if (previousPage) {\r\n                                    WinJS.Navigation.history.backStack.splice(WinJS.Navigation.history.backStack.length - 1, 1);\r\n                                    navigator.triggerPageExit();\r\n                                    return navigator.closePage(navigator.pageControl.element).then(function () {\r\n                                        navigator._updateBackButton(previousPage.winControl.element);\r\n                                        if (previousPage.winControl && previousPage.winControl.navactivate) {\r\n                                            previousPage.winControl.navactivate();\r\n                                        }\r\n                                        if (WinJSContrib.UI.Application.progress)\r\n                                            WinJSContrib.UI.Application.progress.hide();\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    back: function (distance) {\r\n                        var navigator = this;\r\n\r\n                        if (navigator.global) {\r\n                            //navigator._handleBack();\r\n\r\n                            return WinJS.Navigation.back(distance);\r\n                        }\r\n                        else {\r\n                            if (navigator._history.backstack.length) {\r\n                                var pageindex = navigator._history.backstack.length - 1;\r\n                                var previousPage = navigator._history.backstack[pageindex];\r\n\r\n                                return navigator.navigate(previousPage.location, previousPage.state, true, true);\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    _beforeNavigate: function (args) {\r\n                        var navigator = this;\r\n                        var page = this.pageElement;\r\n                        var navlocation = args.detail.location;\r\n                        var navstate = args.detail.state;\r\n\r\n                        args.detail.state = args.detail.state || {};\r\n                        var openStacked = navigator.stackNavigation == true || args.detail.navigateStacked || args.detail.state.navigateStacked;\r\n\r\n                        if (navigator.global && page && page.winControl && page.winControl.navigationState && page.winControl.navigationState.state && page.winControl.navigationState.state.navigateStacked) {\r\n                            var history = WinJS.Navigation.history.backStack[WinJS.Navigation.history.backStack.length - 1];\r\n                            if (navlocation == history.location && navstate == history.state) {\r\n                                var res = navigator._handleStackedBack();\r\n                                if (WinJS.Promise.is(res)) {\r\n                                    WinJS.Navigation.history.current = history;\r\n                                    args.detail.setPromise(res.then(function () {\r\n                                        var p = new WinJS.Promise(function (c) { });\r\n                                        args.detail.setPromise(p);\r\n                                        p.cancel();\r\n                                        return p;\r\n                                    }));\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (this.locks > 0) {\r\n                            var p = new WinJS.Promise(function (c) { });\r\n                            args.detail.setPromise(p);\r\n                            p.cancel();\r\n                            return;\r\n                        }\r\n                        else if (page && page.winControl && !openStacked && page.winControl.canClose) {\r\n                            var completeCallback = null;\r\n                            var p = new WinJS.Promise(function (c) {\r\n                                completeCallback = c;\r\n                            });\r\n                            setImmediate(function () {\r\n                                WinJS.Promise.wrap(page.winControl.canClose()).then(function (res) {\r\n                                    if (!res) {\r\n                                        p.cancel();\r\n                                    }\r\n                                    else {\r\n                                        navigator.triggerPageExit(openStacked);\r\n                                        completeCallback();\r\n                                    }\r\n                                });\r\n                            });\r\n                            args.detail.setPromise(p);\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (openStacked && !args.detail.state.mcnNavigationDetails && page && page.winControl) {\r\n                            if (page.winControl.navdeactivate) {\r\n                                args.detail.setPromise(WinJS.Promise.as(page.winControl.navdeactivate.apply(page.winControl)));\r\n                                return;\r\n                            }\r\n                            return;\r\n                        }\r\n\r\n                        if (navigator.global && !openStacked && WinJS.Navigation.history.current.state && WinJS.Navigation.history.current.state.navigateStacked) {\r\n                            navigator.closeAllPages();\r\n                            var backstack = WinJS.Navigation.history.backStack;\r\n                            for (var i = backstack.length - 1 ; i >= 0 ; i--) {\r\n                                if (backstack[i].state && backstack[i].state.navigateStacked) {\r\n                                    backstack.splice(i, 1);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        navigator.triggerPageExit();\r\n                    },\r\n\r\n                    triggerPageExit: function (openStacked) {\r\n                        var navigator = this;\r\n                        var page = this.pageElement;\r\n                        if (openStacked) {\r\n                            if (page.winControl.navdeactivate) {\r\n                                page.winControl.exitPagePromise = WinJS.Promise.as(page.winControl.navdeactivate());\r\n                            } else {\r\n                                page.winControl.exitPagePromise = WinJS.Promise.wrap();\r\n                            }\r\n                            return;\r\n                        }\r\n\r\n                        var hidepage = function () {\r\n                            if (!openStacked) {\r\n                                //page.style.display = 'none';\r\n                                //page.style.visibility = 'hidden';\r\n                                //page.style.opacity = '';\r\n                            }\r\n                        }\r\n\r\n                        if (page && page.winControl && !page.winControl.exitPagePromise) {\r\n                            if (page.winControl.exitPage) {\r\n                                var exitPageResult = page.winControl.exitPage();\r\n                                if (exitPageResult) {\r\n                                    var res = WinJS.Promise.as(exitPageResult);\r\n                                    page.winControl.exitPagePromise = res.then(function () {\r\n                                        if (page.winControl.exitPageAnimation) {\r\n                                            return WinJS.Promise.as(page.winControl.exitPageAnimation());\r\n                                        }\r\n                                    }).then(hidepage);\r\n                                } else {\r\n                                    if (page.winControl.exitPageAnimation) {\r\n                                        page.winControl.exitPagePromise = WinJS.Promise.as(page.winControl.exitPageAnimation()).then(hidepage);\r\n                                    } else {\r\n                                        page.winControl.exitPagePromise = WinJS.Promise.as(navigator.animations.exitPage(navigator._getAnimationElements(true))).then(hidepage);\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (page.winControl.exitPageAnimation) {\r\n                                    page.winControl.exitPagePromise = WinJS.Promise.as(page.winControl.exitPageAnimation()).then(hidepage);\r\n                                } else {\r\n                                    page.winControl.exitPagePromise = WinJS.Promise.as(navigator.animations.exitPage(navigator._getAnimationElements(true))).then(hidepage);\r\n                                }\r\n                            }\r\n\r\n                            var layoutCtrls = page.querySelectorAll('.mcn-layout-ctrl');\r\n                            if (layoutCtrls && layoutCtrls.length) {\r\n                                for (var i = 0 ; i < layoutCtrls.length; i++) {\r\n                                    var ctrl = layoutCtrls[i].winControl;\r\n                                    if (ctrl.exitPage)\r\n                                        ctrl.exitPage();\r\n                                }\r\n                            }\r\n\r\n                            if (WinJSContrib.UI.Application.progress)\r\n                                WinJSContrib.UI.Application.progress.show();\r\n                        }\r\n                    },\r\n\r\n                    closePage: function (pageElementToClose, args) {\r\n                        var navigator = this;\r\n                        args = args || {};\r\n                        var pagecontainer = navigator.element;\r\n                        var oldElement = pageElementToClose || this.pageElement;\r\n                        if (oldElement) {\r\n                            WinJSContrib.UI.untapAll(oldElement);\r\n                        }\r\n                        var oldPageExitPromise = (oldElement && oldElement.winControl && oldElement.winControl.exitPagePromise) ? oldElement.winControl.exitPagePromise : WinJS.Promise.wrap()\r\n                        navigator.dispatchEvent('closingPage', { page: oldElement });\r\n\r\n                        if (oldElement && oldElement.winControl) {\r\n                            oldElement.winControl.mcnPageClosing = true;\r\n                            oldElement.winControl.pageLifeCycle.stop();\r\n                            oldElement.winControl.dispatchEvent('closing', { youpla: 'boom' });\r\n\r\n                            if (oldElement.winControl.cancelPromises) {\r\n                                oldElement.winControl.cancelPromises();\r\n                            }\r\n                        }\r\n\r\n                        if (!navigator.global && !navigator.disableHistory && oldElement && oldElement.winControl && oldElement.winControl.navigationState && !args.skipHistory) {\r\n                            navigator._history.backstack.push(oldElement.winControl.navigationState);\r\n                        }\r\n                        \r\n                        setImmediate(function () {\r\n                            var p = navigator._lastNavigationPromise ? navigator._lastNavigationPromise.then(function () { }, function () { }) : WinJS.Promise.wrap();\r\n                            \r\n                            p.then(function () {\r\n                                return oldPageExitPromise;\r\n                            }).then(function () {\r\n                                return WinJS.Promise.timeout(200);\r\n                            }).then(function () {\r\n                                WinJS.Utilities.Scheduler.schedule(function () {\r\n                                    navigator.destroyOldPage(oldElement);\r\n                                });\r\n                            });\r\n                        }, 1000);\r\n\r\n                        return WinJS.Promise.wrap();\r\n                    },\r\n\r\n                    destroyOldPage: function (oldElement) {\r\n                        if (oldElement) {\r\n                            oldElement.style.opacity = '0';\r\n                            oldElement.style.display = 'none';\r\n                            //    }\r\n                            //    return WinJS.Promise.timeout();\r\n                            //}).then(function () {\r\n                            //    if (oldElement) {\r\n                            if (oldElement.winControl) {\r\n                                oldElement.winControl.stackedOn = null;\r\n                                oldElement.winControl.stackedBy = null;\r\n                                if (oldElement.winControl.eventTracker) {\r\n                                    oldElement.winControl.eventTracker.dispose();\r\n                                }\r\n\r\n                                if (oldElement.winControl.unload) {\r\n                                    oldElement.winControl.unload();\r\n                                }\r\n                            }\r\n\r\n                            if (WinJS.Utilities.disposeSubTree)\r\n                                WinJS.Utilities.disposeSubTree(oldElement);\r\n\r\n                            //oldElement.innerHTML = '';\r\n                            //setImmediate(function () {\r\n                            try {\r\n                                if (oldElement.parentElement) oldElement.parentElement.removeChild(oldElement);\r\n                            }\r\n                            catch (exception) {\r\n                                console.log('cannot remove page, WTF ????????')\r\n                            }\r\n                            //});\r\n                        }\r\n                    },\r\n\r\n                    // Responds to navigation by adding new pages to the DOM.\r\n                    _navigated: function (args) {\r\n                        var navigator = this;\r\n\r\n                        args.detail.state = args.detail.state || {};\r\n                        var pagecontainer = navigator.element;\r\n                        var oldPage = this.pageControl;\r\n                        var oldElement = this.pageElement;\r\n                        var openStacked = navigator.stackNavigation == true || args.detail.navigateStacked || (args.detail.state && args.detail.state.navigateStacked);\r\n\r\n                        if (this._lastNavigationPromise) {\r\n                            this._lastNavigationPromise.cancel();\r\n\r\n                            if (WinJSContrib.UI.Application.progress)\r\n                                WinJSContrib.UI.Application.progress.hide();\r\n                        }\r\n\r\n                        if (oldPage && oldPage.stackedOn && args.detail.state.mcnNavigationDetails) {//back en nav stacked\r\n                            var closeOldPagePromise = navigator.closePage(oldElement, args);\r\n                            this._lastNavigationPromise = closeOldPagePromise;\r\n                            args.detail.setPromise(closeOldPagePromise);\r\n                            if (WinJSContrib.UI.Application.progress)\r\n                                WinJSContrib.UI.Application.progress.hide();\r\n                            return;\r\n                        }\r\n                        else if (openStacked) {\r\n                            if (!navigator.global && !navigator.disableHistory && oldElement && oldElement.winControl && oldElement.winControl.navigationState && !args.skipHistory) {\r\n                                navigator._history.backstack.push(oldElement.winControl.navigationState);\r\n                            }\r\n\r\n                            var closeOldPagePromise = WinJS.Promise.wrap();\r\n                        }\r\n                        else {\r\n                            var closeOldPagePromise = navigator.closePage(oldElement, args);\r\n                        }\r\n\r\n                        if (navigator.global && !openStacked) {\r\n                            var backstack = WinJS.Navigation.history.backStack;\r\n                            for (var i = backstack.length - 1 ; i >= 0 ; i--) {\r\n                                if (backstack[i].state && backstack[i].state.navigateStacked) {\r\n                                    backstack.splice(i, 1);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        args.detail.state.mcnNavigationDetails = {\r\n                            id: WinJSContrib.Utils.guid(),\r\n                            date: new Date()\r\n                        };\r\n\r\n                        //var newElement = null; //this._createPageElement();\r\n                        //var newElementCtrl = null;\r\n                        var parentedComplete;\r\n                        var parented = new WinJS.Promise(function (c) { parentedComplete = c; });\r\n                        //newElement.style.opacity = '0';\r\n                        var layoutCtrls = [];\r\n\r\n\r\n                        //if (navigator.animationWaitForPreviousPageClose) {\r\n                        //    var tempo = closeOldPagePromise.then(function () {\r\n                        //        return WinJS.Promise.timeout(navigator.delay);\r\n                        //    });\r\n                        //} else {\r\n                        //    var tempo = WinJS.Promise.timeout(navigator.delay);\r\n                        //}\r\n\r\n                        navigator.currentPageDetails = args.detail;\r\n                        //var timekey = \"opening \" + args.detail.location;\r\n                        //console.time(timekey);\r\n                        var openNewPagePromise = WinJSContrib.UI.Pages.renderFragment(pagecontainer, args.detail.location, args.detail.state, {\r\n                            //delay: tempo,\r\n                            enterPage: navigator.animations.enterPage,\r\n\r\n                            //parented: closeOldPagePromise.then(function () {\r\n                            //  return parented;\r\n                            //}),\r\n\r\n                            getFragmentElement: navigator.fragmentInjector,\r\n\r\n                            closeOldPagePromise: closeOldPagePromise.then(function () { }, function () { }),\r\n\r\n                            oninit: function (element, options) {\r\n                                if (!element) return;\r\n                                var control = element.winControl;\r\n                                control.navigator = navigator;\r\n                                control.element.mcnPage = true;\r\n                                if (openStacked) {\r\n                                    control.stackedOn = oldPage;\r\n                                    if (oldPage) {\r\n                                        oldPage.stackedBy = control;\r\n                                    }\r\n                                }\r\n                                control.renderComplete = control.renderComplete.then(function () {\r\n                                    parentedComplete();\r\n                                });\r\n                            },\r\n\r\n                            onrender: function (element, options) {\r\n                                if (args.detail.state && args.detail.state.clearNavigationHistory) {\r\n                                    if (navigator.global) {\r\n                                        WinJS.Navigation.history.backStack = [];\r\n\r\n                                        var systemNavigationManager = null;\r\n                                        if (WinJSContrib.UI.enableSystemBackButtonVisibility && window.Windows && window.Windows.UI && window.Windows.UI.Core && window.Windows.UI.Core.SystemNavigationManager) {\r\n                                            systemNavigationManager = window.Windows.UI.Core.SystemNavigationManager.getForCurrentView();\r\n                                            if (systemNavigationManager) {\r\n                                                systemNavigationManager.appViewBackButtonVisibility = window.Windows.UI.Core.AppViewBackButtonVisibility.collapsed;\r\n                                            }\r\n                                        }\r\n                                    } else {\r\n                                        navigator._history.backstack = [];\r\n                                    }\r\n                                }\r\n                                navigator._updateBackButton(element);\r\n                            },\r\n\r\n                            onready: function (element, options) {\r\n                                navigator.dispatchEvent('pageContentReady', { page: element.winControl });\r\n                                if (WinJSContrib.UI.Application.progress)\r\n                                    WinJSContrib.UI.Application.progress.hide();\r\n                            }\r\n                        }).then(function () {\r\n                            if (navigator._lastNavigationPromise == openNewPagePromise)\r\n                                navigator._lastNavigationPromise = undefined;\r\n                            //console.timeEnd(timekey);\r\n                        });\r\n\r\n                        this._lastNavigationPromise = openNewPagePromise;\r\n\r\n\r\n                        args.detail.setPromise(WinJS.Promise.join([closeOldPagePromise, openNewPagePromise]));\r\n                    },\r\n\r\n                    // Responds to resize events and call the updateLayout function\r\n                    // on the currently loaded page.\r\n                    _resized: function (args) {\r\n                        var navigator = this;\r\n                        if (this.pageControl && this.pageControl.element) {\r\n                            var navigator = this;\r\n                            var control = this.pageControl;\r\n                            var element = control.element;\r\n\r\n                            //navigator.pageControl.element.opacity = '0';\r\n                            cancelAnimationFrame(navigator.layoutProcess);\r\n                            navigator.layoutProcess = requestAnimationFrame(function () {\r\n                                var vw = appView ? appView.value : null;\r\n                                for (var i = 0, l = navigator.element.children.length; i < l; i++) {\r\n                                    var control = navigator.element.children[i].winControl;\r\n                                    if (control) {\r\n                                        if (control.__checkLayout) {\r\n                                            control.__checkLayout(element, vw, navigator._lastViewstate);\r\n                                        }\r\n                                        else {\r\n                                            if (control.updateLayout) {\r\n                                                control.updateLayout.call(control, element, vw, navigator._lastViewstate);\r\n                                            }\r\n                                            var layoutCtrls = element.querySelectorAll('.mcn-layout-ctrl');\r\n                                            if (layoutCtrls && layoutCtrls.length) {\r\n                                                for (var i = 0 ; i < layoutCtrls.length; i++) {\r\n                                                    var ctrl = layoutCtrls[i].winControl;\r\n                                                    if (ctrl.updateLayout)\r\n                                                        ctrl.updateLayout(ctrl.element, vw, navigator._lastViewstate);\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                                //WinJS.UI.Animation.fadeIn(navigator.pageControl.element);\r\n                            });\r\n                        }\r\n                        this._lastViewstate = appView ? appView.value : null;\r\n                    },\r\n\r\n                    _handleBack: function () {\r\n                        nav.back();\r\n                    },\r\n\r\n                    // Updates the back button state. Called after navigation has\r\n                    // completed.\r\n                    _updateBackButton: function (element) {\r\n                        var ctrl = this;\r\n                        var canGoBack = ctrl.canGoBack;\r\n\r\n                        var systemNavigationManager = null;\r\n\r\n                        if ((WinJSContrib.UI.enableSystemBackButtonVisibility) && window.Windows && window.Windows.UI && window.Windows.UI.Core && window.Windows.UI.Core.SystemNavigationManager) {\r\n                            systemNavigationManager = window.Windows.UI.Core.SystemNavigationManager.getForCurrentView();\r\n                        }\r\n                        if (ctrl.global && systemNavigationManager && WinJSContrib.UI.enableSystemBackButtonVisibility) {\r\n                            if (!canGoBack)\r\n                                systemNavigationManager.appViewBackButtonVisibility = window.Windows.UI.Core.AppViewBackButtonVisibility.collapsed;\r\n                            else\r\n                                systemNavigationManager.appViewBackButtonVisibility = window.Windows.UI.Core.AppViewBackButtonVisibility.visible;\r\n                        }\r\n\r\n                        var backButtons = element.querySelectorAll(\".win-backbutton, .back-button, .win-navigation-backbutton\");\r\n                        //var backButton = this.pageElement.querySelector(\"header[role=banner] .win-backbutton\");\r\n\r\n                        if (backButtons && backButtons.length > 0) {\r\n                            var clearNav = false;\r\n                            //console.log('nav:' + JSON.stringify(args.detail.state))\r\n                            //if (args && args.detail && args.detail.state && args.detail.state.clearNavigationHistory)\r\n                            //    clearNav = args.detail.state.clearNavigationHistory;\r\n\r\n                            for (var i = 0, l = backButtons.length; i < l ; i++) {\r\n                                var btn = backButtons[i];\r\n                                if (btn) {\r\n                                    if (canGoBack && !clearNav) {\r\n                                        btn.classList.remove('disabled');\r\n                                        btn.disabled = false;\r\n                                    } else {\r\n                                        btn.classList.add('disabled');\r\n                                        btn.disabled = true;\r\n                                    }\r\n\r\n                                    btn.onclick = function (arg) {\r\n                                        if (arg.currentTarget.classList.contains(\"win-navigation-backbutton\")) {\r\n                                            //it is winjs backbutton control, skip action...\r\n                                            return;\r\n                                        }\r\n                                        if (ctrl.global) {\r\n                                            nav.back();\r\n                                        }\r\n                                        else {\r\n                                            var navigator = WinJSContrib.UI.parentNavigator(arg.currentTarget);\r\n                                            navigator.back();\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            ), WinJS.Utilities.eventMixin)\r\n    });\r\n\r\n    if (WinJSContrib.UI.WebComponents) {\r\n        WinJSContrib.UI.WebComponents.register('mcn-navigator', WinJSContrib.UI.PageControlNavigator, {\r\n            properties: ['global'],\r\n            map: {\r\n                \"ENTERPAGEANIMATION\": {\r\n                    attribute: \"enterPageAnimation\",\r\n                    property: \"animations.enterPage\",\r\n                    resolve: true\r\n                },\r\n                \"EXITPAGEANIMATION\": {\r\n                    attribute: \"exitPageAnimation\",\r\n                    property: \"animations.exitPage\",\r\n                    resolve: true\r\n                }\r\n            }\r\n        });\r\n    }\r\n})();\r\n","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/**\n * @namespace WinJSContrib.UI.Animation\n */\n/**\n */\nvar WinJSContrib;\n(function (WinJSContrib) {\n    var UI;\n    (function (UI) {\n        var Animation;\n        (function (Animation) {\n            /**\n             * @enum\n             * @memberof WinJSContrib.UI.Animation\n             */\n            Animation.Easings = {\n                /**\n                 * Quad ease in\n                 */\n                easeInQuad: 'cubic-bezier(0.550, 0.085, 0.680, 0.530)',\n                /**\n                 * Cubic ease in\n                 */\n                easeInCubic: 'cubic-bezier(0.550, 0.055, 0.675, 0.190)',\n                /**\n                 * Quart ease in\n                 */\n                easeInQuart: 'cubic-bezier(0.895, 0.030, 0.685, 0.220)',\n                /**\n                 * Quint ease in\n                 */\n                easeInQuint: 'cubic-bezier(0.755, 0.050, 0.855, 0.060)',\n                /**\n                 * Sine ease in\n                 */\n                easeInSine: 'cubic-bezier(0.470, 0.000, 0.745, 0.715)',\n                /**\n                 * Expo ease in\n                 */\n                easeInExpo: 'cubic-bezier(0.950, 0.050, 0.795, 0.035)',\n                /**\n                 * Circ ease in\n                 */\n                easeInCirc: 'cubic-bezier(0.600, 0.040, 0.980, 0.335)',\n                /**\n                 * Back ease in\n                 */\n                easeInBack: 'cubic-bezier(0.600, -0.280, 0.735, 0.045)',\n                /**\n                 * Quad ease out\n                 */\n                easeOutQuad: 'cubic-bezier(0.250, 0.460, 0.450, 0.940)',\n                /**\n                 * Cubic ease out\n                 */\n                easeOutCubic: 'cubic-bezier(0.215, 0.610, 0.355, 1.000)',\n                /**\n                 * Quart ease out\n                 */\n                easeOutQuart: 'cubic-bezier(0.165, 0.840, 0.440, 1.000)',\n                /**\n                 * Quint ease out\n                 */\n                easeOutQuint: 'cubic-bezier(0.230, 1.000, 0.320, 1.000)',\n                /**\n                 * Sine ease out\n                 */\n                easeOutSine: 'cubic-bezier(0.390, 0.575, 0.565, 1.000)',\n                /**\n                 * Expo ease out\n                 */\n                easeOutExpo: 'cubic-bezier(0.190, 1.000, 0.220, 1.000)',\n                /**\n                 * Circ ease out\n                 */\n                easeOutCirc: 'cubic-bezier(0.075, 0.820, 0.165, 1.000)',\n                /**\n                 * Back ease out\n                 */\n                easeOutBack: 'cubic-bezier(0.175, 0.885, 0.320, 1.275)',\n                /**\n                 * Quad ease in-out\n                 */\n                easeInOutQuad: 'cubic-bezier(0.455, 0.030, 0.515, 0.955)',\n                /**\n                 * Cubic ease in-out\n                 */\n                easeInOutCubic: 'cubic-bezier(0.645, 0.045, 0.355, 1.000)',\n                /**\n                 * Quart ease in-out\n                 */\n                easeInOutQuart: 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',\n                /**\n                 * Quint ease in-out\n                 */\n                easeInOutQuint: 'cubic-bezier(0.860, 0.000, 0.070, 1.000)',\n                /**\n                 * Sine ease in-out\n                 */\n                easeInOutSine: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)',\n                /**\n                 * Expo ease in-out\n                 */\n                easeInOutExpo: 'cubic-bezier(1.000, 0.000, 0.000, 1.000)',\n                /**\n                 * Circ ease in-out\n                 */\n                easeInOutCirc: 'cubic-bezier(0.785, 0.135, 0.150, 0.860)',\n                /**\n                 * Back ease in-out\n                 */\n                easeInOutBack: 'cubic-bezier(0.680, -0.550, 0.265, 1.550)',\n            };\n            var equivalents = WinJS.Utilities._browserStyleEquivalents || { transform: { cssName: 'transform' } };\n            function getOpt(options) {\n                if (options && typeof options == 'number')\n                    return { duration: options };\n                else\n                    return options || {};\n            }\n            /**\n             * configurable fade out\n             * @function WinJSContrib.UI.Animation.fadeOut\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function fadeOut(elements, options) {\n                options = getOpt(options);\n                var args = {\n                    property: \"opacity\",\n                    delay: staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333),\n                    duration: options.duration || 167,\n                    timing: options.easing || \"ease-in-out\",\n                    to: 0\n                };\n                return WinJS.UI.executeTransition(elements, args);\n            }\n            Animation.fadeOut = fadeOut;\n            /**\n             * configurable fade in\n             * @function WinJSContrib.UI.Animation.fadeIn\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function fadeIn(elements, options) {\n                options = getOpt(options);\n                return WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333),\n                    duration: options.duration || 167,\n                    timing: options.easing || \"ease-in-out\",\n                    to: 1\n                });\n            }\n            Animation.fadeIn = fadeIn;\n            function staggerDelay(initialDelay, extraDelay, delayFactor, delayCap) {\n                return function (i) {\n                    var ret = initialDelay;\n                    for (var j = 0; j < i; j++) {\n                        extraDelay *= delayFactor;\n                        ret += extraDelay;\n                    }\n                    if (delayCap) {\n                        ret = Math.min(ret, delayCap);\n                    }\n                    return ret;\n                };\n            }\n            /**\n             * configurable page exit effect\n             * @function WinJSContrib.UI.Animation.pageExit\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function pageExit(elements, options) {\n                options = getOpt(options);\n                var args = {\n                    property: \"opacity\",\n                    delay: staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333),\n                    duration: options.duration || 160,\n                    timing: options.easing || \"ease-in\",\n                    to: 0\n                };\n                return WinJS.UI.executeTransition(elements, args);\n            }\n            Animation.pageExit = pageExit;\n            /**\n             * configurable page enter effect\n             * @function WinJSContrib.UI.Animation.enterPage\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function enterPage(elements, options) {\n                options = getOpt(options);\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 120, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var animationParams = {\n                    keyframe: 'WinJSContrib-EnterPage',\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: options.duration || 600,\n                    timing: options.easing || \"cubic-bezier(0.1, 0.9, 0.2, 1)\"\n                };\n                var promise1 = WinJS.UI.executeAnimation(elements, animationParams);\n                var args = {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: options.duration || 600,\n                    timing: options.easing || \"ease-out\",\n                    to: 1\n                };\n                var promise2 = WinJS.UI.executeTransition(elements, args);\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.enterPage = enterPage;\n            function slideAnim(element, keyframeName, isIn, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var duration = options.duration || isIn ? 250 : 150;\n                var delay = options.delay || 5;\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var easing = WinJSContrib.UI.Animation.Easings.easeInQuad;\n                if (isIn)\n                    easing = WinJSContrib.UI.Animation.Easings.easeOutQuad;\n                var animationParams = {\n                    keyframe: keyframeName,\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: duration,\n                    timing: options.easing || easing\n                };\n                var promise1 = WinJS.UI.executeAnimation(element, animationParams);\n                var transitionParams = {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: duration / 2,\n                    timing: easing,\n                    from: 0,\n                    to: 1\n                };\n                if (!isIn) {\n                    transitionParams.from = 1;\n                    transitionParams.to = 0;\n                    if (transitionParams.delay < duration / 2)\n                        transitionParams.delay = duration / 2;\n                }\n                var promise2 = WinJS.UI.executeTransition(element, transitionParams);\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideFromBottom\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideFromBottom(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideFromBottom', true, options);\n            }\n            Animation.slideFromBottom = slideFromBottom;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideFromTop\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideFromTop(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideFromTop', true, options);\n            }\n            Animation.slideFromTop = slideFromTop;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideFromLeft\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideFromLeft(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideFromLeft', true, options);\n            }\n            Animation.slideFromLeft = slideFromLeft;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideFromRight\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideFromRight(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideFromRight', true, options);\n            }\n            Animation.slideFromRight = slideFromRight;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideToBottom\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideToBottom(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideToBottom', false, options);\n            }\n            Animation.slideToBottom = slideToBottom;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideToTop\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideToTop(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideToTop', false, options);\n            }\n            Animation.slideToTop = slideToTop;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideToLeft\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideToLeft(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideToLeft', false, options);\n            }\n            Animation.slideToLeft = slideToLeft;\n            /**\n             * configurable slide effect\n             * @function WinJSContrib.UI.Animation.slideToRight\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function slideToRight(elements, options) {\n                return slideAnim(elements, 'WinJSContrib-slideToRight', false, options);\n            }\n            Animation.slideToRight = slideToRight;\n            /**\n             * animation for tab exit\n             * @function WinJSContrib.UI.Animation.tabExitPage\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function tabExitPage(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var animationParams = {\n                    keyframe: \"WinJSContrib-tabExitPage\",\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: options.duration || 160,\n                    timing: \"ease-in\"\n                };\n                var promise1 = WinJS.UI.executeAnimation(elements, animationParams);\n                var transitionParams = {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: options.duration || 160,\n                    timing: \"linear\",\n                    from: 1,\n                    to: 0\n                };\n                var promise2 = WinJS.UI.executeTransition(elements, transitionParams);\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.tabExitPage = tabExitPage;\n            /**\n             * animation for tab exit\n             * @function WinJSContrib.UI.Animation.tabEnterPage\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like duration, delay, easing\n             */\n            function tabEnterPage(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: \"WinJSContrib-tabEnterPage\",\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: options.duration || 250,\n                    timing: WinJSContrib.UI.Animation.Easings.easeOutQuad\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: options.duration || 250,\n                    timing: \"ease-out\",\n                    from: 0,\n                    to: 1\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.tabEnterPage = tabEnterPage;\n            /**\n             * exit and grow animation\n             * @function WinJSContrib.UI.Animation.exitGrow\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function exitGrow(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var keyframeName = \"WinJSContrib-exitGrow\";\n                if (options.exagerated) {\n                    keyframeName += '-exagerated';\n                }\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var dur = options.duration || 250;\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: keyframeName,\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeInQuad\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeInQuint,\n                    from: 1,\n                    to: 0\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.exitGrow = exitGrow;\n            /**\n             * exit and shrink animation\n             * @function WinJSContrib.UI.Animation.exitShrink\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function exitShrink(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var keyframeName = \"WinJSContrib-exitShrink\";\n                if (options.exagerated) {\n                    keyframeName += '-exagerated';\n                }\n                var dur = options.duration || 250;\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 10, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: keyframeName,\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeInQuad\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: dur,\n                    timing: WinJSContrib.UI.Animation.Easings.easeInQuint,\n                    from: 1,\n                    to: 0\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.exitShrink = exitShrink;\n            /**\n             * shrink and fall animation\n             * @function WinJSContrib.UI.Animation.shrinkAndFall\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function shrinkAndFall(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var dur = options.duration || 250;\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: \"WinJSContrib-shrinkAndFall\",\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || \"ease-in\"\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: dur,\n                    timing: \"ease-in\",\n                    from: 1,\n                    to: 0\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.shrinkAndFall = shrinkAndFall;\n            /**\n             * enter and shrink animation\n             * @function WinJSContrib.UI.Animation.enterShrink\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function enterShrink(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var keyframeName = \"WinJSContrib-enterShrink\";\n                if (options.exagerated) {\n                    keyframeName += '-exagerated';\n                }\n                var dur = options.duration || 350;\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: keyframeName,\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeOutQuad\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeOutQuint,\n                    from: 0,\n                    to: 1\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.enterShrink = enterShrink;\n            /**\n             * enter and shrink animation\n             * @function WinJSContrib.UI.Animation.enterGrow\n             * @param {Object} elements element or array of elements\n             * @param {WinJSContrib.UI.AnimationOptions} options options like delay, easing\n             */\n            function enterGrow(elements, options) {\n                var offsetArray;\n                options = getOpt(options);\n                var keyframeName = \"WinJSContrib-enterGrow\";\n                if (options.exagerated) {\n                    keyframeName += '-exagerated';\n                }\n                var dur = options.duration || 350;\n                var stagger = staggerDelay(options.delay !== undefined ? options.delay : 5, options.itemdelay !== undefined ? options.itemdelay : 83, 1, options.maxdelay !== undefined ? options.maxdelay : 333);\n                var promise1 = WinJS.UI.executeAnimation(elements, {\n                    keyframe: keyframeName,\n                    property: equivalents.transform.cssName,\n                    delay: stagger,\n                    duration: dur,\n                    timing: options.easing || WinJSContrib.UI.Animation.Easings.easeOutQuad\n                });\n                var promise2 = WinJS.UI.executeTransition(elements, {\n                    property: \"opacity\",\n                    delay: stagger,\n                    duration: dur,\n                    timing: WinJSContrib.UI.Animation.Easings.easeOutQuint,\n                    from: 0,\n                    to: 1\n                });\n                return WinJS.Promise.join([promise1, promise2]);\n            }\n            Animation.enterGrow = enterGrow;\n        })(Animation = UI.Animation || (UI.Animation = {}));\n    })(UI = WinJSContrib.UI || (WinJSContrib.UI = {}));\n})(WinJSContrib || (WinJSContrib = {}));\n\n//# sourceMappingURL=../../Sources/Common/winjscontrib.ui.animation.js.map","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n//this control requires snap.svg\r\n\r\n(function () {\r\n    'use strict';\r\n    var elasticbuttonkinds = {\r\n        rectangle: {\r\n            morphpath: 'M286,113c0,0-68.8,6-136,6c-78.2,0-137-6-137-6S6,97.198,6,62.5C6,33.999,13,12,13,12s59-7,137-7c85,0,136,7,136,7s8,17.598,8,52C294,96.398,286,113,286,113z',\r\n            svg: '<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 300 125\" preserveAspectRatio=\"none\"><path d=\"M286.5,113c0,0-104,0-136.5,0c-35.75,0-136.5,0-136.5,0s0-39.417,0-52.5c0-12.167,0-48.5,0-48.5s101.833,0,136.5,0c33.583,0,136.5,0,136.5,0s0,35.917,0,48.5C286.5,73.167,286.5,113,286.5,113z\"/></svg>'\r\n        },\r\n        roundedrectangle: {\r\n            morphpath: 'M287,95.25c0,11.046-5.954,19.75-17,19.75c0,0-90-4-120-4s-120,4-120,4c-11.046,0-17.25-9.5-17.25-20.5c0-8.715,0.25-10.75,0.25-34s-0.681-26.257-1-33.75C11.5,15,18.954,10,30,10c0,0,90,3,120,3s120-3,120-3c11.046,0,17.75,6.5,17,20c-0.402,7.239,0,6.75,0,30.5C287,83.5,287,84.75,287,95.25z',\r\n            svg: '<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 300 125\" preserveAspectRatio=\"none\"><path d=\"M290,95c0,11.046-8.954,20-20,20c0,0-90,0-120,0s-120,0-120,0c-11.046,0-20-9-20-20c0-8.715,0-25.875,0-34.5c0-7.625,0-22.774,0-30.5c0-11.625,8.954-20,20-20c0,0,90,0,120,0s120,0,120,0c11.046,0,20,8.954,20,20c0,7.25,0,22.875,0,30.5C290,69.125,290,84.5,290,95z\"/></svg>'\r\n        },\r\n        round: {\r\n            morphpath: 'M251,150c0,93.5-29.203,143-101,143S49,243.5,49,150C49,52.5,78.203,7,150,7S251,51.5,251,150z',\r\n            svg: '<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 300 300\" preserveAspectRatio=\"none\"><path d=\"M281,150c0,71.797-59.203,131-131,131S19,221.797,19,150S78.203,19,150,19S281,78.203,281,150z\"/></svg>'\r\n        },\r\n    };\r\n\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        ElasticButton: WinJS.Class.mix(WinJS.Class.define(function ctor(element, options) {\r\n            this.element = element || document.createElement('DIV');\r\n            options = options || {};\r\n            this.element.winControl = this;\r\n            this.behavior = {\r\n                speed: { reset: 800, active: 150 },\r\n                easing: { reset: mina.elastic, active: mina.easein }\r\n            };\r\n\r\n            this.element.classList.add('mcn-elasticbutton');\r\n            this.element.classList.add('win-disposable');\r\n            WinJS.UI.setOptions(this, options);\r\n        }, {\r\n            kind: {\r\n                get: function () {\r\n                    return this._kind;\r\n                },\r\n                set: function (val) {\r\n                    this._kind = val;\r\n                    this.render();\r\n                }\r\n            },\r\n\r\n            render: function () {\r\n                var ctrl = this;\r\n                this.element.classList.add('mcn-elasticbutton-' + ctrl.kind);\r\n                var contentCreated = false;\r\n                if (!ctrl.contentElement) {\r\n                    ctrl.contentElement = document.createElement('DIV');\r\n                    ctrl.contentElement.className = 'mcn-elasticbutton-content';\r\n                    WinJSContrib.Utils.moveChilds(ctrl.element, ctrl.contentElement);\r\n                    contentCreated = true;\r\n                }\r\n\r\n                if (!ctrl.bgElement) {\r\n                    ctrl.bgElement = document.createElement('DIV');\r\n                    ctrl.bgElement.className = 'mcn-elasticbutton-bg';\r\n                    ctrl.element.appendChild(ctrl.bgElement);\r\n                }\r\n\r\n                if (contentCreated) {\r\n                    ctrl.element.appendChild(ctrl.contentElement);\r\n                }\r\n\r\n                if (!ctrl.contentElement) {\r\n                    ctrl.contentElement = document.createElement('DIV');\r\n                    ctrl.contentElement.className = 'mcn-elasticbutton-content';\r\n                    while (ctrl.element.children.length > 0) {\r\n                        ctrl.contentElement.appendChild(ctrl.element.children[0]);\r\n                    }\r\n                    ctrl.element.appendChild(ctrl.contentElement);\r\n                }\r\n\r\n                ctrl.currentKind = elasticbuttonkinds[this.kind];\r\n                if (ctrl.currentKind) {\r\n                    ctrl.bgElement.innerHTML = ctrl.currentKind.svg;\r\n                    ctrl.snap = Snap(ctrl.bgElement.querySelector('svg'));\r\n                    ctrl.pathEl = ctrl.snap.select('path');\r\n                    ctrl.paths = {\r\n                        reset: ctrl.pathEl.attr('d'),\r\n                        active: ctrl.currentKind.morphpath\r\n                    };\r\n                    if (ctrl.eventTracker)\r\n                        ctrl.eventTracker.dispose();\r\n                    ctrl.eventTracker = new WinJSContrib.UI.EventTracker();\r\n                    ctrl.eventTracker.addEvent(ctrl.element, 'pointerdown', function (arg) { ctrl._ptdown(arg); });\r\n                    ctrl.eventTracker.addEvent(ctrl.element, 'pointerup', function (arg) { ctrl._ptup(arg); });\r\n                    ctrl.eventTracker.addEvent(ctrl.element, 'pointerleave', function (arg) { ctrl._ptup(arg); })\r\n                }\r\n            },\r\n\r\n            _ptdown: function (arg) {\r\n                this.element.classList.add(\"pressed\");\r\n                this.pathEl.stop().animate({ 'path': this.paths.active }, this.behavior.speed.active, this.behavior.easing.active);\r\n            },\r\n\r\n            _ptup: function (arg) {\r\n                this.element.classList.remove(\"pressed\");\r\n                this.pathEl.stop().animate({ 'path': this.paths.reset }, this.behavior.speed.reset, this.behavior.easing.reset);\r\n            },\r\n\r\n            dispose: function () {\r\n                if (this.eventTracker) this.eventTracker.dispose();\r\n                WinJS.Utilities.disposeSubTree(this.element);\r\n                this.element = null;\r\n            }\r\n        }),\r\n\t\tWinJS.Utilities.eventMixin,\r\n\t\tWinJS.Utilities.createEventProperties(\"myevent\"))\r\n    });\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/// <reference path=\"winjscontrib.core.js\" />\r\n\r\n//this controls requires snap.svg\r\n\r\n(function () {\r\n    'use strict';\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        FOWrapper: WinJS.Class.mix(WinJS.Class.define(function ctor(element, options) {\r\n            this.element = element || document.createElement('DIV');\r\n            options = options || {};\r\n            this.element.winControl = this;\r\n            this.element.classList.add('mcn-fowrapper');\r\n            this.element.classList.add('mcn-layout-ctrl');\r\n            this.element.classList.add('win-disposable');\r\n            WinJS.UI.setOptions(this, options);\r\n            this.render();\r\n        }, {\r\n            someProperty: {\r\n                get: function () {\r\n                    return this._someProperty;\r\n                },\r\n                set: function (val) {\r\n                    this._someProperty = val;\r\n                }\r\n            },\r\n\r\n            render: function () {\r\n                var ctrl = this;\r\n                ctrl.wrapperId = WinJSContrib.Utils.guid();\r\n\r\n                if (WinJSContrib.UI.FOWrapper.disabled) {\r\n                    var content = document.createElement(\"DIV\");\r\n                    content.className = \"mcn-fowrapper-content\";\r\n                    \r\n                    WinJSContrib.Utils.moveChilds(ctrl.element, content);\r\n                    ctrl.content = content;\r\n                    ctrl.element.appendChild(content);\r\n                } else {\r\n                    var body = document.createElement(\"BODY\");\r\n                    body.className = \"mcn-fowrapper-content\";\r\n                    body.style.width = '100%';\r\n                    body.style.height = '100%';\r\n                    WinJSContrib.Utils.moveChilds(ctrl.element, body);\r\n                    ctrl.element.innerHTML = '<svg id=\"' + ctrl.wrapperId + '\" class=\"mcn-fowrapper-svg\" xmlns=\"http://www.w3.org/2000/svg\" style=\"width:100%; height: 100%\">' +\r\n                        '<defs>' +\r\n                            '<filter id=\"blur-' + ctrl.wrapperId + '\" x=\"0\" y=\"0\"><feGaussianBlur class=\"gblur\" in=\"SourceGraphic\" stdDeviation=\"0\" /></filter>' +\r\n                        '</defs>' +\r\n                        '<foreignObject class=\"fowrapper\" width=\"100%\" height=\"100%\" requiredExtensions=\"http://www.w3.org/1999/xhtml\" filter=\"url(#blur-' + ctrl.wrapperId + ')\">' +\r\n                        '</foreignObject>' +\r\n                    '</svg>';\r\n                    var container = ctrl.element.querySelector(\".fowrapper\");\r\n                    ctrl.svg = ctrl.element.querySelector(\"svg\");\r\n                    ctrl.container = container;\r\n                    ctrl.content = body;\r\n                    ctrl.blurFilter = ctrl.element.querySelector(\".gblur\");\r\n                    ctrl.sblurFilter = Snap(ctrl.blurFilter);\r\n                    container.appendChild(body);\r\n                }\r\n            },\r\n\r\n            blurTo: function (blur, duration, easing) {\r\n                var ctrl = this;\r\n                if (ctrl.blurFilter) {\r\n                    ctrl.sblurFilter.stop();\r\n                    if (!duration) {\r\n                        ctrl.blurFilter.setAttribute(\"stdDeviation\", blur);\r\n                        return;\r\n                    }\r\n\r\n                    ctrl.sblurFilter.animate({ stdDeviation: blur }, duration, easing || mina.easeout);\r\n                    ctrl.dispatchEvent('blur');\r\n\r\n                } else {\r\n                    if (blur == 0) {\r\n                        ctrl.content.style.transition = \"opacity \" + duration + \"ms ease-out\";\r\n                        ctrl.content.style.opacity = \"1\";\r\n                        //WinJSContrib.UI.Animation.fadeIn(ctrl.content, { duration: duration });\r\n                    } else {\r\n                        ctrl.content.style.transition = \"opacity \" + duration + \"ms ease-out\";\r\n                        ctrl.content.style.opacity = \"0.15\";\r\n                        //WinJSContrib.UI.Animation.fadeOut(ctrl.content, { duration: duration });\r\n                    }\r\n                }\r\n            },\r\n\r\n            updateLayout: function () {\r\n                if (this.container) {\r\n                    this.container.setAttribute(\"width\", \"100%\");\r\n                    this.container.setAttribute(\"height\", \"100%\");\r\n                }\r\n            },\r\n\r\n            dispose: function () {\r\n                WinJS.Utilities.disposeSubTree(this.element);                \r\n                this.element = null;\r\n            }\r\n        }, {\r\n            disabled : false\r\n        }),\r\n        WinJS.Utilities.eventMixin,\r\n        WinJS.Utilities.createEventProperties(\"blur\"))\r\n    });\r\n\r\n    //WinJSContrib.UI.FOWrapper.disabled = true;\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\nvar WinJSContrib = WinJSContrib || {};\r\nWinJSContrib.UI = WinJSContrib.UI || {};\r\n\r\n(function () {\r\n    \"use strict\";\r\n\r\n    WinJSContrib.UI.MultiPassRenderer = WinJS.Class.define(\r\n    /**\r\n     * This control manage multi-pass rendering for improving performances when showing a list of items.\r\n     * The renderer will render \"shells\" for the items to enable page layout, and render items content on demand, or when items scrolls to view.  \r\n     * @class WinJSContrib.UI.MultiPassRenderer\r\n     */\r\n    function (element, options) {\r\n        options = options || {};\r\n        this.items = [];\r\n        this.element = element;\r\n        this._scrollProcessor = null;\r\n        this._tolerance = 1;\r\n        this._virtualize = false;\r\n        this._scrollContainer = options.scrollContainer || null;\r\n        this._multipass = options.multipass || false;\r\n        this._orientation = options.orientation || '';\r\n        this.itemClassName = options.itemClass || options.className || options.itemClassName;\r\n        this.itemTemplate = WinJSContrib.Utils.getTemplate(options.template || options.itemTemplate);\r\n        this.itemInvoked = options.invoked || options.itemInvoked;\r\n        this.onitemContent = options.onitemContent;\r\n        this._onScrollBinded = this._onScroll.bind(this);\r\n\r\n        if (element) {\r\n            element.className = element.className + ' mcn-items-ctrl mcn-layout-ctrl win-disposable';\r\n        }\r\n\r\n        //element.mcnRenderer = this;\r\n        //WinJS.UI.setOptions(this, options);\r\n    },\r\n    /**\r\n      * @lends WinJSContrib.UI.MultiPassRenderer.prototype\r\n      */\r\n    {\r\n        dispose : function(){\r\n            var ctrl = this;\r\n            WinJSContrib.UI.untapAll(ctrl.element);\r\n            WinJS.Utilities.disposeSubTree(ctrl.element);\r\n            ctrl._unregisterScrollEvents();\r\n            ctrl._scrollContainer = null;\r\n            ctrl.element = null;\r\n            ctrl._scrollProcessor = null;\r\n            ctrl.rect = null;           \r\n            ctrl.items = [];\r\n        },\r\n\r\n        clear: function () {\r\n            var ctrl = this;\r\n            WinJS.Utilities.disposeSubTree(ctrl.element);\r\n            ctrl.element.innerHTML = '';\r\n        },\r\n\r\n        /**\r\n         * kind of multipass, can be 'section', or 'item'\r\n         * @type {String}\r\n         * @field\r\n         */\r\n        multipass: {\r\n            get: function () {\r\n                return this._multipass;\r\n            },\r\n            set: function (val) {\r\n                this._multipass = val;\r\n                this.refreshScrollEvents();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * tolerance for determining if the rendering should apply. Tolerance is expressed in scroll container proportion. For example, 1 means that tolerance is equal to scroll container size\r\n         * @type {number}\r\n         * @field\r\n         */\r\n        tolerance: {\r\n            get: function () {\r\n                return this._tolerance;\r\n            },\r\n            set: function (val) {\r\n                this._tolerance = val;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * indicate if renderer empty items out of sight\r\n         * @type {boolean}\r\n         * @field\r\n         */\r\n        virtualize: {\r\n            get: function () {\r\n                return this._virtualize;\r\n            },\r\n            set: function (val) {\r\n                this._virtualize = val;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * could be 'vertical' or 'horizontal'\r\n         * @type {String}\r\n         * @field\r\n         */\r\n        orientation: {\r\n            get: function () {\r\n                return this._orientation;\r\n            },\r\n            set: function (val) {\r\n                this._orientation = val;\r\n                this.refreshScrollEvents();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Element containing scroll. If scrollContainer is filled, items content will get rendered when coming into view\r\n         * @type {HTMLElement}\r\n         * @field\r\n         */\r\n        scrollContainer: {\r\n            get: function () {\r\n                return this._scrollContainer;\r\n            },\r\n            set: function (val) {\r\n                this._unregisterScrollEvents();\r\n                this._scrollContainer = val;\r\n                this._registerScrollEvents();\r\n                //this.checkRendering();\r\n            }\r\n        },\r\n\r\n        _onScroll: function () {\r\n            var ctrl = this;\r\n            if (ctrl.scrollContainer && ctrl._scrollProcessor) {\r\n                if (ctrl._scrollRequest) {\r\n                    cancelAnimationFrame(ctrl._scrollRequest);\r\n                }\r\n\r\n                ctrl._scrollRequest = requestAnimationFrame(function () {\r\n                    ctrl.checkRendering();\r\n                });\r\n            }\r\n        },\r\n\r\n        _unregisterScrollEvents: function () {\r\n            this._scrollProcessor = null;\r\n            this.clearOffsets();\r\n            if (this.scrollContainer) {\r\n                this.scrollContainer.removeEventListener('scroll', this._onScrollBinded);\r\n            }\r\n        },\r\n\r\n        _registerScrollEvents: function () {\r\n            var ctrl = this;\r\n            if (ctrl.scrollContainer) {\r\n                this.scrollContainer.addEventListener('scroll', this._onScrollBinded);\r\n\r\n                if (ctrl.orientation == 'vertical') {\r\n                    if (ctrl.multipass == 'section') {\r\n                        ctrl._scrollProcessor = function () { ctrl._checkSection(ctrl._vIsInView); }\r\n                    } else if (ctrl.multipass == 'item') {\r\n                        ctrl._scrollProcessor = function () { ctrl._checkItem(ctrl._vIsInView); }\r\n                    }\r\n                } else {\r\n                    if (ctrl.multipass == 'section') {\r\n                        ctrl._scrollProcessor = function () { ctrl._checkSection(ctrl._hIsInView); }\r\n                    } else if (ctrl.multipass == 'item') {\r\n                        ctrl._scrollProcessor = function () { ctrl._checkItem(ctrl._hIsInView); }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * refresh scroll events associated to multi pass renderer\r\n         */\r\n        refreshScrollEvents: function () {\r\n            this._unregisterScrollEvents();\r\n            this._registerScrollEvents();\r\n            this.clearOffsets();\r\n        },\r\n\r\n        _vIsInView: function (rect, scrollContainer, tolerance) {\r\n            var pxTolerance = scrollContainer.clientHeight * tolerance;\r\n            if (rect.y >= scrollContainer.scrollTop - pxTolerance && rect.y <= scrollContainer.scrollTop + scrollContainer.clientHeight + pxTolerance)\r\n                return true;\r\n\r\n            if (rect.y + rect.height >= scrollContainer.scrollTop - pxTolerance && rect.y + rect.height <= scrollContainer.scrollTop + scrollContainer.clientHeight + pxTolerance)\r\n                return true;\r\n\r\n            if (rect.y <= scrollContainer.scrollTop - pxTolerance && rect.y + rect.height >= scrollContainer.scrollTop + scrollContainer.clientHeight + pxTolerance)\r\n                return true;\r\n\r\n            return false;\r\n        },\r\n\r\n        _hIsInView: function (rect, scrollContainer, tolerance) {\r\n            var pxTolerance = scrollContainer.clientWidth * (tolerance || 0);\r\n            if (rect.x >= scrollContainer.scrollLeft - pxTolerance && rect.x <= scrollContainer.scrollLeft + scrollContainer.clientWidth + pxTolerance)\r\n                return true;\r\n\r\n            if (rect.x + rect.width >= scrollContainer.scrollLeft - pxTolerance && rect.x + rect.width <= scrollContainer.scrollLeft + scrollContainer.clientWidth + pxTolerance)\r\n                return true;\r\n\r\n            if (rect.x <= scrollContainer.scrollLeft - pxTolerance && rect.x + rect.width >= scrollContainer.scrollLeft + scrollContainer.clientWidth + pxTolerance)\r\n                return true;\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Clear cached offsets for bloc and for items\r\n         */\r\n        clearOffsets: function () {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n            \r\n            ctrl.rect = null;\r\n            ctrl.items.forEach(function (item) {\r\n                item.rect = null;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * update ui related properties like cached offsets, scroll events, ...\r\n         */\r\n        updateLayout: function () {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n            ctrl.refreshScrollEvents();\r\n        },\r\n\r\n        _checkSection: function (check, tolerance, noRender) {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n            tolerance = tolerance || 0;\r\n\r\n            if (!ctrl.rect && ctrl.items && ctrl.items.length) {\r\n                ctrl.rect = WinJSContrib.UI.offsetFrom(ctrl.element, ctrl.scrollContainer);\r\n            } else {\r\n                ctrl.rect = ctrl.rect || { x: 0, y: 0, width: 0, height: 0 };\r\n                ctrl.rect.width = ctrl.element.clientWidth;\r\n                ctrl.rect.height = ctrl.element.clientHeight;\r\n            }\r\n\r\n            if (check(ctrl.rect, ctrl.scrollContainer, tolerance)) {\r\n                if (noRender)\r\n                    return true;\r\n\r\n                ctrl.renderItemsContent();\r\n                if (ctrl.onrendersection) {\r\n                    ctrl.onrendersection();\r\n                }\r\n            } else if (ctrl.virtualize && tolerance > 0 && ctrl.items && ctrl.items.length && ctrl.items[0].rendered) {\r\n                ctrl.items.forEach(function (item) {\r\n                    item.empty();\r\n                });\r\n            }\r\n\r\n            if (tolerance == 0 && ctrl.tolerance > 0) {\r\n                setImmediate(function () {\r\n                    ctrl._checkSection(check, ctrl.tolerance);\r\n                });\r\n            }\r\n        },\r\n\r\n        _checkItem: function (check, tolerance) {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n            tolerance = tolerance || 0;\r\n            var allRendered = true;\r\n\r\n            var countR = function () {\r\n                var countRendered = 0;\r\n                ctrl.items.forEach(function (item) {\r\n                    if (item.rendered) {\r\n                        countRendered++;\r\n                    }\r\n                });\r\n                console.log('rendered ' + countRendered);\r\n            }\r\n\r\n            if (ctrl._checkSection(check, tolerance, true)) {\r\n                ctrl.items.forEach(function (item) {\r\n                    if (!item.rect) {\r\n                        item.rect = WinJSContrib.UI.offsetFrom(item.element, ctrl.scrollContainer);\r\n                    }\r\n                    allRendered = allRendered & item.rendered;\r\n\r\n                    if (!item.rendered && check(item.rect, ctrl.scrollContainer, tolerance)) {\r\n                        item.render();\r\n                    } else if (item.rendered && ctrl.virtualize && tolerance > 0 && !check(item.rect, ctrl.scrollContainer, tolerance)) {\r\n                        item.empty();\r\n                    }\r\n                });\r\n                ctrl.allRendered = allRendered;\r\n                //countR();\r\n            } else if (tolerance > 0 && ctrl.items.length && (ctrl.items[0].rendered || ctrl.items[ctrl.items.length - 1].rendered)) {\r\n                ctrl.items.forEach(function (item) {\r\n                    if (!item.rect) {\r\n                        item.rect = WinJSContrib.UI.offsetFrom(item.element, ctrl.scrollContainer);\r\n                    }\r\n                    if (ctrl.virtualize && !check(item.rect, ctrl.scrollContainer, tolerance)) {\r\n                        item.empty();\r\n                    }\r\n                });\r\n                //countR();\r\n            }\r\n\r\n            if (tolerance == 0 && ctrl.tolerance > 0) {\r\n                setImmediate(function () {\r\n                    ctrl._checkItem(check, ctrl.tolerance);\r\n                });\r\n            }\r\n\r\n\r\n        },\r\n\r\n        /**\r\n         * render items shells to the page\r\n         * @param {Array} items array of items to render\r\n         * @param {Object} renderOptions options for rendering items, can override control options like item template\r\n         */\r\n        prepareItems: function (items, renderOptions) {\r\n            var ctrl = this;\r\n            items = items || [];\r\n            renderOptions = renderOptions || {};\r\n            var numItems = items.length;\r\n\r\n            var itemInvoked = renderOptions.itemInvoked || ctrl.itemInvoked;\r\n            if (typeof itemInvoked == 'string')\r\n                itemInvoked = WinJSContrib.Utils.resolveMethod(ctrl.element, itemInvoked);\r\n            var template = WinJSContrib.Utils.getTemplate(renderOptions.template) || ctrl.itemTemplate;\r\n            var className = renderOptions.itemClassName || ctrl.itemClassName;\r\n            var onitemInit = renderOptions.onitemInit || ctrl.onitemInit;\r\n            var onitemContent = renderOptions.onitemContent || ctrl.onitemContent;\r\n            var container = ctrl.element;\r\n            var registereditems = ctrl.items;\r\n\r\n            items.forEach(function (itemdata) {\r\n                var item = new WinJSContrib.UI.MultiPassItem(ctrl, null, {\r\n                    data: itemdata,\r\n                    template: template,\r\n                    className: className,\r\n                    itemInvoked: itemInvoked,\r\n                    onitemInit: onitemInit,\r\n                    onitemContent: onitemContent\r\n                });\r\n                registereditems.push(item);\r\n                container.appendChild(item.element);\r\n            });\r\n            //for (var i = 0 ; i < numItems; i++) {\r\n            //    var itemdata = items[i];\r\n            //    var item = new WinJSContrib.UI.MultiPassItem(ctrl, null, {\r\n            //        data: itemdata,\r\n            //        template: template,\r\n            //        className: className,\r\n            //        itemInvoked: itemInvoked,\r\n            //        onitemInit: onitemInit,\r\n            //        onitemContent: onitemContent\r\n            //    });\r\n            //    registereditems.push(item);\r\n            //    container.appendChild(item.element);\r\n            //}\r\n\r\n            if (renderOptions.renderItems || !this.multipass) {\r\n                ctrl.renderItemsContent();\r\n            }\r\n            //ctrl.element.style.display = '';\r\n        },\r\n\r\n        /**\r\n         * check rendering of items, based on multipass configuration (force items on screen to render)\r\n         */\r\n        checkRendering: function () {\r\n            var ctrl = this;\r\n            if (ctrl.element && ctrl._scrollProcessor)\r\n                ctrl._scrollProcessor();\r\n        },\r\n\r\n        /**\r\n         * force rendering of all unrendered items\r\n         */\r\n        renderItemsContent: function () {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n\r\n            ctrl.items.forEach(function (item) {\r\n                if (!item.rendered) {\r\n                    //setImmediate(function () {\r\n                    item.render();\r\n                    //});\r\n                }\r\n            });\r\n            ctrl.allRendered = true;\r\n        }\r\n    });\r\n\r\n    WinJSContrib.UI.MultiPassItem = WinJS.Class.define(\r\n        /**\r\n         * Item for multipass rendering\r\n         * @class WinJSContrib.UI.MultiPassItem\r\n         */\r\n    function (renderer, element, options) {\r\n        options = options || {};\r\n        var item = this;\r\n        item.renderer = renderer;\r\n        item.element = element || document.createElement('DIV');\r\n        item.element.className = item.element.className + ' ' + options.className + ' mcn-multipass-item unloaded win-disposable';\r\n        item.element.winControl = item;\r\n\r\n        item.itemInvoked = options.itemInvoked;\r\n        item.itemDataPromise = WinJS.Promise.as(options.data);\r\n\r\n        item.itemTemplate = options.template;\r\n        item.rendered = false;\r\n        item.onitemContent = options.onitemContent;\r\n        if (options.onitemInit) {\r\n            options.onitemInit(this);\r\n        }\r\n    },\r\n    /**\r\n     * @lends WinJSContrib.UI.MultiPassItem\r\n     */\r\n    {\r\n        dispose: function () {\r\n            var item = this;\r\n            item.renderer = null;\r\n            item.element = null;\r\n            item.itemInvoked = null;\r\n            item.itemData = null;\r\n            item.itemDataPromise = null;\r\n            item.itemTemplate = null;\r\n            item.onitemContent = null;\r\n        },\r\n\r\n        /**\r\n         * render item content\r\n         */\r\n        render: function (delayed) {\r\n            var ctrl = this;\r\n\r\n            if (ctrl.element && ctrl.itemTemplate && !ctrl.rendered) {\r\n\r\n                ctrl.rendered = true;\r\n                return ctrl._renderContent();\r\n            }\r\n\r\n            return WinJS.Promise.wrap(ctrl.contentElement);\r\n        },\r\n\r\n        /**\r\n         * empty item and mark it as unrendered\r\n         */\r\n        empty: function () {\r\n            var ctrl = this;\r\n            if (ctrl.element && ctrl.rendered) {\r\n                WinJSContrib.UI.untapAll(ctrl.element);\r\n                ctrl.element.classList.remove('loaded');\r\n                ctrl.element.innerHTML = '';\r\n                ctrl.rendered = false;\r\n            }\r\n        },\r\n\r\n        _renderItemContent: function (rendered) {\r\n            var ctrl = this;\r\n            if (!ctrl.element)\r\n                return;\r\n\r\n            ctrl.element.appendChild(rendered);\r\n\r\n            if (ctrl.itemInvoked) {\r\n                if (typeof ctrl.itemInvoked == 'string')\r\n                    ctrl.itemInvoked = WinJSContrib.Utils.resolveMethod(ctrl.element, ctrl.itemInvoked);\r\n\r\n                if (ctrl.itemInvoked) {\r\n                    WinJSContrib.UI.tap(ctrl.element, function (arg) {\r\n                        ctrl.itemInvoked(ctrl);\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (ctrl.onitemContent) {\r\n                ctrl.onitemContent(ctrl.itemData, rendered);\r\n            }\r\n            else if (ctrl.renderer.onitemContent) {\r\n                ctrl.renderer.onitemContent(ctrl.itemData, rendered);\r\n            }\r\n\r\n            setImmediate(function () {\r\n                if (ctrl.element) {\r\n                    ctrl.element.classList.remove('unloaded');\r\n                    ctrl.element.classList.add('loaded');\r\n                }\r\n            });\r\n\r\n            ctrl.rendered = true;\r\n            ctrl.contentElement = rendered;\r\n            return rendered;\r\n        },\r\n\r\n        _renderContent: function () {\r\n            var ctrl = this;\r\n\r\n            if (ctrl.element && ctrl.itemTemplate) {\r\n                return ctrl.itemDataPromise.then(function (data) {\r\n                    ctrl.itemData = data;\r\n                    return ctrl.itemTemplate.render(data).then(function (rendered) {\r\n                        ctrl._renderItemContent(rendered);\r\n                    });\r\n                });\r\n            }\r\n\r\n            return WinJS.Promise.wrap();\r\n        }\r\n    });\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n(function () {\r\n\r\n\t\"use strict\";\r\n\r\n\t/**\r\n     * Object representing a layout configuration for the grid control\r\n     * @typedef {Object} WinJSContrib.UI.GridControlLayout\r\n     * @property {string} layout layout algorythm to apply (horizontal | vertical | flexhorizontal | flexvertical | hbloc\r\n     * @property {number} cellSpace space between grid cells\r\n     * @property {number} cellWidth width of grid cells\r\n     * @property {number} cellHeight height of grid cells\r\n     * @property {number} itemsPerColumn number of cells per column if using a layout with a fixed number of cells\r\n     * @property {number} itemsPerRow number of cells per row if using a layout with a fixed number of cells\r\n     * @example\r\n     * {\r\n     *     layout: 'horizontal',\r\n     *     itemsPerColumn: (options.itemsPerColumn) ? options.itemsPerColumn : undefined,\r\n     *     itemsPerRow: (options.itemsPerRow) ? options.itemsPerRow : undefined,\r\n     *     cellSpace: 10,\r\n     *     cellWidth: (options.cellWidth) ? options.cellWidth : undefined,\r\n     *     cellHeight: (options.cellHeight) ? options.cellHeight : undefined,\r\n     * }\r\n     */\r\n\r\n\tWinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n\t\tGridControl: WinJS.Class.define(\r\n            /**\r\n             * @classdesc\r\n             * Control that layout it's children with different algorythms. Used with {@link WinJSContrib.UI.Hub}, The Grid could rely on multipass rendering to optimize large hub pages load.\r\n             * @class WinJSContrib.UI.GridControl\r\n             * @param {HTMLElement} element DOM element containing the control\r\n             * @param {Object} options\r\n             */\r\n            function GridControl(element, options) {\r\n            \tvar grid = this;\r\n            \toptions = options || {};\r\n            \tgrid.element = element;\r\n\r\n            \tgrid.element.className = grid.element.className + ' mcn-grid-ctrl mcn-layout-ctrl win-disposable';\r\n            \tgrid.element.winControl = grid;\r\n\r\n\r\n            \t/**\r\n                 * multipass renderer for the grid\r\n                 * @field\r\n                 * @type WinJSContrib.UI.MultiPassRenderer\r\n                 */\r\n            \tgrid.renderer = new WinJSContrib.UI.MultiPassRenderer(grid.element, {\r\n            \t\tmultipass: options.multipass,\r\n            \t\titemClassName: options.itemClassName,\r\n            \t\titemTemplate: options.itemTemplate,\r\n            \t\titemInvoked: options.itemInvoked,\r\n            \t});\r\n\r\n\r\n            \tgrid.layouts = options.layouts;\r\n\r\n            \t/**\r\n                 * default layout definitions for the grid\r\n                 * @field\r\n                 * @type WinJSContrib.UI.GridControlLayout\r\n                 */\r\n            \tgrid.defaultLayout = {\r\n            \t\tlayout: options.layout || 'none',\r\n            \t\titemsPerColumn: (options.itemsPerColumn) ? options.itemsPerColumn : undefined,\r\n            \t\titemsPerRow: (options.itemsPerRow) ? options.itemsPerRow : undefined,\r\n            \t\tcellSpace: (options.cellSpace) ? options.cellSpace : 10,\r\n            \t\tcellWidth: (options.cellWidth) ? options.cellWidth : undefined,\r\n            \t\tcellHeight: (options.cellHeight) ? options.cellHeight : undefined,\r\n            \t};\r\n\r\n            \t/**\r\n                 * indicate if grid accept layout event from the page (if you use WinJS Contrib page events)\r\n                 * @field\r\n                 * @type boolean\r\n                 */\r\n            \tgrid.autolayout = options.autolayout || true;\r\n\r\n            \tvar parent = WinJSContrib.Utils.getScopeControl(grid.element);\r\n            \tif (parent && parent.pageLifeCycle) {\r\n            \t\tparent.pageLifeCycle.steps.layout.attach(function () {\r\n            \t\t\tif (grid.autolayout) {\r\n            \t\t\t\tgrid.layout();\r\n            \t\t\t}\r\n            \t\t});\r\n            \t}\r\n            \telse if (parent && parent.elementReady) {\r\n            \t\tparent.elementReady.then(function () {\r\n            \t\t\tparent.readyComplete.then(function () {\r\n            \t\t\t\tif (grid.autolayout) {\r\n            \t\t\t\t\tgrid.layout();\r\n            \t\t\t\t}\r\n            \t\t\t});\r\n            \t\t});\r\n            \t}\r\n            },\r\n            /**\r\n             * @lends WinJSContrib.UI.GridControl.prototype\r\n             */\r\n            {\r\n            \t/**\r\n                 * scroll element containing the grid. Required for multi pass rendering\r\n                 * @field\r\n                 * @type HTMLElement\r\n                 */\r\n            \tscrollContainer: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.renderer.scrollContainer;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.renderer.scrollContainer = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * indicate if grid layout itself according to the page lifecycle (default to true)\r\n                 * @field\r\n                 * @type boolean\r\n                 */\r\n            \tautolayout: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this._autolayout;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis._autolayout = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * layout definitions for the grid. It's an object containing several grid layout options. See {@link WinJSContrib.UI.GridControlLayout}\r\n                 * @field\r\n                 * @type Object\r\n                 */\r\n            \tlayouts: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.gridLayouts;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.gridLayouts = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * indicate the kind of multipass treatment\r\n                 * @field\r\n                 * @type string\r\n                 */\r\n            \tmultipass: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.renderer.multipass;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.renderer.multipass = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * callback triggered when clicking on an item\r\n                 * @field\r\n                 * @type HTMLElement\r\n                 */\r\n            \titemInvoked: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.renderer.itemInvoked;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.renderer.itemInvoked = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * item template (WinJS Template or template function)\r\n                 * @field\r\n                 * @type Object\r\n                 */\r\n            \titemTemplate: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.renderer.itemTemplate;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.renderer.itemTemplate = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * css class added on item's placeholder\r\n                 * @field\r\n                 * @type Object\r\n                 */\r\n            \titemClassName: {\r\n            \t\tget: function () {\r\n            \t\t\treturn this.renderer.itemClassName;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n            \t\t\tthis.renderer.itemClassName = val;\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * items to render\r\n                 * @field\r\n                 * @type Object\r\n                 */\r\n            \titems: {\r\n            \t\tget: function () {\r\n            \t\t\treturn;\r\n            \t\t},\r\n            \t\tset: function (val) {\r\n\t\t\t\t\t\tif (val && val.length)\r\n            \t\t\t\tthis.prepareItems(val);\r\n            \t\t}\r\n            \t},\r\n\r\n            \t/**\r\n                 * render HTML for items\r\n                 * @param {Array} items array of items to render\r\n                 * @param {Object} renderOptions\r\n                 */\r\n            \tprepareItems: function (items, renderOptions) {\r\n                    if (!this.element)\r\n                        return;\r\n                    \r\n            \t\tvar parent = WinJSContrib.Utils.getParentControlByClass('mcn-layout-ctrl', this.element);\r\n            \t\tvar parentMultipass = undefined;\r\n            \t\tif (!this.renderer.multipass && parent && parent.multipass) {\r\n            \t\t\tthis.renderer.multipass = parent.multipass;\r\n            \t\t}\r\n\r\n            \t\tthis.renderer.prepareItems(items, renderOptions);\r\n            \t},\r\n\r\n            \t/**\r\n                 * force items content to render\r\n                 */\r\n            \trenderItemsContent: function () {\r\n            \t\tif (!this.renderer)\r\n                        return;\r\n                    this.renderer.renderItemsContent();\r\n            \t},\r\n\r\n            \tresetElement: function (elt, isItem) {\r\n            \t\tvar style = elt.style;\r\n            \t\tif (isItem && style.position) style.position = '';\r\n            \t\tif (!isItem && style.display) style.display = '';\r\n            \t\tif (style.width) style.width = '';\r\n            \t\tif (style.height) style.height = '';\r\n            \t\tif (style.minWidth) style.minWidth = '';\r\n            \t\tif (style.minHeight) style.minHeight = '';\r\n            \t\tif (style.left) style.left = '';\r\n            \t\tif (style.top) style.top = '';\r\n            \t},\r\n\r\n            \tclearContent: function () {\r\n            \t\tvar ctrl = this;\r\n            \t\tctrl.renderer.clear();\r\n            \t},\r\n\r\n            \t/**\r\n                 * Clear all layout and position styles on items\r\n                 */\r\n            \tclearLayout: function () {\r\n            \t\tvar ctrl = this;\r\n            \t\t\r\n            \t\tctrl.resetElement(ctrl.element, false);\r\n            \t\tif (ctrl.element.children.length) {\r\n            \t\t\tfor (var i = 0, l = ctrl.element.children.length; i < l; i++) {\r\n            \t\t\t\tctrl.resetElement(ctrl.element.children[i], true);\r\n            \t\t\t}\r\n            \t\t}\r\n            \t},\r\n\r\n            \tfill: function (matrix, x, y, w, h) {\r\n            \t\tif (matrix.length < x + w) {\r\n            \t\t\tfor (var i = matrix.length ; i < x + w ; i++) {\r\n            \t\t\t\tmatrix.push([]);\r\n            \t\t\t}\r\n            \t\t}\r\n\r\n            \t\tfor (var i = x ; i < x + w ; i++) {\r\n            \t\t\tvar col = matrix[i];\r\n            \t\t\tif (col.length < y + h) {\r\n            \t\t\t\tfor (var j = col.length ; j < y + h ; j++) {\r\n            \t\t\t\t\tcol.push(false);\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n\r\n            \t\t\tfor (var j = y ; j < y + h ; j++) {\r\n            \t\t\t\tcol[j] = true;\r\n            \t\t\t}\r\n            \t\t}\r\n            \t},\r\n\r\n            \tfit: function (matrix, x, y, w, h, maxW, maxH) {\r\n            \t\t//items to big\r\n            \t\tif (maxH && h > maxH && y === 0)\r\n            \t\t\treturn true;\r\n            \t\tif (maxW && w > maxW && x === 0)\r\n            \t\t\treturn true;\r\n\r\n            \t\t//overflow grid capacity\r\n            \t\tif (maxW && (x + w) > maxW)\r\n            \t\t\treturn false;\r\n            \t\tif (maxH && (y + h) > maxH)\r\n            \t\t\treturn false;\r\n\r\n            \t\tfor (var i = x ; i < x + w ; i++) {\r\n            \t\t\tvar col = matrix[i];\r\n            \t\t\tif (col) {\r\n            \t\t\t\tfor (var j = y ; j < y + h ; j++) {\r\n            \t\t\t\t\tif (col[j] === true)\r\n            \t\t\t\t\t\treturn false;\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t}\r\n\r\n            \t\treturn true;\r\n            \t},\r\n\r\n            \tfirstFit: function (matrix, w, h, maxH, numItems) {\r\n            \t\tvar ctrl = this;\r\n            \t\tfor (var i = 0 ; i < numItems * maxH * 2 ; i++) {\r\n            \t\t\tvar col = matrix[i];\r\n            \t\t\tif (col) {\r\n            \t\t\t\tfor (var j = 0 ; j < maxH ; j++) {\r\n            \t\t\t\t\tif (col[j] !== true && ctrl.fit(matrix, i, j, w, h, undefined, maxH)) {\r\n            \t\t\t\t\t\treturn { x: i, y: j };\r\n            \t\t\t\t\t}\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t\telse {\r\n            \t\t\t\treturn { x: i, y: 0 };\r\n            \t\t\t}\r\n            \t\t}\r\n\r\n            \t\treturn undefined;\r\n            \t},\r\n\r\n            \tvisibleChilds: function () {\r\n            \t\tvar ctrl = this;\r\n            \t\tvar res = [];\r\n\r\n            \t\tfor (var i = 0, l = ctrl.element.children.length; i < l ; i++) {\r\n            \t\t\tvar item = ctrl.element.children[i];\r\n            \t\t\tvar st = window.getComputedStyle(item);\r\n            \t\t\tif (st.display != 'none' && st.visibility != 'hidden') {\r\n            \t\t\t\tres.push(item);\r\n            \t\t\t}\r\n            \t\t}\r\n\r\n            \t\treturn res;\r\n            \t},\r\n\r\n            \t/**\r\n                 * Layouts algorythm implementations\r\n                 */\r\n            \tGridLayoutsImpl: {\r\n            \t\tnone: function () {\r\n            \t\t},\r\n\r\n            \t\tflexhorizontal: function () {\r\n            \t\t\tvar ctrl = this;\r\n            \t\t\tctrl.renderer.orientation = 'horizontal';\r\n            \t\t\tctrl.element.style.position = 'relative';\r\n            \t\t\tctrl.element.style.display = 'flex';\r\n            \t\t\tctrl.element.style.flexFlow = 'column wrap';\r\n            \t\t\tctrl.element.style.alignContent = 'flex-start';\r\n            \t\t\t//ctrl.element.style.alignContent = 'flex-start';\r\n\r\n            \t\t\tif (ctrl.element.style.width)\r\n            \t\t\t\tctrl.element.style.width = '';\r\n\r\n            \t\t\tctrl.element.style.height = '';\r\n\r\n            \t\t\tif (ctrl.element.clientHeight)\r\n            \t\t\t\tctrl.element.style.height = ctrl.element.clientHeight + 'px';\r\n            \t\t\telse\r\n            \t\t\t\tctrl.element.style.height = '';\r\n\r\n            \t\t\tvar _itemsPerColumn = Math.floor(ctrl.element.clientHeight / (ctrl.data.cellHeight + ctrl.data.cellSpace));\r\n            \t\t\tif (_itemsPerColumn) {\r\n            \t\t\t\tvar visibleitems = ctrl.visibleChilds();\r\n            \t\t\t\tvar columns = Math.ceil(visibleitems.length / _itemsPerColumn);\r\n            \t\t\t\tctrl.element.style.minWidth = ((ctrl.data.cellWidth + ctrl.data.cellSpace) * columns) + 'px';\r\n            \t\t\t}\r\n            \t\t},\r\n\r\n            \t\tflexvertical: function () {\r\n            \t\t    var ctrl = this;\r\n                        ctrl.renderer.orientation = 'vertical';\r\n            \t\t\tctrl.element.style.position = 'relative';\r\n            \t\t\tctrl.element.style.display = 'flex';\r\n            \t\t\tctrl.element.style.flexFlow = 'row wrap';\r\n            \t\t\tctrl.element.style.alignContent = 'flex-start';\r\n\r\n            \t\t\tctrl.element.style.width = '';\r\n            \t\t\tif (ctrl.element.clientWidth)\r\n            \t\t\t\tctrl.element.style.width = ctrl.element.clientWidth + 'px';\r\n            \t\t\telse\r\n            \t\t\t\tctrl.element.style.width = '';\r\n\r\n            \t\t\tif (ctrl.element.style.height)\r\n            \t\t\t\tctrl.element.style.height = '';\r\n            \t\t},\r\n\r\n            \t\thbloc: function () {\r\n            \t\t\tvar ctrl = this;\r\n            \t\t\tctrl.renderer.orientation = 'horizontal';\r\n            \t\t\tctrl.element.style.position = 'relative';\r\n            \t\t\tctrl.element.style.height = '';\r\n            \t\t\tvar _containerH = ctrl.element.clientHeight;\r\n            \t\t\tif (!_containerH)\r\n            \t\t\t\treturn;\r\n\r\n            \t\t\tvar cellW = ctrl.data.cellWidth;\r\n            \t\t\tvar space = ctrl.data.cellSpace;\r\n            \t\t\tvar colCount = 1;\r\n            \t\t\tvar colOffset = 0;\r\n            \t\t\tvar topOffset = 0;\r\n\r\n            \t\t\tvar childs = ctrl.visibleChilds();\r\n            \t\t\tchilds.forEach(function (elt) {\r\n            \t\t\t\tif (elt.style.position != 'absolute')\r\n            \t\t\t\t\telt.style.position = 'absolute';\r\n            \t\t\t\tvar eltH = elt.clientHeight;\r\n            \t\t\t\tif (topOffset + eltH > _containerH) {\r\n            \t\t\t\t\tcolCount++;\r\n            \t\t\t\t\tcolOffset = colOffset + space + cellW;\r\n            \t\t\t\t\ttopOffset = 0;\r\n            \t\t\t\t}\r\n\r\n            \t\t\t\tif (elt.style.left != colOffset + 'px')\r\n            \t\t\t\t\telt.style.left = colOffset + 'px';\r\n            \t\t\t\tif (elt.style.top != topOffset + 'px')\r\n            \t\t\t\t\telt.style.top = topOffset + 'px';\r\n\r\n            \t\t\t\ttopOffset += eltH;\r\n            \t\t\t});\r\n\r\n            \t\t\tcolOffset = colOffset + cellW;\r\n            \t\t\tif (ctrl.element.style.width != colOffset + 'px')\r\n            \t\t\t\tctrl.element.style.width = colOffset + 'px';\r\n            \t\t},\r\n\r\n            \t\thorizontal: function () {\r\n            \t\t\tvar ctrl = this;\r\n            \t\t\tctrl.renderer.orientation = 'horizontal';\r\n            \t\t\tctrl.element.style.position = 'relative';\r\n            \t\t\tctrl.element.style.height = '';\r\n            \t\t\tvar _containerH = ctrl.element.clientHeight;\r\n            \t\t\tif (!_containerH)\r\n            \t\t\t\treturn;\r\n\r\n            \t\t\tvar _itemsPerColumn = Math.floor(_containerH / (ctrl.data.cellHeight + ctrl.data.cellSpace));\r\n            \t\t\tif (_itemsPerColumn <= 0)\r\n            \t\t\t\t_itemsPerColumn = 1;\r\n\r\n            \t\t\tvar cellW = ctrl.data.cellWidth;\r\n            \t\t\tvar cellH = ctrl.data.cellHeight;\r\n            \t\t\tvar space = ctrl.data.cellSpace;\r\n            \t\t\tvar aspectRatio = cellW / cellH;\r\n            \t\t\tvar ratioW = 1;\r\n            \t\t\tvar ratioH = 1;\r\n\r\n            \t\t\tif (ctrl.data.itemsPerColumn) {\r\n            \t\t\t\t_itemsPerColumn = ctrl.data.itemsPerColumn;\r\n            \t\t\t\tcellH = ((_containerH - ((_itemsPerColumn - 1) * space)) / _itemsPerColumn) >> 0;\r\n            \t\t\t\tcellW = (ctrl.data.cellWidth * cellH / ctrl.data.cellHeight) >> 0;\r\n            \t\t\t\tratioW = cellW / ctrl.data.cellWidth;\r\n            \t\t\t\tratioH = cellH / ctrl.data.cellHeight;\r\n            \t\t\t}\r\n\r\n            \t\t\tvar gridCellsMatrix = [[]];\r\n            \t\t\tvar childs = ctrl.visibleChilds();\r\n            \t\t\tchilds.forEach(function (elt) {\r\n            \t\t\t\telt.style.position = 'absolute';\r\n            \t\t\t\tvar eltW = elt.offsetWidth * ratioW;\r\n            \t\t\t\tvar eltH = elt.offsetHeight * ratioH;\r\n            \t\t\t\tvar eltColumns = (eltW / cellW) >> 0;\r\n            \t\t\t\tvar eltRows = (eltH / cellH) >> 0;\r\n\r\n            \t\t\t\tvar pos = ctrl.firstFit(gridCellsMatrix, eltColumns, eltRows, _itemsPerColumn, ctrl.element.children.length);\r\n            \t\t\t\tif (!pos)\r\n            \t\t\t\t\tpos = { x: 0, y: 0 };\r\n            \t\t\t\tctrl.fill(gridCellsMatrix, pos.x, pos.y, eltColumns, eltRows);\r\n\r\n            \t\t\t\tvar left = pos.x * (cellW + space);\r\n            \t\t\t\tvar top = pos.y * (cellH + space);\r\n            \t\t\t\tvar w = (eltColumns * cellW + ((eltColumns - 1) * space));\r\n            \t\t\t\tvar h = (eltRows * cellH + ((eltRows - 1) * space));\r\n            \t\t\t\telt.style.left = left + 'px';\r\n            \t\t\t\telt.style.top = top + 'px';\r\n            \t\t\t\telt.style.width = w + 'px';\r\n            \t\t\t\telt.style.height = h + 'px';\r\n            \t\t\t});\r\n\r\n            \t\t\tvar elementWidth = gridCellsMatrix.length * (cellW + space);\r\n            \t\t\tctrl.element.style.width = elementWidth + 'px';\r\n            \t\t},\r\n\r\n            \t\tvertical: function (plugin) {\r\n            \t\t\tvar ctrl = this;\r\n            \t\t\tctrl.renderer.orientation = 'vertical';\r\n            \t\t\tctrl.element.style.width = '';\r\n            \t\t\tctrl.element.style.position = 'relative';\r\n            \t\t\t//Be aware that in this case, we invert the matrix to crawl data in lines\r\n            \t\t\tvar _containerW = ctrl.element.clientWidth;\r\n            \t\t\tif (!_containerW)\r\n            \t\t\t\treturn;\r\n\r\n            \t\t\tvar _itemsPerLine = Math.floor(_containerW / (ctrl.data.cellWidth + ctrl.data.cellSpace));\r\n            \t\t\tif (_itemsPerLine <= 0)\r\n            \t\t\t\t_itemsPerLine = 1;\r\n\r\n            \t\t\tvar cellW = ctrl.data.cellWidth;\r\n            \t\t\tvar cellH = ctrl.data.cellHeight;\r\n            \t\t\tvar space = ctrl.data.cellSpace;\r\n            \t\t\tvar aspectRatio = cellW / cellH;\r\n            \t\t\tvar ratioW = 1;\r\n            \t\t\tvar ratioH = 1;\r\n\r\n            \t\t\tif (ctrl.data.itemsPerRow) {\r\n            \t\t\t\t_itemsPerLine = ctrl.data.itemsPerRow;\r\n            \t\t\t\tcellW = ((_containerW - ((_itemsPerLine - 1) * space)) / _itemsPerLine) >> 0;\r\n            \t\t\t\tcellH = (ctrl.data.cellHeight * cellW / ctrl.data.cellWidth) >> 0;\r\n            \t\t\t\tratioW = cellW / ctrl.data.cellWidth;\r\n            \t\t\t\tratioH = cellH / ctrl.data.cellHeight;\r\n            \t\t\t}\r\n\r\n            \t\t\tvar gridCellsMatrix = [[]];\r\n            \t\t\tvar childs = ctrl.visibleChilds();\r\n            \t\t\tchilds.forEach(function (elt) {\r\n            \t\t\t\telt.style.position = 'absolute';\r\n\r\n            \t\t\t\tvar eltW = elt.offsetWidth * ratioW;\r\n            \t\t\t\tvar eltH = elt.offsetHeight * ratioH;\r\n            \t\t\t\tvar eltColumns = (eltW / cellW) >> 0;\r\n            \t\t\t\tvar eltRows = (eltH / cellH) >> 0;\r\n\r\n            \t\t\t\tvar pos = ctrl.firstFit(gridCellsMatrix, eltRows, eltColumns, _itemsPerLine, ctrl.element.children.length);\r\n            \t\t\t\t//if (!pos)\r\n            \t\t\t\t//    return;\r\n\r\n            \t\t\t\tctrl.fill(gridCellsMatrix, pos.x, pos.y, eltRows, eltColumns);\r\n\r\n            \t\t\t\tvar left = pos.y * (cellW + space);\r\n            \t\t\t\tvar top = pos.x * (cellH + space);\r\n            \t\t\t\telt.style.left = left + 'px';\r\n            \t\t\t\telt.style.top = top + 'px';\r\n            \t\t\t\telt.style.width = (eltColumns * cellW + ((eltColumns - 1) * space)) + 'px';\r\n            \t\t\t\telt.style.height = (eltRows * cellH + ((eltRows - 1) * space)) + 'px';\r\n\r\n            \t\t\t});\r\n\r\n            \t\t\tvar elementHeight = gridCellsMatrix.length * (cellH + space);\r\n            \t\t\tctrl.element.style.height = elementHeight + 'px';\r\n            \t\t},\r\n            \t},\r\n\r\n            \t/**\r\n                 * layout content items\r\n                 */\r\n            \tlayout: function () {\r\n            \t    var ctrl = this;\r\n            \t    if (!ctrl.element)\r\n            \t        return;\r\n            \t\tvar oldlayout = ctrl.data;\r\n            \t\tctrl.data = ctrl.getLayout();\r\n\r\n            \t\tif (ctrl.data) {\r\n            \t\t\t//if (ctrl.data == oldlayout && ctrl.data.applyed)\r\n            \t\t\t//    return;\r\n\r\n            \t\t\tctrl.data.cellSpace = (ctrl.data.cellSpace != undefined ? ctrl.data.cellSpace : (ctrl.defaultLayout.cellSpace != undefined ? ctrl.defaultLayout.cellSpace : 10));\r\n            \t\t\tctrl.data.cellWidth = ctrl.data.cellWidth || ctrl.defaultLayout.cellWidth || 0;\r\n            \t\t\tctrl.data.cellHeight = ctrl.data.cellHeight || ctrl.defaultLayout.cellHeight || 0;\r\n\r\n            \t\t\t//if cell dimensions are not defined, take it from last child\r\n            \t\t\tif (!ctrl.data.cellWidth || !ctrl.data.cellHeight) {\r\n            \t\t\t    if (ctrl.element && ctrl.element.childNodes && ctrl.element.children.length > 0) {\r\n            \t\t\t\t\tvar childs = ctrl.visibleChilds();\r\n            \t\t\t\t\tif (childs && childs.length) {\r\n            \t\t\t\t\t\tvar firstChild = childs[0];\r\n            \t\t\t\t\t\tvar w = firstChild.clientWidth;\r\n            \t\t\t\t\t\tvar h = firstChild.clientHeight;\r\n            \t\t\t\t\t\tvar l = childs.length;\r\n            \t\t\t\t\t\tif (l > 10) l = 10;\r\n            \t\t\t\t\t\tfor (var i = 0, l = childs.length; i < l ; i++) {\r\n            \t\t\t\t\t\t\tvar item = childs[i];\r\n            \t\t\t\t\t\t\tif (w == 0 || item.clientWidth < w) {\r\n            \t\t\t\t\t\t\t\tw = item.clientWidth;\r\n            \t\t\t\t\t\t\t}\r\n            \t\t\t\t\t\t\tif (h == 0 || item.clientHeight < h) {\r\n            \t\t\t\t\t\t\t\th = item.clientHeight;\r\n            \t\t\t\t\t\t\t}\r\n            \t\t\t\t\t\t}\r\n            \t\t\t\t\t\tctrl.data.cellWidth = w;\r\n            \t\t\t\t\t\tctrl.data.cellHeight = h;\r\n            \t\t\t\t\t}\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n\r\n            \t\t\tvar layoutChanged = !oldlayout || ctrl.data.layout !== oldlayout.layout;\r\n            \t\t\tif (ctrl.data.layout) {\r\n            \t\t\t\tvar layoutfunc = ctrl.GridLayoutsImpl[ctrl.data.layout.toLowerCase()];\r\n            \t\t\t\tif (layoutfunc) {\r\n            \t\t\t\t\tif (layoutChanged)\r\n            \t\t\t\t\t\tctrl.changeLayout();\r\n\r\n            \t\t\t\t\tlayoutfunc.bind(ctrl)(layoutChanged);\r\n            \t\t\t\t\tctrl.data.applyed = true;\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t\tctrl.renderer.checkRendering();\r\n            \t\t}\r\n            \t},\r\n\r\n            \tchangeLayout: function () {\r\n            \t\tvar ctrl = this;\r\n            \t\tctrl.clearLayout();\r\n            \t\tctrl.renderer.updateLayout();\r\n            \t},\r\n\r\n            \t/**\r\n                 * update grid layout\r\n                 */\r\n            \tupdateLayout: function (element, viewState, lastViewState) {\r\n            \t    var ctrl = this;\r\n            \t    if (!ctrl.element)\r\n            \t        return;\r\n            \t\tctrl.layout();\r\n            \t},\r\n\r\n            \t/**\r\n                 * get layout applicable to the current context\r\n                 */\r\n            \tgetLayout: function () {\r\n            \t\tvar ctrl = this;\r\n            \t\tvar matchingLayout = undefined;\r\n            \t\tif (ctrl.gridLayouts) {\r\n            \t\t\tfor (var name in ctrl.gridLayouts) {\r\n            \t\t\t\tvar layout = ctrl.gridLayouts[name];\r\n            \t\t\t\tif (ctrl.gridLayouts.hasOwnProperty(name)) {\r\n            \t\t\t\t\tif (layout.query) {\r\n            \t\t\t\t\t\tvar mq = window.matchMedia(layout.query);\r\n            \t\t\t\t\t\tif (mq.matches) {\r\n            \t\t\t\t\t\t\tmatchingLayout = layout;\r\n            \t\t\t\t\t\t}\r\n            \t\t\t\t\t} else if (!matchingLayout) {\r\n            \t\t\t\t\t\tmatchingLayout = layout;\r\n            \t\t\t\t\t}\r\n            \t\t\t\t}\r\n            \t\t\t\telse if (!matchingLayout) {\r\n            \t\t\t\t\tmatchingLayout = layout;\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t}\r\n\r\n            \t\tif (!matchingLayout) {\r\n            \t\t\tmatchingLayout = ctrl.defaultLayout;\r\n            \t\t}\r\n\r\n            \t\treturn JSON.parse(JSON.stringify(matchingLayout));\r\n            \t},\r\n\r\n            \t/**\r\n                 * Release grid resources\r\n                 */\r\n            \tdispose: function () {\r\n            \t\tthis.element = null;\r\n            \t\tthis.renderer.dispose();\r\n            \t\tif (WinJS.Utilities.disposeSubTree)\r\n            \t\t\tWinJS.Utilities.disposeSubTree(this.element);\r\n            \t}\r\n            })\r\n\t});\r\n\r\n\tif (WinJSContrib.UI.WebComponents) {\r\n\t\tWinJSContrib.UI.WebComponents.register('mcn-grid', WinJSContrib.UI.GridControl, {\r\n\t\t\tproperties: ['multipass', 'autolayout', 'layouts', 'itemInvoked', 'itemTemplate', 'itemClassName', 'items']\r\n\t\t});\r\n\t}\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n/// <reference path=\"winjscontrib.core.js\" />\r\n(function () {\r\n    'use strict';\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        AspectRatio: WinJS.Class.mix(WinJS.Class.define(\r\n        /**\r\n             * @classdesc \r\n             * resize item based on its proportions\r\n             * @class WinJSContrib.UI.AspectRatio\r\n             * @param {HTMLElement} element DOM element owning the control\r\n             * @param {Object} options\r\n             */\r\n        function ctor(element, options) {\r\n            this.element = element || document.createElement('DIV');\r\n            options = options || {};\r\n            this.element.winControl = this;\r\n            this.element.style.display = 'none';\r\n            this.element.classList.add('mcn-aspectratio');\r\n            this.element.classList.add('win-disposable');\r\n            this.element.classList.add('mcn-layout-ctrl');\r\n            WinJS.UI.setOptions(this, options);\r\n            this.render();\r\n        }, \r\n        /**\r\n         * @lends WinJSContrib.UI.AspectRatio.prototype\r\n         */\r\n        {\r\n            /**\r\n             * base width\r\n             * @field\r\n             */\r\n            baseWidth: {\r\n                get: function () {\r\n                    return this._baseWidth;\r\n                },\r\n                set: function (val) {\r\n                    this._baseWidth = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * base width minimum\r\n             * @field\r\n             */\r\n            baseWidthMin: {\r\n                get: function () {\r\n                    return this._baseWidthMin;\r\n                },\r\n                set: function (val) {\r\n                    this._baseWidthMin = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * base width margin\r\n             * @field\r\n             */\r\n            baseWidthMargin: {\r\n                get: function () {\r\n                    return this._baseWidthMargin || 0;\r\n                },\r\n                set: function (val) {\r\n                    this._baseWidthMargin = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * base height\r\n             * @field\r\n             */\r\n            baseHeight: {\r\n                get: function () {\r\n                    return this._baseHeight;\r\n                },\r\n                set: function (val) {\r\n                    this._baseHeight = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * base height minimum\r\n             * @field\r\n             */\r\n            baseHeightMin: {\r\n                get: function () {\r\n                    return this._baseHeightMin;\r\n                },\r\n                set: function (val) {\r\n                    this._baseHeightMin = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * base height margin\r\n             * @field\r\n             */\r\n            baseHeightMargin: {\r\n                get: function () {\r\n                    return this._baseHeightMargin || 0;\r\n                },\r\n                set: function (val) {\r\n                    this._baseHeightMargin = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * aspect ratio\r\n             * @field\r\n             */\r\n            ratio: {\r\n                get: function () {\r\n                    return this._ratio;\r\n                },\r\n                set: function (val) {\r\n                    this._ratio = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * based on\r\n             * @field\r\n             */\r\n            basedOn: {\r\n                get: function () {\r\n                    return this._basedOn;\r\n                },\r\n                set: function (val) {\r\n                    this._basedOn = val;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * target\r\n             * @field\r\n             */\r\n            target: {\r\n                get: function () {\r\n                    return this._target;\r\n                },\r\n                set: function (val) {\r\n                    this._target = val;\r\n                }\r\n            },\r\n\r\n            render: function () {\r\n                var ctrl = this;\r\n                if (!ctrl.styleElt) {\r\n                    ctrl.styleElt = document.createElement('STYLE');\r\n                    ctrl.element.appendChild(ctrl.styleElt);\r\n                }\r\n                ctrl.updateLayout();\r\n            },\r\n\r\n            pageLayout: function () {\r\n                this.updateLayout();\r\n            },\r\n\r\n            updateLayout: function () {\r\n                var ctrl = this;\r\n\r\n                if (!ctrl.parentpage)\r\n                    ctrl.parentpage = WinJSContrib.Utils.getScopeControl(ctrl.element);\r\n\r\n                if (!ctrl.container)\r\n                    ctrl.container = ctrl.element.parentElement;\r\n\r\n                if (ctrl.container && ctrl.target) {\r\n                    if (ctrl.basedOn == \"height\") {\r\n                        ctrl.updateLayoutBasedOnHeight();\r\n                    } else {\r\n                        ctrl.updateLayoutBasedOnWidth();\r\n                    }\r\n                }\r\n            },\r\n\r\n            updateLayoutBasedOnWidth: function () {\r\n                var ctrl = this;\r\n\r\n                var classname = ctrl.target;\r\n                if (ctrl.prefix) {\r\n                    classname = ctrl.prefix + ' ' + classname;\r\n                }\r\n\r\n                var container = ctrl.parentpage.element;\r\n                if (ctrl.baseWidth) {\r\n                    var nbitems = ((ctrl.container.clientWidth / ctrl.baseWidth) << 0) + 1;\r\n                    var itemW = ((ctrl.container.clientWidth / nbitems) << 0) - ctrl.baseWidthMargin - 0.25;\r\n                    if (ctrl.ratio) {\r\n                        var targetH = (itemW / ctrl.ratio) << 0;\r\n                        ctrl.styleElt.innerHTML = classname + \"{ width: \" + itemW + \"px; height:\" + targetH + \"px}\";\r\n                    } else {\r\n                        ctrl.styleElt.innerHTML = classname + \"{ width: \" + itemW + \"px; }\";\r\n                    }\r\n                } else if (ctrl.ratio) {\r\n                    var elements = ctrl.container.querySelectorAll(ctrl.target);\r\n                    var eltW = elements[0].clientWidth;\r\n                    var eltH = elements[0].clientHeight;\r\n\r\n                    if (eltW > 0) {\r\n                        var targetH = (eltW / ctrl.ratio) << 0;\r\n                        if (ctrl.max) {\r\n                            var maxH = (container.clientHeight * ctrl.max / 100) << 0;\r\n                            if (targetH > maxH) {\r\n                                targetH = maxH;\r\n                            }\r\n                        }\r\n                        ctrl.styleElt.innerHTML = classname + \"{ height:\" + targetH + \"px}\";\r\n                    }\r\n                } else {\r\n                    console.warn(\"aspect ratio control must have baseWidth and/or ratio\")\r\n                }\r\n            },\r\n\r\n            updateLayoutBasedOnHeight: function () {\r\n                var ctrl = this;\r\n\r\n                var classname = ctrl.target;\r\n                if (ctrl.prefix) {\r\n                    classname = ctrl.prefix + ' ' + classname;\r\n                }\r\n\r\n                if (ctrl.baseHeight) {\r\n                    var nbitems = ((ctrl.container.clientHeight / ctrl.baseHeight) << 0) + 1;\r\n                    var itemH = ((ctrl.container.clientHeight / nbitems) << 0) - ctrl.baseHeightMargin;\r\n                    var targetW = (itemH / ctrl.ratio) << 0;\r\n                    ctrl.styleElt.innerHTML = classname + \"{ width: \" + targetW + \"px; height:\" + itemH + \"px}\";\r\n                } else {\r\n                    var elements = ctrl.container.querySelectorAll(ctrl.target);\r\n                    var eltW = elements[0].clientWidth;\r\n                    var eltH = elements[0].clientHeight;\r\n\r\n                    if (eltH > 0) {\r\n                        var targetW = (eltH * ctrl.ratio) << 0;\r\n                        if (ctrl.max) {\r\n                            var maxW = (ctrl.container.clientWidth * ctrl.max / 100) << 0;\r\n                            if (targetW > maxW) {\r\n                                targetW = maxW;\r\n                            }\r\n                        }\r\n                        ctrl.styleElt.innerHTML = classname + \"{ width:\" + targetW + \"px}\";\r\n                    }\r\n                }\r\n            },\r\n\r\n            dispose: function () {\r\n                var ctrl = this;\r\n                ctrl.parentpage = null;\r\n                ctrl.container = null;\r\n                ctrl.styleElt.parentElement.removeChild(ctrl.styleElt);\r\n                WinJS.Utilities.disposeSubTree(this.element);\r\n                this.element = null;\r\n            }\r\n        }),\r\n\t\tWinJS.Utilities.eventMixin,\r\n\t\tWinJS.Utilities.createEventProperties(\"myevent\"))\r\n    });\r\n})();","/* \r\n * WinJS Contrib v2.1.0.6\r\n * licensed under MIT license (see http://opensource.org/licenses/MIT)\r\n * sources available at https://github.com/gleborgne/winjscontrib\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n    WinJS.Namespace.define(\"WinJSContrib.UI\", {\r\n        VisualState: WinJS.Class.mix(WinJS.Class.define(function ctor(element, options) {\r\n            this.element = element || document.createElement('DIV');\r\n            options = options || {};\r\n            this.cssprefix = \"state\";\r\n            this.isDirty = false;\r\n            this.element.winControl = this;\r\n            this.element.style.display = \"none\";\r\n            this.element.classList.add('mcn-visualstate');\r\n            this.element.classList.add('mcn-layout-ctrl');\r\n            this.element.classList.add('win-disposable');\r\n            WinJS.UI.setOptions(this, options);\r\n        }, {\r\n            states: {\r\n                get: function () {\r\n                    return this._states;\r\n                },\r\n                set: function (val) {\r\n                    this._states = val;\r\n                }\r\n            },\r\n\r\n            target: {\r\n                get: function () {\r\n                    return this._target;\r\n                },\r\n                set: function (val) {\r\n                    this._target = val;\r\n                }\r\n            },\r\n\r\n            checkAllStates: function (name, state) {\r\n                var ctrl = this;\r\n                if (ctrl.states) {\r\n                    for (var n in ctrl.states) {\r\n                        ctrl.checkState(n, ctrl.states[n]);\r\n                    }\r\n\r\n                    if (ctrl.isDirty) {\r\n                        ctrl.isDirty = false;\r\n                        ctrl.dispatchEvent(\"statechanged\", { sender : this });\r\n                    }\r\n                }\r\n            },\r\n\r\n            checkState: function (name, state) {\r\n                var ctrl = this;\r\n                if (!ctrl.element)\r\n                    return;\r\n\r\n                var target = ctrl.target || ctrl.element.parentElement;\r\n                var targetW = target.clientWidth;\r\n                var targetH = target.clientHeight;\r\n                var evaluate = true;\r\n                if (state.wGt)\r\n                    evaluate = evaluate && targetW > state.wGt;\r\n                if (state.wGtE)\r\n                    evaluate = evaluate && targetW >= state.wGtE;\r\n                if (state.wLt)\r\n                    evaluate = evaluate && targetW < state.wLt;\r\n                if (state.wLtE)\r\n                    evaluate = evaluate && targetW <= state.wLtE;\r\n                if (state.hGt)\r\n                    evaluate = evaluate && targetH > state.hGt;\r\n                if (state.hGtE)\r\n                    evaluate = evaluate && targetH >= state.hGtE;\r\n                if (state.hLt)\r\n                    evaluate = evaluate && targetH < state.hLt;\r\n                if (state.hLtE)\r\n                    evaluate = evaluate && targetH <= state.hLtE;\r\n\r\n                if (evaluate) {\r\n                    if (!state.active) {\r\n                        state.active = true;\r\n                        ctrl.isDirty = true;\r\n                        target.classList.add(ctrl.cssprefix + \"-\" + name);\r\n                    }\r\n                    \r\n                } else {\r\n                    if (state.active) {\r\n                        state.active = false;\r\n                        ctrl.isDirty = true;\r\n                        target.classList.remove(ctrl.cssprefix + \"-\" + name);\r\n                    }\r\n                }\r\n            },\r\n\r\n            isInState : function(statename){\r\n                var state = this.states[statename];\r\n                if (state && state.active)\r\n                    return true;\r\n\r\n                return false;\r\n            },\r\n\r\n            pageLayout: function () {\r\n                var ctrl = this;\r\n                ctrl.checkAllStates();\r\n            },\r\n\r\n            updateLayout: function () {\r\n                var ctrl = this;\r\n                ctrl.checkAllStates();\r\n            },\r\n\r\n            dispose: function () {\r\n                WinJS.Utilities.disposeSubTree(this.element);\r\n                this.element = null;\r\n            }\r\n        }),\r\n\t\tWinJS.Utilities.eventMixin,\r\n\t\tWinJS.Utilities.createEventProperties(\"statechanged\"))\r\n    });\r\n})();"],"sourceRoot":" "}